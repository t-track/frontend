function Bx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function zx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g0={exports:{}},Bl={},y0={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Io=Symbol.for("react.element"),$x=Symbol.for("react.portal"),Hx=Symbol.for("react.fragment"),Wx=Symbol.for("react.strict_mode"),Gx=Symbol.for("react.profiler"),Kx=Symbol.for("react.provider"),qx=Symbol.for("react.context"),Qx=Symbol.for("react.forward_ref"),Yx=Symbol.for("react.suspense"),Xx=Symbol.for("react.memo"),Jx=Symbol.for("react.lazy"),Dp=Symbol.iterator;function Zx(t){return t===null||typeof t!="object"?null:(t=Dp&&t[Dp]||t["@@iterator"],typeof t=="function"?t:null)}var v0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_0=Object.assign,x0={};function Hs(t,e,n){this.props=t,this.context=e,this.refs=x0,this.updater=n||v0}Hs.prototype.isReactComponent={};Hs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w0(){}w0.prototype=Hs.prototype;function Kd(t,e,n){this.props=t,this.context=e,this.refs=x0,this.updater=n||v0}var qd=Kd.prototype=new w0;qd.constructor=Kd;_0(qd,Hs.prototype);qd.isPureReactComponent=!0;var Op=Array.isArray,E0=Object.prototype.hasOwnProperty,Qd={current:null},T0={key:!0,ref:!0,__self:!0,__source:!0};function I0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)E0.call(e,r)&&!T0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Io,type:t,key:i,ref:o,props:s,_owner:Qd.current}}function ew(t,e){return{$$typeof:Io,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Io}function tw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Mp=/\/+/g;function $u(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tw(""+t.key):e.toString(36)}function Pa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Io:case $x:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+$u(o,0):r,Op(s)?(n="",t!=null&&(n=t.replace(Mp,"$&/")+"/"),Pa(s,e,n,"",function(d){return d})):s!=null&&(Yd(s)&&(s=ew(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Mp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Op(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+$u(i,l);o+=Pa(i,e,n,u,s)}else if(u=Zx(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+$u(i,l++),o+=Pa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function la(t,e,n){if(t==null)return t;var r=[],s=0;return Pa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function nw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var at={current:null},ja={transition:null},rw={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:ja,ReactCurrentOwner:Qd};function k0(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:la,forEach:function(t,e,n){la(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return la(t,function(){e++}),e},toArray:function(t){return la(t,function(e){return e})||[]},only:function(t){if(!Yd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Hs;ee.Fragment=Hx;ee.Profiler=Gx;ee.PureComponent=Kd;ee.StrictMode=Wx;ee.Suspense=Yx;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rw;ee.act=k0;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Qd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)E0.call(e,u)&&!T0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Io,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:qx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Kx,_context:t},t.Consumer=t};ee.createElement=I0;ee.createFactory=function(t){var e=I0.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:Qx,render:t}};ee.isValidElement=Yd;ee.lazy=function(t){return{$$typeof:Jx,_payload:{_status:-1,_result:t},_init:nw}};ee.memo=function(t,e){return{$$typeof:Xx,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=ja.transition;ja.transition={};try{t()}finally{ja.transition=e}};ee.unstable_act=k0;ee.useCallback=function(t,e){return at.current.useCallback(t,e)};ee.useContext=function(t){return at.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return at.current.useDeferredValue(t)};ee.useEffect=function(t,e){return at.current.useEffect(t,e)};ee.useId=function(){return at.current.useId()};ee.useImperativeHandle=function(t,e,n){return at.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return at.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return at.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return at.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return at.current.useReducer(t,e,n)};ee.useRef=function(t){return at.current.useRef(t)};ee.useState=function(t){return at.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return at.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return at.current.useTransition()};ee.version="18.3.1";y0.exports=ee;var L=y0.exports;const Gt=zx(L),sw=Bx({__proto__:null,default:Gt},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw=L,ow=Symbol.for("react.element"),aw=Symbol.for("react.fragment"),lw=Object.prototype.hasOwnProperty,uw=iw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cw={key:!0,ref:!0,__self:!0,__source:!0};function A0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lw.call(e,r)&&!cw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ow,type:t,key:i,ref:o,props:s,_owner:uw.current}}Bl.Fragment=aw;Bl.jsx=A0;Bl.jsxs=A0;g0.exports=Bl;var c=g0.exports,S0={exports:{}},wt={},R0={exports:{}},b0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var M=$.length;$.push(Q);e:for(;0<M;){var Z=M-1>>>1,le=$[Z];if(0<s(le,Q))$[Z]=Q,$[M]=le,M=Z;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],M=$.pop();if(M!==Q){$[0]=M;e:for(var Z=0,le=$.length,ye=le>>>1;Z<ye;){var sn=2*(Z+1)-1,on=$[sn],an=sn+1,ln=$[an];if(0>s(on,M))an<le&&0>s(ln,on)?($[Z]=ln,$[an]=M,Z=an):($[Z]=on,$[sn]=M,Z=sn);else if(an<le&&0>s(ln,M))$[Z]=ln,$[an]=M,Z=an;else break e}}return Q}function s($,Q){var M=$.sortIndex-Q.sortIndex;return M!==0?M:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,m=null,g=3,T=!1,b=!1,N=!1,j=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I($){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=$)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function D($){if(N=!1,I($),!b)if(n(u)!==null)b=!0,vr(S);else{var Q=n(d);Q!==null&&Pt(D,Q.startTime-$)}}function S($,Q){b=!1,N&&(N=!1,E(v),v=-1),T=!0;var M=g;try{for(I(Q),m=n(u);m!==null&&(!(m.expirationTime>Q)||$&&!R());){var Z=m.callback;if(typeof Z=="function"){m.callback=null,g=m.priorityLevel;var le=Z(m.expirationTime<=Q);Q=t.unstable_now(),typeof le=="function"?m.callback=le:m===n(u)&&r(u),I(Q)}else r(u);m=n(u)}if(m!==null)var ye=!0;else{var sn=n(d);sn!==null&&Pt(D,sn.startTime-Q),ye=!1}return ye}finally{m=null,g=M,T=!1}}var B=!1,w=null,v=-1,x=5,k=-1;function R(){return!(t.unstable_now()-k<x)}function C(){if(w!==null){var $=t.unstable_now();k=$;var Q=!0;try{Q=w(!0,$)}finally{Q?A():(B=!1,w=null)}}else B=!1}var A;if(typeof _=="function")A=function(){_(C)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,rn=Ve.port2;Ve.port1.onmessage=C,A=function(){rn.postMessage(null)}}else A=function(){j(C,0)};function vr($){w=$,B||(B=!0,A())}function Pt($,Q){v=j(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){b||T||(b=!0,vr(S))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var M=g;g=Q;try{return $()}finally{g=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var M=g;g=$;try{return Q()}finally{g=M}},t.unstable_scheduleCallback=function($,Q,M){var Z=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Z+M:Z):M=Z,$){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=M+le,$={id:p++,callback:Q,priorityLevel:$,startTime:M,expirationTime:le,sortIndex:-1},M>Z?($.sortIndex=M,e(d,$),n(u)===null&&$===n(d)&&(N?(E(v),v=-1):N=!0,Pt(D,M-Z))):($.sortIndex=le,e(u,$),b||T||(b=!0,vr(S))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var Q=g;return function(){var M=g;g=Q;try{return $.apply(this,arguments)}finally{g=M}}}})(b0);R0.exports=b0;var dw=R0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw=L,_t=dw;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N0=new Set,Ki={};function Wr(t,e){Ns(t,e),Ns(t+"Capture",e)}function Ns(t,e){for(Ki[t]=e,t=0;t<e.length;t++)N0.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bc=Object.prototype.hasOwnProperty,fw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vp={},Fp={};function pw(t){return bc.call(Fp,t)?!0:bc.call(Vp,t)?!1:fw.test(t)?Fp[t]=!0:(Vp[t]=!0,!1)}function mw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gw(t,e,n,r){if(e===null||typeof e>"u"||mw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xd=/[\-:]([a-z])/g;function Jd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xd,Jd);We[e]=new lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xd,Jd);We[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xd,Jd);We[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new lt(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zd(t,e,n,r){var s=We.hasOwnProperty(e)?We[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gw(e,n,s,r)&&(n=null),r||s===null?pw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bn=hw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ua=Symbol.for("react.element"),as=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),eh=Symbol.for("react.strict_mode"),Nc=Symbol.for("react.profiler"),C0=Symbol.for("react.provider"),P0=Symbol.for("react.context"),th=Symbol.for("react.forward_ref"),Cc=Symbol.for("react.suspense"),Pc=Symbol.for("react.suspense_list"),nh=Symbol.for("react.memo"),On=Symbol.for("react.lazy"),j0=Symbol.for("react.offscreen"),Up=Symbol.iterator;function fi(t){return t===null||typeof t!="object"?null:(t=Up&&t[Up]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,Hu;function Ei(t){if(Hu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hu=e&&e[1]||""}return`
`+Hu+t}var Wu=!1;function Gu(t,e){if(!t||Wu)return"";Wu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Wu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ei(t):""}function yw(t){switch(t.tag){case 5:return Ei(t.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 2:case 15:return t=Gu(t.type,!1),t;case 11:return t=Gu(t.type.render,!1),t;case 1:return t=Gu(t.type,!0),t;default:return""}}function jc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ls:return"Fragment";case as:return"Portal";case Nc:return"Profiler";case eh:return"StrictMode";case Cc:return"Suspense";case Pc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P0:return(t.displayName||"Context")+".Consumer";case C0:return(t._context.displayName||"Context")+".Provider";case th:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nh:return e=t.displayName||null,e!==null?e:jc(t.type)||"Memo";case On:e=t._payload,t=t._init;try{return jc(t(e))}catch{}}return null}function vw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jc(e);case 8:return e===eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function L0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _w(t){var e=L0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ca(t){t._valueTracker||(t._valueTracker=_w(t))}function D0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=L0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ja(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lc(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function O0(t,e){e=e.checked,e!=null&&Zd(t,"checked",e,!1)}function Dc(t,e){O0(t,e);var n=ar(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oc(t,e.type,ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oc(t,e,n){(e!=="number"||Ja(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ti=Array.isArray;function xs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ar(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $p(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Ti(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ar(n)}}function M0(t,e){var n=ar(e.value),r=ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var da,F0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(da=da||document.createElement("div"),da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xw=["Webkit","ms","Moz","O"];Object.keys(Ci).forEach(function(t){xw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ci[e]=Ci[t]})});function U0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ci.hasOwnProperty(t)&&Ci[t]?(""+e).trim():e+"px"}function B0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=U0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ww=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fc(t,e){if(e){if(ww[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Uc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bc=null;function rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zc=null,ws=null,Es=null;function Wp(t){if(t=So(t)){if(typeof zc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Gl(e),zc(t.stateNode,t.type,e))}}function z0(t){ws?Es?Es.push(t):Es=[t]:ws=t}function $0(){if(ws){var t=ws,e=Es;if(Es=ws=null,Wp(t),e)for(t=0;t<e.length;t++)Wp(e[t])}}function H0(t,e){return t(e)}function W0(){}var Ku=!1;function G0(t,e,n){if(Ku)return t(e,n);Ku=!0;try{return H0(t,e,n)}finally{Ku=!1,(ws!==null||Es!==null)&&(W0(),$0())}}function Qi(t,e){var n=t.stateNode;if(n===null)return null;var r=Gl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var $c=!1;if(wn)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){$c=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{$c=!1}function Ew(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Pi=!1,Za=null,el=!1,Hc=null,Tw={onError:function(t){Pi=!0,Za=t}};function Iw(t,e,n,r,s,i,o,l,u){Pi=!1,Za=null,Ew.apply(Tw,arguments)}function kw(t,e,n,r,s,i,o,l,u){if(Iw.apply(this,arguments),Pi){if(Pi){var d=Za;Pi=!1,Za=null}else throw Error(U(198));el||(el=!0,Hc=d)}}function Gr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function K0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gp(t){if(Gr(t)!==t)throw Error(U(188))}function Aw(t){var e=t.alternate;if(!e){if(e=Gr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Gp(s),t;if(i===r)return Gp(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function q0(t){return t=Aw(t),t!==null?Q0(t):null}function Q0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q0(t);if(e!==null)return e;t=t.sibling}return null}var Y0=_t.unstable_scheduleCallback,Kp=_t.unstable_cancelCallback,Sw=_t.unstable_shouldYield,Rw=_t.unstable_requestPaint,Se=_t.unstable_now,bw=_t.unstable_getCurrentPriorityLevel,sh=_t.unstable_ImmediatePriority,X0=_t.unstable_UserBlockingPriority,tl=_t.unstable_NormalPriority,Nw=_t.unstable_LowPriority,J0=_t.unstable_IdlePriority,zl=null,Qt=null;function Cw(t){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(zl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:Lw,Pw=Math.log,jw=Math.LN2;function Lw(t){return t>>>=0,t===0?32:31-(Pw(t)/jw|0)|0}var ha=64,fa=4194304;function Ii(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ii(l):(i&=o,i!==0&&(r=Ii(i)))}else o=n&~s,o!==0?r=Ii(o):i!==0&&(r=Ii(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ft(e),s=1<<n,r|=t[n],e&=~s;return r}function Dw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ow(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ft(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=Dw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Wc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z0(){var t=ha;return ha<<=1,!(ha&4194240)&&(ha=64),t}function qu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ko(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ft(e),t[e]=n}function Mw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ft(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ih(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ft(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ue=0;function ey(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ty,oh,ny,ry,sy,Gc=!1,pa=[],qn=null,Qn=null,Yn=null,Yi=new Map,Xi=new Map,Vn=[],Vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qp(t,e){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":Yi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(e.pointerId)}}function mi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=So(e),e!==null&&oh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Fw(t,e,n,r,s){switch(e){case"focusin":return qn=mi(qn,t,e,n,r,s),!0;case"dragenter":return Qn=mi(Qn,t,e,n,r,s),!0;case"mouseover":return Yn=mi(Yn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Yi.set(i,mi(Yi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xi.set(i,mi(Xi.get(i)||null,t,e,n,r,s)),!0}return!1}function iy(t){var e=Ar(t.target);if(e!==null){var n=Gr(e);if(n!==null){if(e=n.tag,e===13){if(e=K0(n),e!==null){t.blockedOn=e,sy(t.priority,function(){ny(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function La(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bc=r,n.target.dispatchEvent(r),Bc=null}else return e=So(n),e!==null&&oh(e),t.blockedOn=n,!1;e.shift()}return!0}function Qp(t,e,n){La(t)&&n.delete(e)}function Uw(){Gc=!1,qn!==null&&La(qn)&&(qn=null),Qn!==null&&La(Qn)&&(Qn=null),Yn!==null&&La(Yn)&&(Yn=null),Yi.forEach(Qp),Xi.forEach(Qp)}function gi(t,e){t.blockedOn===e&&(t.blockedOn=null,Gc||(Gc=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,Uw)))}function Ji(t){function e(s){return gi(s,t)}if(0<pa.length){gi(pa[0],t);for(var n=1;n<pa.length;n++){var r=pa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qn!==null&&gi(qn,t),Qn!==null&&gi(Qn,t),Yn!==null&&gi(Yn,t),Yi.forEach(e),Xi.forEach(e),n=0;n<Vn.length;n++)r=Vn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)iy(n),n.blockedOn===null&&Vn.shift()}var Ts=bn.ReactCurrentBatchConfig,rl=!0;function Bw(t,e,n,r){var s=ue,i=Ts.transition;Ts.transition=null;try{ue=1,ah(t,e,n,r)}finally{ue=s,Ts.transition=i}}function zw(t,e,n,r){var s=ue,i=Ts.transition;Ts.transition=null;try{ue=4,ah(t,e,n,r)}finally{ue=s,Ts.transition=i}}function ah(t,e,n,r){if(rl){var s=Kc(t,e,n,r);if(s===null)sc(t,e,r,sl,n),qp(t,r);else if(Fw(s,t,e,n,r))r.stopPropagation();else if(qp(t,r),e&4&&-1<Vw.indexOf(t)){for(;s!==null;){var i=So(s);if(i!==null&&ty(i),i=Kc(t,e,n,r),i===null&&sc(t,e,r,sl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sc(t,e,r,null,n)}}var sl=null;function Kc(t,e,n,r){if(sl=null,t=rh(r),t=Ar(t),t!==null)if(e=Gr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=K0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sl=t,null}function oy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bw()){case sh:return 1;case X0:return 4;case tl:case Nw:return 16;case J0:return 536870912;default:return 16}default:return 16}}var Hn=null,lh=null,Da=null;function ay(){if(Da)return Da;var t,e=lh,n=e.length,r,s="value"in Hn?Hn.value:Hn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Da=s.slice(t,1<r?1-r:void 0)}function Oa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ma(){return!0}function Yp(){return!1}function Et(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ma:Yp,this.isPropagationStopped=Yp,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ma)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ma)},persist:function(){},isPersistent:ma}),e}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uh=Et(Ws),Ao=xe({},Ws,{view:0,detail:0}),$w=Et(Ao),Qu,Yu,yi,$l=xe({},Ao,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ch,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yi&&(yi&&t.type==="mousemove"?(Qu=t.screenX-yi.screenX,Yu=t.screenY-yi.screenY):Yu=Qu=0,yi=t),Qu)},movementY:function(t){return"movementY"in t?t.movementY:Yu}}),Xp=Et($l),Hw=xe({},$l,{dataTransfer:0}),Ww=Et(Hw),Gw=xe({},Ao,{relatedTarget:0}),Xu=Et(Gw),Kw=xe({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),qw=Et(Kw),Qw=xe({},Ws,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yw=Et(Qw),Xw=xe({},Ws,{data:0}),Jp=Et(Xw),Jw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eE[t])?!!e[t]:!1}function ch(){return tE}var nE=xe({},Ao,{key:function(t){if(t.key){var e=Jw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ch,charCode:function(t){return t.type==="keypress"?Oa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rE=Et(nE),sE=xe({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zp=Et(sE),iE=xe({},Ao,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ch}),oE=Et(iE),aE=xe({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),lE=Et(aE),uE=xe({},$l,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cE=Et(uE),dE=[9,13,27,32],dh=wn&&"CompositionEvent"in window,ji=null;wn&&"documentMode"in document&&(ji=document.documentMode);var hE=wn&&"TextEvent"in window&&!ji,ly=wn&&(!dh||ji&&8<ji&&11>=ji),em=" ",tm=!1;function uy(t,e){switch(t){case"keyup":return dE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var us=!1;function fE(t,e){switch(t){case"compositionend":return cy(e);case"keypress":return e.which!==32?null:(tm=!0,em);case"textInput":return t=e.data,t===em&&tm?null:t;default:return null}}function pE(t,e){if(us)return t==="compositionend"||!dh&&uy(t,e)?(t=ay(),Da=lh=Hn=null,us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ly&&e.locale!=="ko"?null:e.data;default:return null}}var mE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mE[t.type]:e==="textarea"}function dy(t,e,n,r){z0(r),e=il(e,"onChange"),0<e.length&&(n=new uh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Li=null,Zi=null;function gE(t){Ey(t,0)}function Hl(t){var e=hs(t);if(D0(e))return t}function yE(t,e){if(t==="change")return e}var hy=!1;if(wn){var Ju;if(wn){var Zu="oninput"in document;if(!Zu){var rm=document.createElement("div");rm.setAttribute("oninput","return;"),Zu=typeof rm.oninput=="function"}Ju=Zu}else Ju=!1;hy=Ju&&(!document.documentMode||9<document.documentMode)}function sm(){Li&&(Li.detachEvent("onpropertychange",fy),Zi=Li=null)}function fy(t){if(t.propertyName==="value"&&Hl(Zi)){var e=[];dy(e,Zi,t,rh(t)),G0(gE,e)}}function vE(t,e,n){t==="focusin"?(sm(),Li=e,Zi=n,Li.attachEvent("onpropertychange",fy)):t==="focusout"&&sm()}function _E(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hl(Zi)}function xE(t,e){if(t==="click")return Hl(e)}function wE(t,e){if(t==="input"||t==="change")return Hl(e)}function EE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bt=typeof Object.is=="function"?Object.is:EE;function eo(t,e){if(Bt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!bc.call(e,s)||!Bt(t[s],e[s]))return!1}return!0}function im(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function om(t,e){var n=im(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=im(n)}}function py(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?py(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function my(){for(var t=window,e=Ja();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ja(t.document)}return e}function hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TE(t){var e=my(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&py(n.ownerDocument.documentElement,n)){if(r!==null&&hh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=om(n,i);var o=om(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IE=wn&&"documentMode"in document&&11>=document.documentMode,cs=null,qc=null,Di=null,Qc=!1;function am(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qc||cs==null||cs!==Ja(r)||(r=cs,"selectionStart"in r&&hh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Di&&eo(Di,r)||(Di=r,r=il(qc,"onSelect"),0<r.length&&(e=new uh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=cs)))}function ga(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ds={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionend:ga("Transition","TransitionEnd")},ec={},gy={};wn&&(gy=document.createElement("div").style,"AnimationEvent"in window||(delete ds.animationend.animation,delete ds.animationiteration.animation,delete ds.animationstart.animation),"TransitionEvent"in window||delete ds.transitionend.transition);function Wl(t){if(ec[t])return ec[t];if(!ds[t])return t;var e=ds[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gy)return ec[t]=e[n];return t}var yy=Wl("animationend"),vy=Wl("animationiteration"),_y=Wl("animationstart"),xy=Wl("transitionend"),wy=new Map,lm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(t,e){wy.set(t,e),Wr(e,[t])}for(var tc=0;tc<lm.length;tc++){var nc=lm[tc],kE=nc.toLowerCase(),AE=nc[0].toUpperCase()+nc.slice(1);hr(kE,"on"+AE)}hr(yy,"onAnimationEnd");hr(vy,"onAnimationIteration");hr(_y,"onAnimationStart");hr("dblclick","onDoubleClick");hr("focusin","onFocus");hr("focusout","onBlur");hr(xy,"onTransitionEnd");Ns("onMouseEnter",["mouseout","mouseover"]);Ns("onMouseLeave",["mouseout","mouseover"]);Ns("onPointerEnter",["pointerout","pointerover"]);Ns("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ki));function um(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kw(r,e,void 0,t),t.currentTarget=null}function Ey(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;um(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;um(s,l,d),i=u}}}if(el)throw t=Hc,el=!1,Hc=null,t}function pe(t,e){var n=e[ed];n===void 0&&(n=e[ed]=new Set);var r=t+"__bubble";n.has(r)||(Ty(e,t,2,!1),n.add(r))}function rc(t,e,n){var r=0;e&&(r|=4),Ty(n,t,r,e)}var ya="_reactListening"+Math.random().toString(36).slice(2);function to(t){if(!t[ya]){t[ya]=!0,N0.forEach(function(n){n!=="selectionchange"&&(SE.has(n)||rc(n,!1,t),rc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ya]||(e[ya]=!0,rc("selectionchange",!1,e))}}function Ty(t,e,n,r){switch(oy(e)){case 1:var s=Bw;break;case 4:s=zw;break;default:s=ah}n=s.bind(null,e,n,t),s=void 0,!$c||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ar(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}G0(function(){var d=i,p=rh(n),m=[];e:{var g=wy.get(t);if(g!==void 0){var T=uh,b=t;switch(t){case"keypress":if(Oa(n)===0)break e;case"keydown":case"keyup":T=rE;break;case"focusin":b="focus",T=Xu;break;case"focusout":b="blur",T=Xu;break;case"beforeblur":case"afterblur":T=Xu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Xp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Ww;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=oE;break;case yy:case vy:case _y:T=qw;break;case xy:T=lE;break;case"scroll":T=$w;break;case"wheel":T=cE;break;case"copy":case"cut":case"paste":T=Yw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Zp}var N=(e&4)!==0,j=!N&&t==="scroll",E=N?g!==null?g+"Capture":null:g;N=[];for(var _=d,I;_!==null;){I=_;var D=I.stateNode;if(I.tag===5&&D!==null&&(I=D,E!==null&&(D=Qi(_,E),D!=null&&N.push(no(_,D,I)))),j)break;_=_.return}0<N.length&&(g=new T(g,b,null,n,p),m.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==Bc&&(b=n.relatedTarget||n.fromElement)&&(Ar(b)||b[En]))break e;if((T||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,T?(b=n.relatedTarget||n.toElement,T=d,b=b?Ar(b):null,b!==null&&(j=Gr(b),b!==j||b.tag!==5&&b.tag!==6)&&(b=null)):(T=null,b=d),T!==b)){if(N=Xp,D="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(N=Zp,D="onPointerLeave",E="onPointerEnter",_="pointer"),j=T==null?g:hs(T),I=b==null?g:hs(b),g=new N(D,_+"leave",T,n,p),g.target=j,g.relatedTarget=I,D=null,Ar(p)===d&&(N=new N(E,_+"enter",b,n,p),N.target=I,N.relatedTarget=j,D=N),j=D,T&&b)t:{for(N=T,E=b,_=0,I=N;I;I=rs(I))_++;for(I=0,D=E;D;D=rs(D))I++;for(;0<_-I;)N=rs(N),_--;for(;0<I-_;)E=rs(E),I--;for(;_--;){if(N===E||E!==null&&N===E.alternate)break t;N=rs(N),E=rs(E)}N=null}else N=null;T!==null&&cm(m,g,T,N,!1),b!==null&&j!==null&&cm(m,j,b,N,!0)}}e:{if(g=d?hs(d):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var S=yE;else if(nm(g))if(hy)S=wE;else{S=_E;var B=vE}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=xE);if(S&&(S=S(t,d))){dy(m,S,n,p);break e}B&&B(t,g,d),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&Oc(g,"number",g.value)}switch(B=d?hs(d):window,t){case"focusin":(nm(B)||B.contentEditable==="true")&&(cs=B,qc=d,Di=null);break;case"focusout":Di=qc=cs=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,am(m,n,p);break;case"selectionchange":if(IE)break;case"keydown":case"keyup":am(m,n,p)}var w;if(dh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else us?uy(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(ly&&n.locale!=="ko"&&(us||v!=="onCompositionStart"?v==="onCompositionEnd"&&us&&(w=ay()):(Hn=p,lh="value"in Hn?Hn.value:Hn.textContent,us=!0)),B=il(d,v),0<B.length&&(v=new Jp(v,t,null,n,p),m.push({event:v,listeners:B}),w?v.data=w:(w=cy(n),w!==null&&(v.data=w)))),(w=hE?fE(t,n):pE(t,n))&&(d=il(d,"onBeforeInput"),0<d.length&&(p=new Jp("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=w))}Ey(m,e)})}function no(t,e,n){return{instance:t,listener:e,currentTarget:n}}function il(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qi(t,n),i!=null&&r.unshift(no(t,i,s)),i=Qi(t,e),i!=null&&r.push(no(t,i,s))),t=t.return}return r}function rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Qi(n,i),u!=null&&o.unshift(no(n,u,l))):s||(u=Qi(n,i),u!=null&&o.push(no(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var RE=/\r\n?/g,bE=/\u0000|\uFFFD/g;function dm(t){return(typeof t=="string"?t:""+t).replace(RE,`
`).replace(bE,"")}function va(t,e,n){if(e=dm(e),dm(t)!==e&&n)throw Error(U(425))}function ol(){}var Yc=null,Xc=null;function Jc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zc=typeof setTimeout=="function"?setTimeout:void 0,NE=typeof clearTimeout=="function"?clearTimeout:void 0,hm=typeof Promise=="function"?Promise:void 0,CE=typeof queueMicrotask=="function"?queueMicrotask:typeof hm<"u"?function(t){return hm.resolve(null).then(t).catch(PE)}:Zc;function PE(t){setTimeout(function(){throw t})}function ic(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ji(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ji(e)}function Xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Gs,ro="__reactProps$"+Gs,En="__reactContainer$"+Gs,ed="__reactEvents$"+Gs,jE="__reactListeners$"+Gs,LE="__reactHandles$"+Gs;function Ar(t){var e=t[Kt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[En]||n[Kt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fm(t);t!==null;){if(n=t[Kt])return n;t=fm(t)}return e}t=n,n=t.parentNode}return null}function So(t){return t=t[Kt]||t[En],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Gl(t){return t[ro]||null}var td=[],fs=-1;function fr(t){return{current:t}}function me(t){0>fs||(t.current=td[fs],td[fs]=null,fs--)}function he(t,e){fs++,td[fs]=t.current,t.current=e}var lr={},tt=fr(lr),ht=fr(!1),Lr=lr;function Cs(t,e){var n=t.type.contextTypes;if(!n)return lr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ft(t){return t=t.childContextTypes,t!=null}function al(){me(ht),me(tt)}function pm(t,e,n){if(tt.current!==lr)throw Error(U(168));he(tt,e),he(ht,n)}function Iy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,vw(t)||"Unknown",s));return xe({},n,r)}function ll(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lr,Lr=tt.current,he(tt,t),he(ht,ht.current),!0}function mm(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Iy(t,e,Lr),r.__reactInternalMemoizedMergedChildContext=t,me(ht),me(tt),he(tt,t)):me(ht),he(ht,n)}var hn=null,Kl=!1,oc=!1;function ky(t){hn===null?hn=[t]:hn.push(t)}function DE(t){Kl=!0,ky(t)}function pr(){if(!oc&&hn!==null){oc=!0;var t=0,e=ue;try{var n=hn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hn=null,Kl=!1}catch(s){throw hn!==null&&(hn=hn.slice(t+1)),Y0(sh,pr),s}finally{ue=e,oc=!1}}return null}var ps=[],ms=0,ul=null,cl=0,Tt=[],It=0,Dr=null,fn=1,pn="";function Tr(t,e){ps[ms++]=cl,ps[ms++]=ul,ul=t,cl=e}function Ay(t,e,n){Tt[It++]=fn,Tt[It++]=pn,Tt[It++]=Dr,Dr=t;var r=fn;t=pn;var s=32-Ft(r)-1;r&=~(1<<s),n+=1;var i=32-Ft(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,fn=1<<32-Ft(e)+s|n<<s|r,pn=i+t}else fn=1<<i|n<<s|r,pn=t}function fh(t){t.return!==null&&(Tr(t,1),Ay(t,1,0))}function ph(t){for(;t===ul;)ul=ps[--ms],ps[ms]=null,cl=ps[--ms],ps[ms]=null;for(;t===Dr;)Dr=Tt[--It],Tt[It]=null,pn=Tt[--It],Tt[It]=null,fn=Tt[--It],Tt[It]=null}var vt=null,yt=null,ge=!1,Mt=null;function Sy(t,e){var n=St(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vt=t,yt=Xn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vt=t,yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dr!==null?{id:fn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=St(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vt=t,yt=null,!0):!1;default:return!1}}function nd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rd(t){if(ge){var e=yt;if(e){var n=e;if(!gm(t,e)){if(nd(t))throw Error(U(418));e=Xn(n.nextSibling);var r=vt;e&&gm(t,e)?Sy(r,n):(t.flags=t.flags&-4097|2,ge=!1,vt=t)}}else{if(nd(t))throw Error(U(418));t.flags=t.flags&-4097|2,ge=!1,vt=t}}}function ym(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vt=t}function _a(t){if(t!==vt)return!1;if(!ge)return ym(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jc(t.type,t.memoizedProps)),e&&(e=yt)){if(nd(t))throw Ry(),Error(U(418));for(;e;)Sy(t,e),e=Xn(e.nextSibling)}if(ym(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yt=Xn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yt=null}}else yt=vt?Xn(t.stateNode.nextSibling):null;return!0}function Ry(){for(var t=yt;t;)t=Xn(t.nextSibling)}function Ps(){yt=vt=null,ge=!1}function mh(t){Mt===null?Mt=[t]:Mt.push(t)}var OE=bn.ReactCurrentBatchConfig;function vi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function xa(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vm(t){var e=t._init;return e(t._payload)}function by(t){function e(E,_){if(t){var I=E.deletions;I===null?(E.deletions=[_],E.flags|=16):I.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=tr(E,_),E.index=0,E.sibling=null,E}function i(E,_,I){return E.index=I,t?(I=E.alternate,I!==null?(I=I.index,I<_?(E.flags|=2,_):I):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,I,D){return _===null||_.tag!==6?(_=fc(I,E.mode,D),_.return=E,_):(_=s(_,I),_.return=E,_)}function u(E,_,I,D){var S=I.type;return S===ls?p(E,_,I.props.children,D,I.key):_!==null&&(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===On&&vm(S)===_.type)?(D=s(_,I.props),D.ref=vi(E,_,I),D.return=E,D):(D=$a(I.type,I.key,I.props,null,E.mode,D),D.ref=vi(E,_,I),D.return=E,D)}function d(E,_,I,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=pc(I,E.mode,D),_.return=E,_):(_=s(_,I.children||[]),_.return=E,_)}function p(E,_,I,D,S){return _===null||_.tag!==7?(_=Cr(I,E.mode,D,S),_.return=E,_):(_=s(_,I),_.return=E,_)}function m(E,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=fc(""+_,E.mode,I),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ua:return I=$a(_.type,_.key,_.props,null,E.mode,I),I.ref=vi(E,null,_),I.return=E,I;case as:return _=pc(_,E.mode,I),_.return=E,_;case On:var D=_._init;return m(E,D(_._payload),I)}if(Ti(_)||fi(_))return _=Cr(_,E.mode,I,null),_.return=E,_;xa(E,_)}return null}function g(E,_,I,D){var S=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return S!==null?null:l(E,_,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ua:return I.key===S?u(E,_,I,D):null;case as:return I.key===S?d(E,_,I,D):null;case On:return S=I._init,g(E,_,S(I._payload),D)}if(Ti(I)||fi(I))return S!==null?null:p(E,_,I,D,null);xa(E,I)}return null}function T(E,_,I,D,S){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(I)||null,l(_,E,""+D,S);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ua:return E=E.get(D.key===null?I:D.key)||null,u(_,E,D,S);case as:return E=E.get(D.key===null?I:D.key)||null,d(_,E,D,S);case On:var B=D._init;return T(E,_,I,B(D._payload),S)}if(Ti(D)||fi(D))return E=E.get(I)||null,p(_,E,D,S,null);xa(_,D)}return null}function b(E,_,I,D){for(var S=null,B=null,w=_,v=_=0,x=null;w!==null&&v<I.length;v++){w.index>v?(x=w,w=null):x=w.sibling;var k=g(E,w,I[v],D);if(k===null){w===null&&(w=x);break}t&&w&&k.alternate===null&&e(E,w),_=i(k,_,v),B===null?S=k:B.sibling=k,B=k,w=x}if(v===I.length)return n(E,w),ge&&Tr(E,v),S;if(w===null){for(;v<I.length;v++)w=m(E,I[v],D),w!==null&&(_=i(w,_,v),B===null?S=w:B.sibling=w,B=w);return ge&&Tr(E,v),S}for(w=r(E,w);v<I.length;v++)x=T(w,E,v,I[v],D),x!==null&&(t&&x.alternate!==null&&w.delete(x.key===null?v:x.key),_=i(x,_,v),B===null?S=x:B.sibling=x,B=x);return t&&w.forEach(function(R){return e(E,R)}),ge&&Tr(E,v),S}function N(E,_,I,D){var S=fi(I);if(typeof S!="function")throw Error(U(150));if(I=S.call(I),I==null)throw Error(U(151));for(var B=S=null,w=_,v=_=0,x=null,k=I.next();w!==null&&!k.done;v++,k=I.next()){w.index>v?(x=w,w=null):x=w.sibling;var R=g(E,w,k.value,D);if(R===null){w===null&&(w=x);break}t&&w&&R.alternate===null&&e(E,w),_=i(R,_,v),B===null?S=R:B.sibling=R,B=R,w=x}if(k.done)return n(E,w),ge&&Tr(E,v),S;if(w===null){for(;!k.done;v++,k=I.next())k=m(E,k.value,D),k!==null&&(_=i(k,_,v),B===null?S=k:B.sibling=k,B=k);return ge&&Tr(E,v),S}for(w=r(E,w);!k.done;v++,k=I.next())k=T(w,E,v,k.value,D),k!==null&&(t&&k.alternate!==null&&w.delete(k.key===null?v:k.key),_=i(k,_,v),B===null?S=k:B.sibling=k,B=k);return t&&w.forEach(function(C){return e(E,C)}),ge&&Tr(E,v),S}function j(E,_,I,D){if(typeof I=="object"&&I!==null&&I.type===ls&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ua:e:{for(var S=I.key,B=_;B!==null;){if(B.key===S){if(S=I.type,S===ls){if(B.tag===7){n(E,B.sibling),_=s(B,I.props.children),_.return=E,E=_;break e}}else if(B.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===On&&vm(S)===B.type){n(E,B.sibling),_=s(B,I.props),_.ref=vi(E,B,I),_.return=E,E=_;break e}n(E,B);break}else e(E,B);B=B.sibling}I.type===ls?(_=Cr(I.props.children,E.mode,D,I.key),_.return=E,E=_):(D=$a(I.type,I.key,I.props,null,E.mode,D),D.ref=vi(E,_,I),D.return=E,E=D)}return o(E);case as:e:{for(B=I.key;_!==null;){if(_.key===B)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(E,_.sibling),_=s(_,I.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=pc(I,E.mode,D),_.return=E,E=_}return o(E);case On:return B=I._init,j(E,_,B(I._payload),D)}if(Ti(I))return b(E,_,I,D);if(fi(I))return N(E,_,I,D);xa(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,I),_.return=E,E=_):(n(E,_),_=fc(I,E.mode,D),_.return=E,E=_),o(E)):n(E,_)}return j}var js=by(!0),Ny=by(!1),dl=fr(null),hl=null,gs=null,gh=null;function yh(){gh=gs=hl=null}function vh(t){var e=dl.current;me(dl),t._currentValue=e}function sd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Is(t,e){hl=t,gh=gs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dt=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(gh!==t)if(t={context:t,memoizedValue:e,next:null},gs===null){if(hl===null)throw Error(U(308));gs=t,hl.dependencies={lanes:0,firstContext:t}}else gs=gs.next=t;return e}var Sr=null;function _h(t){Sr===null?Sr=[t]:Sr.push(t)}function Cy(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_h(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tn(t,r)}function Tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mn=!1;function xh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Py(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tn(t,n)}return s=r.interleaved,s===null?(e.next=e,_h(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tn(t,n)}function Ma(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}function _m(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fl(t,e,n,r){var s=t.updateQueue;Mn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=d=u=null,l=i;do{var g=l.lane,T=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,N=l;switch(g=e,T=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){m=b.call(T,m,g);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,g=typeof b=="function"?b.call(T,m,g):b,g==null)break e;m=xe({},m,g);break e;case 2:Mn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else T={eventTime:T,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=T,u=m):p=p.next=T,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Mr|=o,t.lanes=o,t.memoizedState=m}}function xm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Ro={},Yt=fr(Ro),so=fr(Ro),io=fr(Ro);function Rr(t){if(t===Ro)throw Error(U(174));return t}function wh(t,e){switch(he(io,e),he(so,t),he(Yt,Ro),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vc(e,t)}me(Yt),he(Yt,e)}function Ls(){me(Yt),me(so),me(io)}function jy(t){Rr(io.current);var e=Rr(Yt.current),n=Vc(e,t.type);e!==n&&(he(so,t),he(Yt,n))}function Eh(t){so.current===t&&(me(Yt),me(so))}var ve=fr(0);function pl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ac=[];function Th(){for(var t=0;t<ac.length;t++)ac[t]._workInProgressVersionPrimary=null;ac.length=0}var Va=bn.ReactCurrentDispatcher,lc=bn.ReactCurrentBatchConfig,Or=0,_e=null,Ce=null,Oe=null,ml=!1,Oi=!1,oo=0,ME=0;function Ye(){throw Error(U(321))}function Ih(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bt(t[n],e[n]))return!1;return!0}function kh(t,e,n,r,s,i){if(Or=i,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Va.current=t===null||t.memoizedState===null?BE:zE,t=n(r,s),Oi){i=0;do{if(Oi=!1,oo=0,25<=i)throw Error(U(301));i+=1,Oe=Ce=null,e.updateQueue=null,Va.current=$E,t=n(r,s)}while(Oi)}if(Va.current=gl,e=Ce!==null&&Ce.next!==null,Or=0,Oe=Ce=_e=null,ml=!1,e)throw Error(U(300));return t}function Ah(){var t=oo!==0;return oo=0,t}function Wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?_e.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function Ct(){if(Ce===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=Oe===null?_e.memoizedState:Oe.next;if(e!==null)Oe=e,Ce=t;else{if(t===null)throw Error(U(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Oe===null?_e.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function ao(t,e){return typeof e=="function"?e(t):e}function uc(t){var e=Ct(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ce,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var p=d.lane;if((Or&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,_e.lanes|=p,Mr|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,Bt(r,e.memoizedState)||(dt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_e.lanes|=i,Mr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cc(t){var e=Ct(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Bt(i,e.memoizedState)||(dt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ly(){}function Dy(t,e){var n=_e,r=Ct(),s=e(),i=!Bt(r.memoizedState,s);if(i&&(r.memoizedState=s,dt=!0),r=r.queue,Sh(Vy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Oe!==null&&Oe.memoizedState.tag&1){if(n.flags|=2048,lo(9,My.bind(null,n,r,s,e),void 0,null),Me===null)throw Error(U(349));Or&30||Oy(n,e,s)}return s}function Oy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function My(t,e,n,r){e.value=n,e.getSnapshot=r,Fy(e)&&Uy(t)}function Vy(t,e,n){return n(function(){Fy(e)&&Uy(t)})}function Fy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bt(t,n)}catch{return!0}}function Uy(t){var e=Tn(t,1);e!==null&&Ut(e,t,1,-1)}function wm(t){var e=Wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},e.queue=t,t=t.dispatch=UE.bind(null,_e,t),[e.memoizedState,t]}function lo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function By(){return Ct().memoizedState}function Fa(t,e,n,r){var s=Wt();_e.flags|=t,s.memoizedState=lo(1|e,n,void 0,r===void 0?null:r)}function ql(t,e,n,r){var s=Ct();r=r===void 0?null:r;var i=void 0;if(Ce!==null){var o=Ce.memoizedState;if(i=o.destroy,r!==null&&Ih(r,o.deps)){s.memoizedState=lo(e,n,i,r);return}}_e.flags|=t,s.memoizedState=lo(1|e,n,i,r)}function Em(t,e){return Fa(8390656,8,t,e)}function Sh(t,e){return ql(2048,8,t,e)}function zy(t,e){return ql(4,2,t,e)}function $y(t,e){return ql(4,4,t,e)}function Hy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wy(t,e,n){return n=n!=null?n.concat([t]):null,ql(4,4,Hy.bind(null,e,t),n)}function Rh(){}function Gy(t,e){var n=Ct();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ky(t,e){var n=Ct();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qy(t,e,n){return Or&21?(Bt(n,e)||(n=Z0(),_e.lanes|=n,Mr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dt=!0),t.memoizedState=n)}function VE(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=lc.transition;lc.transition={};try{t(!1),e()}finally{ue=n,lc.transition=r}}function Qy(){return Ct().memoizedState}function FE(t,e,n){var r=er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yy(t))Xy(e,n);else if(n=Cy(t,e,n,r),n!==null){var s=ot();Ut(n,t,r,s),Jy(n,e,r)}}function UE(t,e,n){var r=er(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yy(t))Xy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Bt(l,o)){var u=e.interleaved;u===null?(s.next=s,_h(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Cy(t,e,s,r),n!==null&&(s=ot(),Ut(n,t,r,s),Jy(n,e,r))}}function Yy(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function Xy(t,e){Oi=ml=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}var gl={readContext:Nt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},BE={readContext:Nt,useCallback:function(t,e){return Wt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:Em,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fa(4194308,4,Hy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fa(4,2,t,e)},useMemo:function(t,e){var n=Wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FE.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=Wt();return t={current:t},e.memoizedState=t},useState:wm,useDebugValue:Rh,useDeferredValue:function(t){return Wt().memoizedState=t},useTransition:function(){var t=wm(!1),e=t[0];return t=VE.bind(null,t[1]),Wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,s=Wt();if(ge){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Me===null)throw Error(U(349));Or&30||Oy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Em(Vy.bind(null,r,i,t),[t]),r.flags|=2048,lo(9,My.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wt(),e=Me.identifierPrefix;if(ge){var n=pn,r=fn;n=(r&~(1<<32-Ft(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ME++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zE={readContext:Nt,useCallback:Gy,useContext:Nt,useEffect:Sh,useImperativeHandle:Wy,useInsertionEffect:zy,useLayoutEffect:$y,useMemo:Ky,useReducer:uc,useRef:By,useState:function(){return uc(ao)},useDebugValue:Rh,useDeferredValue:function(t){var e=Ct();return qy(e,Ce.memoizedState,t)},useTransition:function(){var t=uc(ao)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:Ly,useSyncExternalStore:Dy,useId:Qy,unstable_isNewReconciler:!1},$E={readContext:Nt,useCallback:Gy,useContext:Nt,useEffect:Sh,useImperativeHandle:Wy,useInsertionEffect:zy,useLayoutEffect:$y,useMemo:Ky,useReducer:cc,useRef:By,useState:function(){return cc(ao)},useDebugValue:Rh,useDeferredValue:function(t){var e=Ct();return Ce===null?e.memoizedState=t:qy(e,Ce.memoizedState,t)},useTransition:function(){var t=cc(ao)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:Ly,useSyncExternalStore:Dy,useId:Qy,unstable_isNewReconciler:!1};function Dt(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function id(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ql={isMounted:function(t){return(t=t._reactInternals)?Gr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ot(),s=er(t),i=vn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Jn(t,i,s),e!==null&&(Ut(e,t,s,r),Ma(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ot(),s=er(t),i=vn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Jn(t,i,s),e!==null&&(Ut(e,t,s,r),Ma(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ot(),r=er(t),s=vn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Jn(t,s,r),e!==null&&(Ut(e,t,r,n),Ma(e,t,r))}};function Tm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!eo(n,r)||!eo(s,i):!0}function Zy(t,e,n){var r=!1,s=lr,i=e.contextType;return typeof i=="object"&&i!==null?i=Nt(i):(s=ft(e)?Lr:tt.current,r=e.contextTypes,i=(r=r!=null)?Cs(t,s):lr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ql,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Im(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ql.enqueueReplaceState(e,e.state,null)}function od(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},xh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Nt(i):(i=ft(e)?Lr:tt.current,s.context=Cs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(id(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ql.enqueueReplaceState(s,s.state,null),fl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,e){try{var n="",r=e;do n+=yw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ad(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HE=typeof WeakMap=="function"?WeakMap:Map;function ev(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vl||(vl=!0,yd=r),ad(t,e)},n}function tv(t,e,n){n=vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ad(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ad(t,e),typeof r!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function km(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=sT.bind(null,t,e,n),e.then(t,t))}function Am(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,Jn(n,e,1))),n.lanes|=1),t)}var WE=bn.ReactCurrentOwner,dt=!1;function it(t,e,n,r){e.child=t===null?Ny(e,null,n,r):js(e,t.child,n,r)}function Rm(t,e,n,r,s){n=n.render;var i=e.ref;return Is(e,s),r=kh(t,e,n,r,i,s),n=Ah(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(ge&&n&&fh(e),e.flags|=1,it(t,e,r,s),e.child)}function bm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Oh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,nv(t,e,i,r,s)):(t=$a(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:eo,n(o,r)&&t.ref===e.ref)return In(t,e,s)}return e.flags|=1,t=tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function nv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(eo(i,r)&&t.ref===e.ref)if(dt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(dt=!0);else return e.lanes=t.lanes,In(t,e,s)}return ld(t,e,n,r,s)}function rv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(vs,gt),gt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(vs,gt),gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,he(vs,gt),gt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,he(vs,gt),gt|=r;return it(t,e,s,n),e.child}function sv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ld(t,e,n,r,s){var i=ft(n)?Lr:tt.current;return i=Cs(e,i),Is(e,s),n=kh(t,e,n,r,i,s),r=Ah(),t!==null&&!dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(ge&&r&&fh(e),e.flags|=1,it(t,e,n,s),e.child)}function Nm(t,e,n,r,s){if(ft(n)){var i=!0;ll(e)}else i=!1;if(Is(e,s),e.stateNode===null)Ua(t,e),Zy(e,n,r),od(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Nt(d):(d=ft(n)?Lr:tt.current,d=Cs(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Im(e,o,r,d),Mn=!1;var g=e.memoizedState;o.state=g,fl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||ht.current||Mn?(typeof p=="function"&&(id(e,n,p,r),u=e.memoizedState),(l=Mn||Tm(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Py(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Dt(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nt(u):(u=ft(n)?Lr:tt.current,u=Cs(e,u));var T=n.getDerivedStateFromProps;(p=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Im(e,o,r,u),Mn=!1,g=e.memoizedState,o.state=g,fl(e,r,o,s);var b=e.memoizedState;l!==m||g!==b||ht.current||Mn?(typeof T=="function"&&(id(e,n,T,r),b=e.memoizedState),(d=Mn||Tm(e,n,d,r,g,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return ud(t,e,n,r,i,s)}function ud(t,e,n,r,s,i){sv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&mm(e,n,!1),In(t,e,i);r=e.stateNode,WE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=js(e,t.child,null,i),e.child=js(e,null,l,i)):it(t,e,l,i),e.memoizedState=r.state,s&&mm(e,n,!0),e.child}function iv(t){var e=t.stateNode;e.pendingContext?pm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pm(t,e.context,!1),wh(t,e.containerInfo)}function Cm(t,e,n,r,s){return Ps(),mh(s),e.flags|=256,it(t,e,n,r),e.child}var cd={dehydrated:null,treeContext:null,retryLane:0};function dd(t){return{baseLanes:t,cachePool:null,transitions:null}}function ov(t,e,n){var r=e.pendingProps,s=ve.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),he(ve,s&1),t===null)return rd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Jl(o,r,0,null),t=Cr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=dd(n),e.memoizedState=cd,t):bh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return GE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=tr(l,i):(i=Cr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?dd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cd,r}return i=t.child,t=i.sibling,r=tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bh(t,e){return e=Jl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wa(t,e,n,r){return r!==null&&mh(r),js(e,t.child,null,n),t=bh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=dc(Error(U(422))),wa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Jl({mode:"visible",children:r.children},s,0,null),i=Cr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&js(e,t.child,null,o),e.child.memoizedState=dd(o),e.memoizedState=cd,i);if(!(e.mode&1))return wa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=dc(i,r,void 0),wa(t,e,o,r)}if(l=(o&t.childLanes)!==0,dt||l){if(r=Me,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tn(t,s),Ut(r,t,s,-1))}return Dh(),r=dc(Error(U(421))),wa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=iT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,yt=Xn(s.nextSibling),vt=e,ge=!0,Mt=null,t!==null&&(Tt[It++]=fn,Tt[It++]=pn,Tt[It++]=Dr,fn=t.id,pn=t.overflow,Dr=e),e=bh(e,r.children),e.flags|=4096,e)}function Pm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sd(t.return,e,n)}function hc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function av(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(it(t,e,r.children,n),r=ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Pm(t,n,e);else if(t.tag===19)Pm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&pl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&pl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hc(e,!0,n,null,i);break;case"together":hc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ua(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function In(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KE(t,e,n){switch(e.tag){case 3:iv(e),Ps();break;case 5:jy(e);break;case 1:ft(e.type)&&ll(e);break;case 4:wh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;he(dl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?ov(t,e,n):(he(ve,ve.current&1),t=In(t,e,n),t!==null?t.sibling:null);he(ve,ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return av(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),he(ve,ve.current),r)break;return null;case 22:case 23:return e.lanes=0,rv(t,e,n)}return In(t,e,n)}var lv,hd,uv,cv;lv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hd=function(){};uv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Rr(Yt.current);var i=null;switch(n){case"input":s=Lc(t,s),r=Lc(t,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=Mc(t,s),r=Mc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ol)}Fc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ki.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ki.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&pe("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};cv=function(t,e,n,r){n!==r&&(e.flags|=4)};function _i(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qE(t,e,n){var r=e.pendingProps;switch(ph(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return ft(e.type)&&al(),Xe(e),null;case 3:return r=e.stateNode,Ls(),me(ht),me(tt),Th(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mt!==null&&(xd(Mt),Mt=null))),hd(t,e),Xe(e),null;case 5:Eh(e);var s=Rr(io.current);if(n=e.type,t!==null&&e.stateNode!=null)uv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Xe(e),null}if(t=Rr(Yt.current),_a(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Kt]=e,r[ro]=i,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<ki.length;s++)pe(ki[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":Bp(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":$p(r,i),pe("invalid",r)}Fc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&va(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&va(r.textContent,l,t),s=["children",""+l]):Ki.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":ca(r),zp(r,i,!0);break;case"textarea":ca(r),Hp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ol)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Kt]=e,t[ro]=r,lv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Uc(n,r),n){case"dialog":pe("cancel",t),pe("close",t),s=r;break;case"iframe":case"object":case"embed":pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<ki.length;s++)pe(ki[s],t);s=r;break;case"source":pe("error",t),s=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),s=r;break;case"details":pe("toggle",t),s=r;break;case"input":Bp(t,r),s=Lc(t,r),pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),pe("invalid",t);break;case"textarea":$p(t,r),s=Mc(t,r),pe("invalid",t);break;default:s=r}Fc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?B0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&F0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&qi(t,u):typeof u=="number"&&qi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ki.hasOwnProperty(i)?u!=null&&i==="onScroll"&&pe("scroll",t):u!=null&&Zd(t,i,u,o))}switch(n){case"input":ca(t),zp(t,r,!1);break;case"textarea":ca(t),Hp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ar(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?xs(t,!!r.multiple,i,!1):r.defaultValue!=null&&xs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xe(e),null;case 6:if(t&&e.stateNode!=null)cv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Rr(io.current),Rr(Yt.current),_a(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kt]=e,(i=r.nodeValue!==n)&&(t=vt,t!==null))switch(t.tag){case 3:va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&va(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kt]=e,e.stateNode=r}return Xe(e),null;case 13:if(me(ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&yt!==null&&e.mode&1&&!(e.flags&128))Ry(),Ps(),e.flags|=98560,i=!1;else if(i=_a(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Kt]=e}else Ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),i=!1}else Mt!==null&&(xd(Mt),Mt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?je===0&&(je=3):Dh())),e.updateQueue!==null&&(e.flags|=4),Xe(e),null);case 4:return Ls(),hd(t,e),t===null&&to(e.stateNode.containerInfo),Xe(e),null;case 10:return vh(e.type._context),Xe(e),null;case 17:return ft(e.type)&&al(),Xe(e),null;case 19:if(me(ve),i=e.memoizedState,i===null)return Xe(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)_i(i,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pl(t),o!==null){for(e.flags|=128,_i(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(ve,ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Se()>Os&&(e.flags|=128,r=!0,_i(i,!1),e.lanes=4194304)}else{if(!r)if(t=pl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_i(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ge)return Xe(e),null}else 2*Se()-i.renderingStartTime>Os&&n!==1073741824&&(e.flags|=128,r=!0,_i(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Se(),e.sibling=null,n=ve.current,he(ve,r?n&1|2:n&1),e):(Xe(e),null);case 22:case 23:return Lh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gt&1073741824&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function QE(t,e){switch(ph(e),e.tag){case 1:return ft(e.type)&&al(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ls(),me(ht),me(tt),Th(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Eh(e),null;case 13:if(me(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(ve),null;case 4:return Ls(),null;case 10:return vh(e.type._context),null;case 22:case 23:return Lh(),null;case 24:return null;default:return null}}var Ea=!1,Ze=!1,YE=typeof WeakSet=="function"?WeakSet:Set,H=null;function ys(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function fd(t,e,n){try{n()}catch(r){Te(t,e,r)}}var jm=!1;function XE(t,e){if(Yc=rl,t=my(),hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,p=0,m=t,g=null;t:for(;;){for(var T;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(T=m.firstChild)!==null;)g=m,m=T;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++p===r&&(u=o),(T=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=T}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xc={focusedElem:t,selectionRange:n},rl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,j=b.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?N:Dt(e.type,N),j);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){Te(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return b=jm,jm=!1,b}function Mi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&fd(e,n,i)}s=s.next}while(s!==r)}}function Yl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dv(t){var e=t.alternate;e!==null&&(t.alternate=null,dv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kt],delete e[ro],delete e[ed],delete e[jE],delete e[LE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hv(t){return t.tag===5||t.tag===3||t.tag===4}function Lm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ol));else if(r!==4&&(t=t.child,t!==null))for(md(t,e,n),t=t.sibling;t!==null;)md(t,e,n),t=t.sibling}function gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gd(t,e,n),t=t.sibling;t!==null;)gd(t,e,n),t=t.sibling}var Ue=null,Ot=!1;function Ln(t,e,n){for(n=n.child;n!==null;)fv(t,e,n),n=n.sibling}function fv(t,e,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(zl,n)}catch{}switch(n.tag){case 5:Ze||ys(n,e);case 6:var r=Ue,s=Ot;Ue=null,Ln(t,e,n),Ue=r,Ot=s,Ue!==null&&(Ot?(t=Ue,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(Ot?(t=Ue,n=n.stateNode,t.nodeType===8?ic(t.parentNode,n):t.nodeType===1&&ic(t,n),Ji(t)):ic(Ue,n.stateNode));break;case 4:r=Ue,s=Ot,Ue=n.stateNode.containerInfo,Ot=!0,Ln(t,e,n),Ue=r,Ot=s;break;case 0:case 11:case 14:case 15:if(!Ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fd(n,e,o),s=s.next}while(s!==r)}Ln(t,e,n);break;case 1:if(!Ze&&(ys(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Te(n,e,l)}Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:n.mode&1?(Ze=(r=Ze)||n.memoizedState!==null,Ln(t,e,n),Ze=r):Ln(t,e,n);break;default:Ln(t,e,n)}}function Dm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YE),e.forEach(function(r){var s=oT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,Ot=!1;break e;case 3:Ue=l.stateNode.containerInfo,Ot=!0;break e;case 4:Ue=l.stateNode.containerInfo,Ot=!0;break e}l=l.return}if(Ue===null)throw Error(U(160));fv(i,o,s),Ue=null,Ot=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Te(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pv(e,t),e=e.sibling}function pv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),$t(t),r&4){try{Mi(3,t,t.return),Yl(3,t)}catch(N){Te(t,t.return,N)}try{Mi(5,t,t.return)}catch(N){Te(t,t.return,N)}}break;case 1:Lt(e,t),$t(t),r&512&&n!==null&&ys(n,n.return);break;case 5:if(Lt(e,t),$t(t),r&512&&n!==null&&ys(n,n.return),t.flags&32){var s=t.stateNode;try{qi(s,"")}catch(N){Te(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&O0(s,i),Uc(l,o);var d=Uc(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?B0(s,m):p==="dangerouslySetInnerHTML"?F0(s,m):p==="children"?qi(s,m):Zd(s,p,m,d)}switch(l){case"input":Dc(s,i);break;case"textarea":M0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?xs(s,!!i.multiple,T,!1):g!==!!i.multiple&&(i.defaultValue!=null?xs(s,!!i.multiple,i.defaultValue,!0):xs(s,!!i.multiple,i.multiple?[]:"",!1))}s[ro]=i}catch(N){Te(t,t.return,N)}}break;case 6:if(Lt(e,t),$t(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Te(t,t.return,N)}}break;case 3:if(Lt(e,t),$t(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ji(e.containerInfo)}catch(N){Te(t,t.return,N)}break;case 4:Lt(e,t),$t(t);break;case 13:Lt(e,t),$t(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ph=Se())),r&4&&Dm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Ze=(d=Ze)||p,Lt(e,t),Ze=d):Lt(e,t),$t(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(H=t,p=t.child;p!==null;){for(m=H=p;H!==null;){switch(g=H,T=g.child,g.tag){case 0:case 11:case 14:case 15:Mi(4,g,g.return);break;case 1:ys(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){Te(r,n,N)}}break;case 5:ys(g,g.return);break;case 22:if(g.memoizedState!==null){Mm(m);continue}}T!==null?(T.return=g,H=T):Mm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=U0("display",o))}catch(N){Te(t,t.return,N)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){Te(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Lt(e,t),$t(t),r&4&&Dm(t);break;case 21:break;default:Lt(e,t),$t(t)}}function $t(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hv(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(qi(s,""),r.flags&=-33);var i=Lm(t);gd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Lm(t);md(t,l,o);break;default:throw Error(U(161))}}catch(u){Te(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JE(t,e,n){H=t,mv(t)}function mv(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ea;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Ze;l=Ea;var d=Ze;if(Ea=o,(Ze=u)&&!d)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Vm(s):u!==null?(u.return=o,H=u):Vm(s);for(;i!==null;)H=i,mv(i),i=i.sibling;H=s,Ea=l,Ze=d}Om(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Om(t)}}function Om(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ze||Yl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ze)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Dt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Ji(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Ze||e.flags&512&&pd(e)}catch(g){Te(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Mm(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Vm(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yl(4,e)}catch(u){Te(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Te(e,s,u)}}var i=e.return;try{pd(e)}catch(u){Te(e,i,u)}break;case 5:var o=e.return;try{pd(e)}catch(u){Te(e,o,u)}}}catch(u){Te(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var ZE=Math.ceil,yl=bn.ReactCurrentDispatcher,Nh=bn.ReactCurrentOwner,Rt=bn.ReactCurrentBatchConfig,se=0,Me=null,be=null,$e=0,gt=0,vs=fr(0),je=0,uo=null,Mr=0,Xl=0,Ch=0,Vi=null,ct=null,Ph=0,Os=1/0,dn=null,vl=!1,yd=null,Zn=null,Ta=!1,Wn=null,_l=0,Fi=0,vd=null,Ba=-1,za=0;function ot(){return se&6?Se():Ba!==-1?Ba:Ba=Se()}function er(t){return t.mode&1?se&2&&$e!==0?$e&-$e:OE.transition!==null?(za===0&&(za=Z0()),za):(t=ue,t!==0||(t=window.event,t=t===void 0?16:oy(t.type)),t):1}function Ut(t,e,n,r){if(50<Fi)throw Fi=0,vd=null,Error(U(185));ko(t,n,r),(!(se&2)||t!==Me)&&(t===Me&&(!(se&2)&&(Xl|=n),je===4&&Fn(t,$e)),pt(t,r),n===1&&se===0&&!(e.mode&1)&&(Os=Se()+500,Kl&&pr()))}function pt(t,e){var n=t.callbackNode;Ow(t,e);var r=nl(t,t===Me?$e:0);if(r===0)n!==null&&Kp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Kp(n),e===1)t.tag===0?DE(Fm.bind(null,t)):ky(Fm.bind(null,t)),CE(function(){!(se&6)&&pr()}),n=null;else{switch(ey(r)){case 1:n=sh;break;case 4:n=X0;break;case 16:n=tl;break;case 536870912:n=J0;break;default:n=tl}n=Tv(n,gv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gv(t,e){if(Ba=-1,za=0,se&6)throw Error(U(327));var n=t.callbackNode;if(ks()&&t.callbackNode!==n)return null;var r=nl(t,t===Me?$e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xl(t,r);else{e=r;var s=se;se|=2;var i=vv();(Me!==t||$e!==e)&&(dn=null,Os=Se()+500,Nr(t,e));do try{nT();break}catch(l){yv(t,l)}while(!0);yh(),yl.current=i,se=s,be!==null?e=0:(Me=null,$e=0,e=je)}if(e!==0){if(e===2&&(s=Wc(t),s!==0&&(r=s,e=_d(t,s))),e===1)throw n=uo,Nr(t,0),Fn(t,r),pt(t,Se()),n;if(e===6)Fn(t,r);else{if(s=t.current.alternate,!(r&30)&&!eT(s)&&(e=xl(t,r),e===2&&(i=Wc(t),i!==0&&(r=i,e=_d(t,i))),e===1))throw n=uo,Nr(t,0),Fn(t,r),pt(t,Se()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Ir(t,ct,dn);break;case 3:if(Fn(t,r),(r&130023424)===r&&(e=Ph+500-Se(),10<e)){if(nl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Zc(Ir.bind(null,t,ct,dn),e);break}Ir(t,ct,dn);break;case 4:if(Fn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ft(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZE(r/1960))-r,10<r){t.timeoutHandle=Zc(Ir.bind(null,t,ct,dn),r);break}Ir(t,ct,dn);break;case 5:Ir(t,ct,dn);break;default:throw Error(U(329))}}}return pt(t,Se()),t.callbackNode===n?gv.bind(null,t):null}function _d(t,e){var n=Vi;return t.current.memoizedState.isDehydrated&&(Nr(t,e).flags|=256),t=xl(t,e),t!==2&&(e=ct,ct=n,e!==null&&xd(e)),t}function xd(t){ct===null?ct=t:ct.push.apply(ct,t)}function eT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Bt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fn(t,e){for(e&=~Ch,e&=~Xl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ft(e),r=1<<n;t[n]=-1,e&=~r}}function Fm(t){if(se&6)throw Error(U(327));ks();var e=nl(t,0);if(!(e&1))return pt(t,Se()),null;var n=xl(t,e);if(t.tag!==0&&n===2){var r=Wc(t);r!==0&&(e=r,n=_d(t,r))}if(n===1)throw n=uo,Nr(t,0),Fn(t,e),pt(t,Se()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ir(t,ct,dn),pt(t,Se()),null}function jh(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(Os=Se()+500,Kl&&pr())}}function Vr(t){Wn!==null&&Wn.tag===0&&!(se&6)&&ks();var e=se;se|=1;var n=Rt.transition,r=ue;try{if(Rt.transition=null,ue=1,t)return t()}finally{ue=r,Rt.transition=n,se=e,!(se&6)&&pr()}}function Lh(){gt=vs.current,me(vs)}function Nr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NE(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(ph(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&al();break;case 3:Ls(),me(ht),me(tt),Th();break;case 5:Eh(r);break;case 4:Ls();break;case 13:me(ve);break;case 19:me(ve);break;case 10:vh(r.type._context);break;case 22:case 23:Lh()}n=n.return}if(Me=t,be=t=tr(t.current,null),$e=gt=e,je=0,uo=null,Ch=Xl=Mr=0,ct=Vi=null,Sr!==null){for(e=0;e<Sr.length;e++)if(n=Sr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Sr=null}return t}function yv(t,e){do{var n=be;try{if(yh(),Va.current=gl,ml){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ml=!1}if(Or=0,Oe=Ce=_e=null,Oi=!1,oo=0,Nh.current=null,n===null||n.return===null){je=1,uo=e,be=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=$e,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var T=Am(o);if(T!==null){T.flags&=-257,Sm(T,o,l,i,e),T.mode&1&&km(i,d,e),e=T,u=d;var b=e.updateQueue;if(b===null){var N=new Set;N.add(u),e.updateQueue=N}else b.add(u);break e}else{if(!(e&1)){km(i,d,e),Dh();break e}u=Error(U(426))}}else if(ge&&l.mode&1){var j=Am(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Sm(j,o,l,i,e),mh(Ds(u,l));break e}}i=u=Ds(u,l),je!==4&&(je=2),Vi===null?Vi=[i]:Vi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=ev(i,u,e);_m(i,E);break e;case 1:l=u;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Zn===null||!Zn.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=tv(i,l,e);_m(i,D);break e}}i=i.return}while(i!==null)}xv(n)}catch(S){e=S,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function vv(){var t=yl.current;return yl.current=gl,t===null?gl:t}function Dh(){(je===0||je===3||je===2)&&(je=4),Me===null||!(Mr&268435455)&&!(Xl&268435455)||Fn(Me,$e)}function xl(t,e){var n=se;se|=2;var r=vv();(Me!==t||$e!==e)&&(dn=null,Nr(t,e));do try{tT();break}catch(s){yv(t,s)}while(!0);if(yh(),se=n,yl.current=r,be!==null)throw Error(U(261));return Me=null,$e=0,je}function tT(){for(;be!==null;)_v(be)}function nT(){for(;be!==null&&!Sw();)_v(be)}function _v(t){var e=Ev(t.alternate,t,gt);t.memoizedProps=t.pendingProps,e===null?xv(t):be=e,Nh.current=null}function xv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QE(n,e),n!==null){n.flags&=32767,be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,be=null;return}}else if(n=qE(n,e,gt),n!==null){be=n;return}if(e=e.sibling,e!==null){be=e;return}be=e=t}while(e!==null);je===0&&(je=5)}function Ir(t,e,n){var r=ue,s=Rt.transition;try{Rt.transition=null,ue=1,rT(t,e,n,r)}finally{Rt.transition=s,ue=r}return null}function rT(t,e,n,r){do ks();while(Wn!==null);if(se&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Mw(t,i),t===Me&&(be=Me=null,$e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ta||(Ta=!0,Tv(tl,function(){return ks(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Rt.transition,Rt.transition=null;var o=ue;ue=1;var l=se;se|=4,Nh.current=null,XE(t,n),pv(n,t),TE(Xc),rl=!!Yc,Xc=Yc=null,t.current=n,JE(n),Rw(),se=l,ue=o,Rt.transition=i}else t.current=n;if(Ta&&(Ta=!1,Wn=t,_l=s),i=t.pendingLanes,i===0&&(Zn=null),Cw(n.stateNode),pt(t,Se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vl)throw vl=!1,t=yd,yd=null,t;return _l&1&&t.tag!==0&&ks(),i=t.pendingLanes,i&1?t===vd?Fi++:(Fi=0,vd=t):Fi=0,pr(),null}function ks(){if(Wn!==null){var t=ey(_l),e=Rt.transition,n=ue;try{if(Rt.transition=null,ue=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,_l=0,se&6)throw Error(U(331));var s=se;for(se|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(H=d;H!==null;){var p=H;switch(p.tag){case 0:case 11:case 15:Mi(8,p,i)}var m=p.child;if(m!==null)m.return=p,H=m;else for(;H!==null;){p=H;var g=p.sibling,T=p.return;if(dv(p),p===d){H=null;break}if(g!==null){g.return=T,H=g;break}H=T}}}var b=i.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var j=N.sibling;N.sibling=null,N=j}while(N!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mi(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,H=E;break e}H=i.return}}var _=t.current;for(H=_;H!==null;){o=H;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,H=I;else e:for(o=_;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yl(9,l)}}catch(S){Te(l,l.return,S)}if(l===o){H=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,H=D;break e}H=l.return}}if(se=s,pr(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(zl,t)}catch{}r=!0}return r}finally{ue=n,Rt.transition=e}}return!1}function Um(t,e,n){e=Ds(n,e),e=ev(t,e,1),t=Jn(t,e,1),e=ot(),t!==null&&(ko(t,1,e),pt(t,e))}function Te(t,e,n){if(t.tag===3)Um(t,t,n);else for(;e!==null;){if(e.tag===3){Um(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zn===null||!Zn.has(r))){t=Ds(n,t),t=tv(e,t,1),e=Jn(e,t,1),t=ot(),e!==null&&(ko(e,1,t),pt(e,t));break}}e=e.return}}function sT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ot(),t.pingedLanes|=t.suspendedLanes&n,Me===t&&($e&n)===n&&(je===4||je===3&&($e&130023424)===$e&&500>Se()-Ph?Nr(t,0):Ch|=n),pt(t,e)}function wv(t,e){e===0&&(t.mode&1?(e=fa,fa<<=1,!(fa&130023424)&&(fa=4194304)):e=1);var n=ot();t=Tn(t,e),t!==null&&(ko(t,e,n),pt(t,n))}function iT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wv(t,n)}function oT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),wv(t,n)}var Ev;Ev=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dt=!1,KE(t,e,n);dt=!!(t.flags&131072)}else dt=!1,ge&&e.flags&1048576&&Ay(e,cl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ua(t,e),t=e.pendingProps;var s=Cs(e,tt.current);Is(e,n),s=kh(null,e,r,t,s,n);var i=Ah();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ft(r)?(i=!0,ll(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xh(e),s.updater=Ql,e.stateNode=s,s._reactInternals=e,od(e,r,t,n),e=ud(null,e,r,!0,i,n)):(e.tag=0,ge&&i&&fh(e),it(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ua(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=lT(r),t=Dt(r,t),s){case 0:e=ld(null,e,r,t,n);break e;case 1:e=Nm(null,e,r,t,n);break e;case 11:e=Rm(null,e,r,t,n);break e;case 14:e=bm(null,e,r,Dt(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dt(r,s),ld(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dt(r,s),Nm(t,e,r,s,n);case 3:e:{if(iv(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Py(t,e),fl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ds(Error(U(423)),e),e=Cm(t,e,r,n,s);break e}else if(r!==s){s=Ds(Error(U(424)),e),e=Cm(t,e,r,n,s);break e}else for(yt=Xn(e.stateNode.containerInfo.firstChild),vt=e,ge=!0,Mt=null,n=Ny(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ps(),r===s){e=In(t,e,n);break e}it(t,e,r,n)}e=e.child}return e;case 5:return jy(e),t===null&&rd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Jc(r,s)?o=null:i!==null&&Jc(r,i)&&(e.flags|=32),sv(t,e),it(t,e,o,n),e.child;case 6:return t===null&&rd(e),null;case 13:return ov(t,e,n);case 4:return wh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=js(e,null,r,n):it(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dt(r,s),Rm(t,e,r,s,n);case 7:return it(t,e,e.pendingProps,n),e.child;case 8:return it(t,e,e.pendingProps.children,n),e.child;case 12:return it(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,he(dl,r._currentValue),r._currentValue=o,i!==null)if(Bt(i.value,o)){if(i.children===s.children&&!ht.current){e=In(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=vn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),sd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),sd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}it(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Is(e,n),s=Nt(s),r=r(s),e.flags|=1,it(t,e,r,n),e.child;case 14:return r=e.type,s=Dt(r,e.pendingProps),s=Dt(r.type,s),bm(t,e,r,s,n);case 15:return nv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Dt(r,s),Ua(t,e),e.tag=1,ft(r)?(t=!0,ll(e)):t=!1,Is(e,n),Zy(e,r,s),od(e,r,s,n),ud(null,e,r,!0,t,n);case 19:return av(t,e,n);case 22:return rv(t,e,n)}throw Error(U(156,e.tag))};function Tv(t,e){return Y0(t,e)}function aT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(t,e,n,r){return new aT(t,e,n,r)}function Oh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lT(t){if(typeof t=="function")return Oh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===th)return 11;if(t===nh)return 14}return 2}function tr(t,e){var n=t.alternate;return n===null?(n=St(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $a(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Oh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ls:return Cr(n.children,s,i,e);case eh:o=8,s|=8;break;case Nc:return t=St(12,n,e,s|2),t.elementType=Nc,t.lanes=i,t;case Cc:return t=St(13,n,e,s),t.elementType=Cc,t.lanes=i,t;case Pc:return t=St(19,n,e,s),t.elementType=Pc,t.lanes=i,t;case j0:return Jl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C0:o=10;break e;case P0:o=9;break e;case th:o=11;break e;case nh:o=14;break e;case On:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=St(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Cr(t,e,n,r){return t=St(7,t,r,e),t.lanes=n,t}function Jl(t,e,n,r){return t=St(22,t,r,e),t.elementType=j0,t.lanes=n,t.stateNode={isHidden:!1},t}function fc(t,e,n){return t=St(6,t,null,e),t.lanes=n,t}function pc(t,e,n){return e=St(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qu(0),this.expirationTimes=qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mh(t,e,n,r,s,i,o,l,u){return t=new uT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=St(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xh(i),t}function cT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Iv(t){if(!t)return lr;t=t._reactInternals;e:{if(Gr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(ft(n))return Iy(t,n,e)}return e}function kv(t,e,n,r,s,i,o,l,u){return t=Mh(n,r,!0,t,s,i,o,l,u),t.context=Iv(null),n=t.current,r=ot(),s=er(n),i=vn(r,s),i.callback=e??null,Jn(n,i,s),t.current.lanes=s,ko(t,s,r),pt(t,r),t}function Zl(t,e,n,r){var s=e.current,i=ot(),o=er(s);return n=Iv(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jn(s,e,o),t!==null&&(Ut(t,s,o,i),Ma(t,s,o)),o}function wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vh(t,e){Bm(t,e),(t=t.alternate)&&Bm(t,e)}function dT(){return null}var Av=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fh(t){this._internalRoot=t}eu.prototype.render=Fh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Zl(t,e,null,null)};eu.prototype.unmount=Fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vr(function(){Zl(null,t,null,null)}),e[En]=null}};function eu(t){this._internalRoot=t}eu.prototype.unstable_scheduleHydration=function(t){if(t){var e=ry();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vn.length&&e!==0&&e<Vn[n].priority;n++);Vn.splice(n,0,t),n===0&&iy(t)}};function Uh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zm(){}function hT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=wl(o);i.call(d)}}var o=kv(e,r,t,0,null,!1,!1,"",zm);return t._reactRootContainer=o,t[En]=o.current,to(t.nodeType===8?t.parentNode:t),Vr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=wl(u);l.call(d)}}var u=Mh(t,0,!1,null,null,!1,!1,"",zm);return t._reactRootContainer=u,t[En]=u.current,to(t.nodeType===8?t.parentNode:t),Vr(function(){Zl(e,u,n,r)}),u}function nu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=wl(o);l.call(u)}}Zl(e,o,t,s)}else o=hT(n,e,t,s,r);return wl(o)}ty=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ii(e.pendingLanes);n!==0&&(ih(e,n|1),pt(e,Se()),!(se&6)&&(Os=Se()+500,pr()))}break;case 13:Vr(function(){var r=Tn(t,1);if(r!==null){var s=ot();Ut(r,t,1,s)}}),Vh(t,1)}};oh=function(t){if(t.tag===13){var e=Tn(t,134217728);if(e!==null){var n=ot();Ut(e,t,134217728,n)}Vh(t,134217728)}};ny=function(t){if(t.tag===13){var e=er(t),n=Tn(t,e);if(n!==null){var r=ot();Ut(n,t,e,r)}Vh(t,e)}};ry=function(){return ue};sy=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};zc=function(t,e,n){switch(e){case"input":if(Dc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Gl(r);if(!s)throw Error(U(90));D0(r),Dc(r,s)}}}break;case"textarea":M0(t,n);break;case"select":e=n.value,e!=null&&xs(t,!!n.multiple,e,!1)}};H0=jh;W0=Vr;var fT={usingClientEntryPoint:!1,Events:[So,hs,Gl,z0,$0,jh]},xi={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pT={bundleType:xi.bundleType,version:xi.version,rendererPackageName:xi.rendererPackageName,rendererConfig:xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=q0(t),t===null?null:t.stateNode},findFiberByHostInstance:xi.findFiberByHostInstance||dT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ia.isDisabled&&Ia.supportsFiber)try{zl=Ia.inject(pT),Qt=Ia}catch{}}wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fT;wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uh(e))throw Error(U(200));return cT(t,e,null,n)};wt.createRoot=function(t,e){if(!Uh(t))throw Error(U(299));var n=!1,r="",s=Av;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mh(t,1,!1,null,null,n,!1,r,s),t[En]=e.current,to(t.nodeType===8?t.parentNode:t),new Fh(e)};wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=q0(e),t=t===null?null:t.stateNode,t};wt.flushSync=function(t){return Vr(t)};wt.hydrate=function(t,e,n){if(!tu(e))throw Error(U(200));return nu(null,t,e,!0,n)};wt.hydrateRoot=function(t,e,n){if(!Uh(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Av;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=kv(e,null,t,1,n??null,s,!1,i,o),t[En]=e.current,to(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new eu(e)};wt.render=function(t,e,n){if(!tu(e))throw Error(U(200));return nu(null,t,e,!1,n)};wt.unmountComponentAtNode=function(t){if(!tu(t))throw Error(U(40));return t._reactRootContainer?(Vr(function(){nu(null,null,t,!1,function(){t._reactRootContainer=null,t[En]=null})}),!0):!1};wt.unstable_batchedUpdates=jh;wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!tu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return nu(t,e,n,!1,r)};wt.version="18.3.1-next-f1338f8080-20240426";function Sv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sv)}catch(t){console.error(t)}}Sv(),S0.exports=wt;var mT=S0.exports,Rv,$m=mT;Rv=$m.createRoot,$m.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},co.apply(this,arguments)}var Gn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gn||(Gn={}));const Hm="popstate";function gT(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:l="",hash:u=""}=Kr(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),wd("",{pathname:o,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof i=="string"?i:El(i))}function r(s,i){Bh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return vT(e,n,r,t)}function Ne(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yT(){return Math.random().toString(36).substr(2,8)}function Wm(t,e){return{usr:t.state,key:t.key,idx:e}}function wd(t,e,n,r){return n===void 0&&(n=null),co({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Kr(e):e,{state:n,key:e&&e.key||r||yT()})}function El(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Kr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vT(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Gn.Pop,u=null,d=p();d==null&&(d=0,o.replaceState(co({},o.state,{idx:d}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=Gn.Pop;let j=p(),E=j==null?null:j-d;d=j,u&&u({action:l,location:N.location,delta:E})}function g(j,E){l=Gn.Push;let _=wd(N.location,j,E);n&&n(_,j),d=p()+1;let I=Wm(_,d),D=N.createHref(_);try{o.pushState(I,"",D)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(D)}i&&u&&u({action:l,location:N.location,delta:1})}function T(j,E){l=Gn.Replace;let _=wd(N.location,j,E);n&&n(_,j),d=p();let I=Wm(_,d),D=N.createHref(_);o.replaceState(I,"",D),i&&u&&u({action:l,location:N.location,delta:0})}function b(j){let E=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof j=="string"?j:El(j);return _=_.replace(/ $/,"%20"),Ne(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let N={get action(){return l},get location(){return t(s,o)},listen(j){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Hm,m),u=j,()=>{s.removeEventListener(Hm,m),u=null}},createHref(j){return e(s,j)},createURL:b,encodeLocation(j){let E=b(j);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:T,go(j){return o.go(j)}};return N}var Gm;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gm||(Gm={}));function _T(t,e,n){return n===void 0&&(n="/"),xT(t,e,n,!1)}function xT(t,e,n,r){let s=typeof e=="string"?Kr(e):e,i=zh(s.pathname||"/",n);if(i==null)return null;let o=bv(t);wT(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=PT(i);l=NT(o[u],d,r)}return l}function bv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ne(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=nr([r,u.relativePath]),p=n.concat(u);i.children&&i.children.length>0&&(Ne(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),bv(i.children,e,p,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:RT(d,i.index),routesMeta:p})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of Nv(i.path))s(i,o,u)}),e}function Nv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Nv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function wT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ET=/^:[\w-]+$/,TT=3,IT=2,kT=1,AT=10,ST=-2,Km=t=>t==="*";function RT(t,e){let n=t.split("/"),r=n.length;return n.some(Km)&&(r+=ST),e&&(r+=IT),n.filter(s=>!Km(s)).reduce((s,i)=>s+(ET.test(i)?TT:i===""?kT:AT),r)}function bT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function NT(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",m=qm({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=qm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:nr([i,m.pathname]),pathnameBase:OT(nr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=nr([i,m.pathnameBase]))}return o}function qm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,p,m)=>{let{paramName:g,isOptional:T}=p;if(g==="*"){let N=l[m]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const b=l[m];return T&&!b?d[g]=void 0:d[g]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function CT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Bh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function PT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function zh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function jT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Kr(t):t;return{pathname:n?n.startsWith("/")?n:LT(n,e):e,search:MT(r),hash:VT(s)}}function LT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function mc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Cv(t,e){let n=DT(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Pv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Kr(t):(s=co({},t),Ne(!s.pathname||!s.pathname.includes("?"),mc("?","pathname","search",s)),Ne(!s.pathname||!s.pathname.includes("#"),mc("#","pathname","hash",s)),Ne(!s.search||!s.search.includes("#"),mc("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=jT(s,l),d=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}const nr=t=>t.join("/").replace(/\/\/+/g,"/"),OT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const jv=["post","put","patch","delete"];new Set(jv);const UT=["get",...jv];new Set(UT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ho(){return ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ho.apply(this,arguments)}const $h=L.createContext(null),BT=L.createContext(null),qr=L.createContext(null),ru=L.createContext(null),mr=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Lv=L.createContext(null);function zT(t,e){let{relative:n}=e===void 0?{}:e;bo()||Ne(!1);let{basename:r,navigator:s}=L.useContext(qr),{hash:i,pathname:o,search:l}=Mv(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:nr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function bo(){return L.useContext(ru)!=null}function No(){return bo()||Ne(!1),L.useContext(ru).location}function Dv(t){L.useContext(qr).static||L.useLayoutEffect(t)}function $T(){let{isDataRoute:t}=L.useContext(mr);return t?nI():HT()}function HT(){bo()||Ne(!1);let t=L.useContext($h),{basename:e,future:n,navigator:r}=L.useContext(qr),{matches:s}=L.useContext(mr),{pathname:i}=No(),o=JSON.stringify(Cv(s,n.v7_relativeSplatPath)),l=L.useRef(!1);return Dv(()=>{l.current=!0}),L.useCallback(function(d,p){if(p===void 0&&(p={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=Pv(d,JSON.parse(o),i,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:nr([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,i,t])}function Ov(){let{matches:t}=L.useContext(mr),e=t[t.length-1];return e?e.params:{}}function Mv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(qr),{matches:s}=L.useContext(mr),{pathname:i}=No(),o=JSON.stringify(Cv(s,r.v7_relativeSplatPath));return L.useMemo(()=>Pv(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function WT(t,e){return GT(t,e)}function GT(t,e,n,r){bo()||Ne(!1);let{navigator:s}=L.useContext(qr),{matches:i}=L.useContext(mr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=No(),p;if(e){var m;let j=typeof e=="string"?Kr(e):e;u==="/"||(m=j.pathname)!=null&&m.startsWith(u)||Ne(!1),p=j}else p=d;let g=p.pathname||"/",T=g;if(u!=="/"){let j=u.replace(/^\//,"").split("/");T="/"+g.replace(/^\//,"").split("/").slice(j.length).join("/")}let b=_T(t,{pathname:T}),N=XT(b&&b.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:nr([u,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?u:nr([u,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,n,r);return e&&N?L.createElement(ru.Provider,{value:{location:ho({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Gn.Pop}},N):N}function KT(){let t=tI(),e=FT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const qT=L.createElement(KT,null);class QT extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(mr.Provider,{value:this.props.routeContext},L.createElement(Lv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YT(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext($h);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(mr.Provider,{value:e},r)}function XT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Ne(!1),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:g,errors:T}=n,b=m.route.loader&&g[m.route.id]===void 0&&(!T||T[m.route.id]===void 0);if(m.route.lazy||b){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,m,g)=>{let T,b=!1,N=null,j=null;n&&(T=l&&m.route.id?l[m.route.id]:void 0,N=m.route.errorElement||qT,u&&(d<0&&g===0?(b=!0,j=null):d===g&&(b=!0,j=m.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),_=()=>{let I;return T?I=N:b?I=j:m.route.Component?I=L.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=p,L.createElement(YT,{match:m,routeContext:{outlet:p,matches:E,isDataRoute:n!=null},children:I})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?L.createElement(QT,{location:n.location,revalidation:n.revalidation,component:N,error:T,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var Vv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Vv||{}),Tl=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tl||{});function JT(t){let e=L.useContext($h);return e||Ne(!1),e}function ZT(t){let e=L.useContext(BT);return e||Ne(!1),e}function eI(t){let e=L.useContext(mr);return e||Ne(!1),e}function Fv(t){let e=eI(),n=e.matches[e.matches.length-1];return n.route.id||Ne(!1),n.route.id}function tI(){var t;let e=L.useContext(Lv),n=ZT(Tl.UseRouteError),r=Fv(Tl.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nI(){let{router:t}=JT(Vv.UseNavigateStable),e=Fv(Tl.UseNavigateStable),n=L.useRef(!1);return Dv(()=>{n.current=!0}),L.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ho({fromRouteId:e},i)))},[t,e])}function rI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ht(t){Ne(!1)}function sI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Gn.Pop,navigator:i,static:o=!1,future:l}=t;bo()&&Ne(!1);let u=e.replace(/^\/*/,"/"),d=L.useMemo(()=>({basename:u,navigator:i,static:o,future:ho({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=Kr(r));let{pathname:p="/",search:m="",hash:g="",state:T=null,key:b="default"}=r,N=L.useMemo(()=>{let j=zh(p,u);return j==null?null:{location:{pathname:j,search:m,hash:g,state:T,key:b},navigationType:s}},[u,p,m,g,T,b,s]);return N==null?null:L.createElement(qr.Provider,{value:d},L.createElement(ru.Provider,{children:n,value:N}))}function iI(t){let{children:e,location:n}=t;return WT(Ed(e),n)}new Promise(()=>{});function Ed(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,Ed(r.props.children,i));return}r.type!==Ht&&Ne(!1),!r.props.index||!r.props.children||Ne(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ed(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(this,arguments)}function oI(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function aI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lI(t,e){return t.button===0&&(!e||e==="_self")&&!aI(t)}const uI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cI="6";try{window.__reactRouterVersion=cI}catch{}const dI="startTransition",Qm=sw[dI];function hI(t){let{basename:e,children:n,future:r,window:s}=t,i=L.useRef();i.current==null&&(i.current=gT({window:s,v5Compat:!0}));let o=i.current,[l,u]=L.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},p=L.useCallback(m=>{d&&Qm?Qm(()=>u(m)):u(m)},[u,d]);return L.useLayoutEffect(()=>o.listen(p),[o,p]),L.useEffect(()=>rI(r),[r]),L.createElement(sI,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const fI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=L.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:p,viewTransition:m}=e,g=oI(e,uI),{basename:T}=L.useContext(qr),b,N=!1;if(typeof d=="string"&&pI.test(d)&&(b=d,fI))try{let I=new URL(window.location.href),D=d.startsWith("//")?new URL(I.protocol+d):new URL(d),S=zh(D.pathname,T);D.origin===I.origin&&S!=null?d=S+D.search+D.hash:N=!0}catch{}let j=zT(d,{relative:s}),E=mI(d,{replace:o,state:l,target:u,preventScrollReset:p,relative:s,viewTransition:m});function _(I){r&&r(I),I.defaultPrevented||E(I)}return L.createElement("a",Td({},g,{href:b||j,onClick:N||i?r:_,ref:n,target:u}))});var Ym;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ym||(Ym={}));var Xm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xm||(Xm={}));function mI(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=$T(),d=No(),p=Mv(t,{relative:o});return L.useCallback(m=>{if(lI(m,n)){m.preventDefault();let g=r!==void 0?r:El(d)===El(p);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,p,r,s,n,t,i,o,l])}const Uv=L.createContext(void 0),Qr=()=>{const t=L.useContext(Uv);if(!t)throw new Error("useApp must be used within AppProvider");return t},gI=({children:t})=>{const[e,n]=L.useState(!1),[r,s]=L.useState("https://api.t-track.rivieraapps.com/api/"),[i,o]=L.useState(!1),[l,u]=L.useState("1234566789"),[d,p]=L.useState("1234566789"),[m,g]=L.useState("1234566789");L.useState("https://api.raceresult.com/345604/y"),L.useEffect(()=>{const b=window.matchMedia("(display-mode: standalone)").matches;o(b);const N=window.matchMedia("(prefers-color-scheme: dark)").matches;n(N),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js")},[]),L.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const T=()=>{n(!e)};return c.jsx(Uv.Provider,{value:{darkMode:e,toggleDarkMode:T,isPWA:i,apiUrl:r,liveApiKey:l,setLiveApiKey:u,historyApiKey:m,setHistoryApiKey:g,eventApiKey:d,setEventApiKey:p},children:t})};var Jm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,T=d&63;u||(T=64,o||(g=64)),r.push(n[p],n[m],n[g],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new vI;const g=i<<2|l>>4;if(r.push(g),d!==64){const T=l<<4&240|d>>2;if(r.push(T),m!==64){const b=d<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _I=function(t){const e=Bv(t);return zv.encodeByteArray(e,!0)},$v=function(t){return _I(t).replace(/\./g,"")},Hv=function(t){try{return zv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=()=>xI().__FIREBASE_DEFAULTS__,EI=()=>{if(typeof process>"u"||typeof Jm>"u")return;const t=Jm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hv(t[1]);return e&&JSON.parse(e)},su=()=>{try{return wI()||EI()||TI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},II=t=>{var e,n;return(n=(e=su())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Wv=()=>{var t;return(t=su())===null||t===void 0?void 0:t.config},Gv=t=>{var e;return(e=su())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function SI(){var t;const e=(t=su())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CI(){const t=nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PI(){return!SI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jI(){try{return typeof indexedDB=="object"}catch{return!1}}function LI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="FirebaseError";class Nn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DI,Object.setPrototypeOf(this,Nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Co.prototype.create)}}class Co{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?OI(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Nn(s,l,r)}}function OI(t,e){return t.replace(MI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const MI=/\{\$([^}]+)}/g;function VI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Il(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Zm(i)&&Zm(o)){if(!Il(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Zm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ai(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Si(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FI(t,e){const n=new UI(t,e);return n.subscribe.bind(n)}class UI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=gc),s.error===void 0&&(s.error=gc),s.complete===void 0&&(s.complete=gc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class Fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HI(e))try{this.getOrInitializeService({instanceIdentifier:kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kr){return this.instances.has(e)}getOptions(e=kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$I(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kr){return this.component?this.component.multipleInstances?e:kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $I(t){return t===kr?void 0:t}function HI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const GI={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},KI=ne.INFO,qI={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},QI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=qI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hh{constructor(e){this.name=e,this._logLevel=KI,this._logHandler=QI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const YI=(t,e)=>e.some(n=>t instanceof n);let eg,tg;function XI(){return eg||(eg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JI(){return tg||(tg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kv=new WeakMap,Id=new WeakMap,qv=new WeakMap,yc=new WeakMap,Wh=new WeakMap;function ZI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(rr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Kv.set(n,t)}).catch(()=>{}),Wh.set(e,t),e}function e2(t){if(Id.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Id.set(t,e)}let kd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Id.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function t2(t){kd=t(kd)}function n2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vc(this),e,...n);return qv.set(r,e.sort?e.sort():[e]),rr(r)}:JI().includes(t)?function(...e){return t.apply(vc(this),e),rr(Kv.get(this))}:function(...e){return rr(t.apply(vc(this),e))}}function r2(t){return typeof t=="function"?n2(t):(t instanceof IDBTransaction&&e2(t),YI(t,XI())?new Proxy(t,kd):t)}function rr(t){if(t instanceof IDBRequest)return ZI(t);if(yc.has(t))return yc.get(t);const e=r2(t);return e!==t&&(yc.set(t,e),Wh.set(e,t)),e}const vc=t=>Wh.get(t);function s2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=rr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(rr(o.result),u.oldVersion,u.newVersion,rr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const i2=["get","getKey","getAll","getAllKeys","count"],o2=["put","add","delete","clear"],_c=new Map;function ng(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_c.get(e))return _c.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=o2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||i2.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return _c.set(e,i),i}t2(t=>({...t,get:(e,n,r)=>ng(e,n)||t.get(e,n,r),has:(e,n)=>!!ng(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(l2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function l2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ad="@firebase/app",rg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn=new Hh("@firebase/app"),u2="@firebase/app-compat",c2="@firebase/analytics-compat",d2="@firebase/analytics",h2="@firebase/app-check-compat",f2="@firebase/app-check",p2="@firebase/auth",m2="@firebase/auth-compat",g2="@firebase/database",y2="@firebase/data-connect",v2="@firebase/database-compat",_2="@firebase/functions",x2="@firebase/functions-compat",w2="@firebase/installations",E2="@firebase/installations-compat",T2="@firebase/messaging",I2="@firebase/messaging-compat",k2="@firebase/performance",A2="@firebase/performance-compat",S2="@firebase/remote-config",R2="@firebase/remote-config-compat",b2="@firebase/storage",N2="@firebase/storage-compat",C2="@firebase/firestore",P2="@firebase/vertexai-preview",j2="@firebase/firestore-compat",L2="firebase",D2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="[DEFAULT]",O2={[Ad]:"fire-core",[u2]:"fire-core-compat",[d2]:"fire-analytics",[c2]:"fire-analytics-compat",[f2]:"fire-app-check",[h2]:"fire-app-check-compat",[p2]:"fire-auth",[m2]:"fire-auth-compat",[g2]:"fire-rtdb",[y2]:"fire-data-connect",[v2]:"fire-rtdb-compat",[_2]:"fire-fn",[x2]:"fire-fn-compat",[w2]:"fire-iid",[E2]:"fire-iid-compat",[T2]:"fire-fcm",[I2]:"fire-fcm-compat",[k2]:"fire-perf",[A2]:"fire-perf-compat",[S2]:"fire-rc",[R2]:"fire-rc-compat",[b2]:"fire-gcs",[N2]:"fire-gcs-compat",[C2]:"fire-fst",[j2]:"fire-fst-compat",[P2]:"fire-vertex","fire-js":"fire-js",[L2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new Map,M2=new Map,Rd=new Map;function sg(t,e){try{t.container.addComponent(e)}catch(n){kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ms(t){const e=t.name;if(Rd.has(e))return kn.debug(`There were multiple attempts to register component ${e}.`),!1;Rd.set(e,t);for(const n of kl.values())sg(n,t);for(const n of M2.values())sg(n,t);return!0}function Qv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new Co("app","Firebase",V2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=D2;function Yv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw sr.create("bad-app-name",{appName:String(s)});if(n||(n=Wv()),!n)throw sr.create("no-options");const i=kl.get(s);if(i){if(Il(n,i.options)&&Il(r,i.config))return i;throw sr.create("duplicate-app",{appName:s})}const o=new WI(s);for(const u of Rd.values())o.addComponent(u);const l=new F2(n,r,o);return kl.set(s,l),l}function U2(t=Sd){const e=kl.get(t);if(!e&&t===Sd&&Wv())return Yv();if(!e)throw sr.create("no-app",{appName:t});return e}function ir(t,e,n){var r;let s=(r=O2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kn.warn(l.join(" "));return}Ms(new Fr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="firebase-heartbeat-database",z2=1,fo="firebase-heartbeat-store";let xc=null;function Xv(){return xc||(xc=s2(B2,z2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fo)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),xc}async function $2(t){try{const n=(await Xv()).transaction(fo),r=await n.objectStore(fo).get(Jv(t));return await n.done,r}catch(e){if(e instanceof Nn)kn.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kn.warn(n.message)}}}async function ig(t,e){try{const r=(await Xv()).transaction(fo,"readwrite");await r.objectStore(fo).put(e,Jv(t)),await r.done}catch(n){if(n instanceof Nn)kn.warn(n.message);else{const r=sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kn.warn(r.message)}}}function Jv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=1024,W2=30*24*60*60*1e3;class G2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=og();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=W2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=og(),{heartbeatsToSend:r,unsentEntries:s}=K2(this._heartbeatsCache.heartbeats),i=$v(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return kn.warn(n),""}}}function og(){return new Date().toISOString().substring(0,10)}function K2(t,e=H2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ag(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ag(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class q2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jI()?LI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ig(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ig(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ag(t){return $v(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){Ms(new Fr("platform-logger",e=>new a2(e),"PRIVATE")),Ms(new Fr("heartbeat",e=>new G2(e),"PRIVATE")),ir(Ad,rg,t),ir(Ad,rg,"esm2017"),ir("fire-js","")}Q2("");function Gh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Zv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y2=Zv,e1=new Co("auth","Firebase",Zv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=new Hh("@firebase/auth");function X2(t,...e){Al.logLevel<=ne.WARN&&Al.warn(`Auth (${Ks}): ${t}`,...e)}function Ha(t,...e){Al.logLevel<=ne.ERROR&&Al.error(`Auth (${Ks}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t,...e){throw Kh(t,...e)}function Xt(t,...e){return Kh(t,...e)}function t1(t,e,n){const r=Object.assign(Object.assign({},Y2()),{[e]:n});return new Co("auth","Firebase",r).create(e,{appName:t.name})}function _n(t){return t1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return e1.create(t,...e)}function q(t,e,...n){if(!t)throw Kh(e,...n)}function mn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ha(e),new Error(e)}function An(t,e){t||mn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function J2(){return lg()==="http:"||lg()==="https:"}function lg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J2()||bI()||"connection"in navigator)?navigator.onLine:!0}function ek(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n){this.shortDelay=e,this.longDelay=n,An(n>e,"Short delay should be less than long delay!"),this.isMobile=AI()||NI()}get(){return Z2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t,e){An(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new jo(3e4,6e4);function gr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yr(t,e,n,r,s={}){return r1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Po(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return RI()||(d.referrerPolicy="no-referrer"),n1.fetch()(s1(t,t.config.apiHost,n,l),d)})}async function r1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tk),e);try{const s=new sk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ka(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ka(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ka(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ka(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw t1(t,p,d);zt(t,p)}}catch(s){if(s instanceof Nn)throw s;zt(t,"network-request-failed",{message:String(s)})}}async function Lo(t,e,n,r,s={}){const i=await yr(t,e,n,r,s);return"mfaPendingCredential"in i&&zt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function s1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?qh(t.config,s):`${t.config.apiScheme}://${s}`}function rk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xt(this.auth,"network-request-failed")),nk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ka(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Xt(t,e,r);return s.customData._tokenResponse=n,s}function ug(t){return t!==void 0&&t.enterprise!==void 0}class ik{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ok(t,e){return yr(t,"GET","/v2/recaptchaConfig",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,e){return yr(t,"POST","/v1/accounts:delete",e)}async function i1(t,e){return yr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lk(t,e=!1){const n=xt(t),r=await n.getIdToken(e),s=Qh(r);q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ui(wc(s.auth_time)),issuedAtTime:Ui(wc(s.iat)),expirationTime:Ui(wc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function wc(t){return Number(t)*1e3}function Qh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ha("JWT malformed, contained fewer than 3 sections"),null;try{const s=Hv(n);return s?JSON.parse(s):(Ha("Failed to decode base64 JWT payload"),null)}catch(s){return Ha("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cg(t){const e=Qh(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Nn&&uk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function uk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ui(this.lastLoginAt),this.creationTime=Ui(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await po(t,i1(n,{idToken:r}));q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?o1(i.providerUserInfo):[],l=hk(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Nd(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function dk(t){const e=xt(t);await Sl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function o1(t){return t.map(e=>{var{providerId:n}=e,r=Gh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){const n=await r1(t,{},async()=>{const r=Po({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=s1(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",n1.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pk(t,e){return yr(t,"POST","/v2/accounts:revokeToken",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");const n=cg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new As;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new As,this.toJSON())}_performRefresh(){return mn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Gh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ck(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Nd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await po(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lk(this,e)}reload(){return dk(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qt(this.auth.app))return Promise.reject(_n(this.auth));const e=await this.getIdToken();return await po(this,ak(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,T=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,j=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:I,emailVerified:D,isAnonymous:S,providerData:B,stsTokenManager:w}=n;q(I&&w,e,"internal-error");const v=As.fromJSON(this.name,w);q(typeof I=="string",e,"internal-error"),Dn(m,e.name),Dn(g,e.name),q(typeof D=="boolean",e,"internal-error"),q(typeof S=="boolean",e,"internal-error"),Dn(T,e.name),Dn(b,e.name),Dn(N,e.name),Dn(j,e.name),Dn(E,e.name),Dn(_,e.name);const x=new gn({uid:I,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:S,photoURL:b,phoneNumber:T,tenantId:N,stsTokenManager:v,createdAt:E,lastLoginAt:_});return B&&Array.isArray(B)&&(x.providerData=B.map(k=>Object.assign({},k))),j&&(x._redirectEventId=j),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new As;s.updateFromServerResponse(n);const i=new gn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Sl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?o1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new As;l.updateFromIdToken(r);const u=new gn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Nd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=new Map;function yn(t){An(t instanceof Function,"Expected a class definition");let e=dg.get(t);return e?(An(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}a1.type="NONE";const hg=a1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(t,e,n){return`firebase:${t}:${e}:${n}`}class Ss{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Wa(this.userKey,s.apiKey,i),this.fullPersistenceKey=Wa("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?gn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ss(yn(hg),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||yn(hg);const o=Wa(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const p=await d._get(o);if(p){const m=gn._fromJSON(e,p);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ss(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ss(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f1(e))return"Blackberry";if(p1(e))return"Webos";if(u1(e))return"Safari";if((e.includes("chrome/")||c1(e))&&!e.includes("edge/"))return"Chrome";if(h1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function l1(t=nt()){return/firefox\//i.test(t)}function u1(t=nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c1(t=nt()){return/crios\//i.test(t)}function d1(t=nt()){return/iemobile/i.test(t)}function h1(t=nt()){return/android/i.test(t)}function f1(t=nt()){return/blackberry/i.test(t)}function p1(t=nt()){return/webos/i.test(t)}function Yh(t=nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mk(t=nt()){var e;return Yh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gk(){return CI()&&document.documentMode===10}function m1(t=nt()){return Yh(t)||h1(t)||p1(t)||f1(t)||/windows phone/i.test(t)||d1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e=[]){let n;switch(t){case"Browser":n=fg(nt());break;case"Worker":n=`${fg(nt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ks}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e={}){return yr(t,"GET","/v2/passwordPolicy",gr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=6;class xk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_k,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pg(this),this.idTokenSubscription=new pg(this),this.beforeStateQueue=new yk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ss.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await i1(this,{idToken:e}),r=await gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ek()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qt(this.app))return Promise.reject(_n(this));const n=e?xt(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qt(this.app)?Promise.reject(_n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qt(this.app)?Promise.reject(_n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vk(this),n=new xk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Co("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yn(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await Ss.create(this,[yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&X2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yr(t){return xt(t)}class pg{constructor(e){this.auth=e,this.observer=null,this.addObserver=FI(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ek(t){iu=t}function y1(t){return iu.loadJS(t)}function Tk(){return iu.recaptchaEnterpriseScript}function Ik(){return iu.gapiScript}function kk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Ak="recaptcha-enterprise",Sk="NO_RECAPTCHA";class Rk{constructor(e){this.type=Ak,this.auth=Yr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{ok(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new ik(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;ug(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Sk)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&ug(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Tk();u.length!==0&&(u+=l),y1(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function mg(t,e,n,r=!1){const s=new Rk(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Cd(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await mg(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await mg(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t,e){const n=Qv(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Il(i,e??{}))return s;zt(s,"already-initialized")}return n.initialize({options:e})}function Nk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ck(t,e,n){const r=Yr(t);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=v1(e),{host:o,port:l}=Pk(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),jk()}function v1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Pk(t){const e=v1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:gg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:gg(o)}}}function gg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mn("not implemented")}_getIdTokenResponse(e){return mn("not implemented")}_linkToIdToken(e,n){return mn("not implemented")}_getReauthenticationResolver(e){return mn("not implemented")}}async function Lk(t,e){return yr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(t,e){return Lo(t,"POST","/v1/accounts:signInWithPassword",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(t,e){return Lo(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,e))}async function Mk(t,e){return Lo(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Xh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new mo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new mo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,n,"signInWithPassword",Dk);case"emailLink":return Ok(e,{email:this._email,oobCode:this._password});default:zt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,r,"signUpPassword",Lk);case"emailLink":return Mk(e,{idToken:n,email:this._email,oobCode:this._password});default:zt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e){return Lo(t,"POST","/v1/accounts:signInWithIdp",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="http://localhost";class Ur extends Xh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ur(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Gh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ur(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Rs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rs(e,n)}buildRequest(){const e={requestUri:Vk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Po(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Uk(t){const e=Ai(Si(t)).link,n=e?Ai(Si(e)).deep_link_id:null,r=Ai(Si(t)).deep_link_id;return(r?Ai(Si(r)).link:null)||r||n||e||t}class Jh{constructor(e){var n,r,s,i,o,l;const u=Ai(Si(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,m=Fk((s=u.mode)!==null&&s!==void 0?s:null);q(d&&p&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=p,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=Uk(e);try{return new Jh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.providerId=qs.PROVIDER_ID}static credential(e,n){return mo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jh.parseLink(n);return q(r,"argument-error"),mo._fromEmailAndCode(e,r.code,r.tenantId)}}qs.PROVIDER_ID="password";qs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends _1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Do{constructor(){super("facebook.com")}static credential(e){return Ur._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Un.credential(e.oauthAccessToken)}catch{return null}}}Un.FACEBOOK_SIGN_IN_METHOD="facebook.com";Un.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends Do{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ur._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bn.credential(n,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Do{constructor(){super("github.com")}static credential(e){return Ur._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zn.credential(e.oauthAccessToken)}catch{return null}}}zn.GITHUB_SIGN_IN_METHOD="github.com";zn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Do{constructor(){super("twitter.com")}static credential(e,n){return Ur._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $n.credential(n,r)}catch{return null}}}$n.TWITTER_SIGN_IN_METHOD="twitter.com";$n.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t,e){return Lo(t,"POST","/v1/accounts:signUp",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await gn._fromIdTokenResponse(e,r,s),o=yg(r);return new Br({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=yg(r);return new Br({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function yg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Nn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Rl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Rl(e,n,r,s)}}function x1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Rl._fromErrorAndOperation(t,i,e,r):i})}async function zk(t,e,n=!1){const r=await po(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Br._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k(t,e,n=!1){const{auth:r}=t;if(qt(r.app))return Promise.reject(_n(r));const s="reauthenticate";try{const i=await po(t,x1(r,s,e,t),n);q(i.idToken,r,"internal-error");const o=Qh(i.idToken);q(o,r,"internal-error");const{sub:l}=o;return q(t.uid===l,r,"user-mismatch"),Br._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&zt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(t,e,n=!1){if(qt(t.app))return Promise.reject(_n(t));const r="signIn",s=await x1(t,r,e),i=await Br._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Hk(t,e){return w1(Yr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t){const e=Yr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wk(t,e,n){if(qt(t.app))return Promise.reject(_n(t));const r=Yr(t),o=await Cd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bk).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&E1(t),u}),l=await Br._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Gk(t,e,n){return qt(t.app)?Promise.reject(_n(t)):Hk(xt(t),qs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&E1(t),r})}function Kk(t,e,n,r){return xt(t).onIdTokenChanged(e,n,r)}function qk(t,e,n){return xt(t).beforeAuthStateChanged(e,n)}function Qk(t,e,n,r){return xt(t).onAuthStateChanged(e,n,r)}function Yk(t){return xt(t).signOut()}const bl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bl,"1"),this.storage.removeItem(bl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=1e3,Jk=10;class I1 extends T1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);gk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Jk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Xk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I1.type="LOCAL";const Zk=I1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1 extends T1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}k1.type="SESSION";const A1=k1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ou(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await eA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ou.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=Zh("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return window}function nA(t){Jt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(){return typeof Jt().WorkerGlobalScope<"u"&&typeof Jt().importScripts=="function"}async function rA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iA(){return S1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="firebaseLocalStorageDb",oA=1,Nl="firebaseLocalStorage",b1="fbase_key";class Oo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function au(t,e){return t.transaction([Nl],e?"readwrite":"readonly").objectStore(Nl)}function aA(){const t=indexedDB.deleteDatabase(R1);return new Oo(t).toPromise()}function Pd(){const t=indexedDB.open(R1,oA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nl,{keyPath:b1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nl)?e(r):(r.close(),await aA(),e(await Pd()))})})}async function vg(t,e,n){const r=au(t,!0).put({[b1]:e,value:n});return new Oo(r).toPromise()}async function lA(t,e){const n=au(t,!1).get(e),r=await new Oo(n).toPromise();return r===void 0?null:r.value}function _g(t,e){const n=au(t,!0).delete(e);return new Oo(n).toPromise()}const uA=800,cA=3;class N1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ou._getInstance(iA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rA(),!this.activeServiceWorker)return;this.sender=new tA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pd();return await vg(e,bl,"1"),await _g(e,bl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_g(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=au(s,!1).getAll();return new Oo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N1.type="LOCAL";const dA=N1;new jo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e){return e?yn(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Xh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fA(t){return w1(t.auth,new ef(t),t.bypassAuthState)}function pA(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),$k(n,new ef(t),t.bypassAuthState)}async function mA(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),zk(n,new ef(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fA;case"linkViaPopup":case"linkViaRedirect":return mA;case"reauthViaPopup":case"reauthViaRedirect":return pA;default:zt(this.auth,"internal-error")}}resolve(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=new jo(2e3,1e4);class _s extends C1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,_s.currentPopupAction&&_s.currentPopupAction.cancel(),_s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){An(this.filter.length===1,"Popup operations only handle one event");const e=Zh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gA.get())};e()}}_s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="pendingRedirect",Ga=new Map;class vA extends C1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ga.get(this.auth._key());if(!e){try{const r=await _A(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ga.set(this.auth._key(),e)}return this.bypassAuthState||Ga.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _A(t,e){const n=EA(e),r=wA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function xA(t,e){Ga.set(t._key(),e)}function wA(t){return yn(t._redirectPersistence)}function EA(t){return Wa(yA,t.config.apiKey,t.name)}async function TA(t,e,n=!1){if(qt(t.app))return Promise.reject(_n(t));const r=Yr(t),s=hA(r,e),o=await new vA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=10*60*1e3;class kA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!P1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IA&&this.cachedEventUids.clear(),this.cachedEventUids.has(xg(e))}saveEventToCache(e){this.cachedEventUids.add(xg(e)),this.lastProcessedEventTime=Date.now()}}function xg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function P1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return P1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e={}){return yr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bA=/^https?/;async function NA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SA(t);for(const n of e)try{if(CA(n))return}catch{}zt(t,"unauthorized-domain")}function CA(t){const e=bd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!bA.test(n))return!1;if(RA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=new jo(3e4,6e4);function wg(){const t=Jt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jA(t){return new Promise((e,n)=>{var r,s,i;function o(){wg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wg(),n(Xt(t,"network-request-failed"))},timeout:PA.get()})}if(!((s=(r=Jt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Jt().gapi)===null||i===void 0)&&i.load)o();else{const l=kk("iframefcb");return Jt()[l]=()=>{gapi.load?o():n(Xt(t,"network-request-failed"))},y1(`${Ik()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ka=null,e})}let Ka=null;function LA(t){return Ka=Ka||jA(t),Ka}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=new jo(5e3,15e3),OA="__/auth/iframe",MA="emulator/auth/iframe",VA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UA(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qh(e,MA):`https://${t.config.authDomain}/${OA}`,r={apiKey:e.apiKey,appName:t.name,v:Ks},s=FA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Po(r).slice(1)}`}async function BA(t){const e=await LA(t),n=Jt().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:UA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Xt(t,"network-request-failed"),l=Jt().setTimeout(()=>{i(o)},DA.get());function u(){Jt().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$A=500,HA=600,WA="_blank",GA="http://localhost";class Eg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KA(t,e,n,r=$A,s=HA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},zA),{width:r.toString(),height:s.toString(),top:i,left:o}),d=nt().toLowerCase();n&&(l=c1(d)?WA:n),l1(d)&&(e=e||GA,u.scrollbars="yes");const p=Object.entries(u).reduce((g,[T,b])=>`${g}${T}=${b},`,"");if(mk(d)&&l!=="_self")return qA(e||"",l),new Eg(null);const m=window.open(e||"",l,p);q(m,t,"popup-blocked");try{m.focus()}catch{}return new Eg(m)}function qA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="__/auth/handler",YA="emulator/auth/handler",XA=encodeURIComponent("fac");async function Tg(t,e,n,r,s,i){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ks,eventId:s};if(e instanceof _1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",VI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Do){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const u=await t._getAppCheckToken(),d=u?`#${XA}=${encodeURIComponent(u)}`:"";return`${JA(t)}?${Po(l).slice(1)}${d}`}function JA({config:t}){return t.emulator?qh(t,YA):`https://${t.authDomain}/${QA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec="webStorageSupport";class ZA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A1,this._completeRedirectFn=TA,this._overrideRedirectResult=xA}async _openPopup(e,n,r,s){var i;An((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Tg(e,n,r,bd(),s);return KA(e,o,Zh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Tg(e,n,r,bd(),s);return nA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(An(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BA(e),r=new kA(e);return n.register("authEvent",s=>(q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ec,{type:Ec},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ec];o!==void 0&&n(!!o),zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return m1()||u1()||Yh()}}const eS=ZA;var Ig="@firebase/auth",kg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rS(t){Ms(new Fr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g1(t)},d=new wk(r,s,i,u);return Nk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ms(new Fr("auth-internal",e=>{const n=Yr(e.getProvider("auth").getImmediate());return(r=>new tS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(Ig,kg,nS(t)),ir(Ig,kg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=5*60,iS=Gv("authIdTokenMaxAge")||sS;let Ag=null;const oS=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iS)return;const s=n==null?void 0:n.token;Ag!==s&&(Ag=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function aS(t=U2()){const e=Qv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bk(t,{popupRedirectResolver:eS,persistence:[dA,Zk,A1]}),r=Gv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=oS(i.toString());qk(n,o,()=>o(n.currentUser)),Kk(n,l=>o(l))}}const s=II("auth");return s&&Ck(n,`http://${s}`),n}function lS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ek({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Xt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",lS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rS("Browser");var Sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pr,j1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,v){function x(){}x.prototype=v.prototype,w.D=v.prototype,w.prototype=new x,w.prototype.constructor=w,w.C=function(k,R,C){for(var A=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)A[Ve-2]=arguments[Ve];return v.prototype[R].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,v,x){x||(x=0);var k=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)k[R]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(R=0;16>R;++R)k[R]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=w.g[0],x=w.g[1],R=w.g[2];var C=w.g[3],A=v+(C^x&(R^C))+k[0]+3614090360&4294967295;v=x+(A<<7&4294967295|A>>>25),A=C+(R^v&(x^R))+k[1]+3905402710&4294967295,C=v+(A<<12&4294967295|A>>>20),A=R+(x^C&(v^x))+k[2]+606105819&4294967295,R=C+(A<<17&4294967295|A>>>15),A=x+(v^R&(C^v))+k[3]+3250441966&4294967295,x=R+(A<<22&4294967295|A>>>10),A=v+(C^x&(R^C))+k[4]+4118548399&4294967295,v=x+(A<<7&4294967295|A>>>25),A=C+(R^v&(x^R))+k[5]+1200080426&4294967295,C=v+(A<<12&4294967295|A>>>20),A=R+(x^C&(v^x))+k[6]+2821735955&4294967295,R=C+(A<<17&4294967295|A>>>15),A=x+(v^R&(C^v))+k[7]+4249261313&4294967295,x=R+(A<<22&4294967295|A>>>10),A=v+(C^x&(R^C))+k[8]+1770035416&4294967295,v=x+(A<<7&4294967295|A>>>25),A=C+(R^v&(x^R))+k[9]+2336552879&4294967295,C=v+(A<<12&4294967295|A>>>20),A=R+(x^C&(v^x))+k[10]+4294925233&4294967295,R=C+(A<<17&4294967295|A>>>15),A=x+(v^R&(C^v))+k[11]+2304563134&4294967295,x=R+(A<<22&4294967295|A>>>10),A=v+(C^x&(R^C))+k[12]+1804603682&4294967295,v=x+(A<<7&4294967295|A>>>25),A=C+(R^v&(x^R))+k[13]+4254626195&4294967295,C=v+(A<<12&4294967295|A>>>20),A=R+(x^C&(v^x))+k[14]+2792965006&4294967295,R=C+(A<<17&4294967295|A>>>15),A=x+(v^R&(C^v))+k[15]+1236535329&4294967295,x=R+(A<<22&4294967295|A>>>10),A=v+(R^C&(x^R))+k[1]+4129170786&4294967295,v=x+(A<<5&4294967295|A>>>27),A=C+(x^R&(v^x))+k[6]+3225465664&4294967295,C=v+(A<<9&4294967295|A>>>23),A=R+(v^x&(C^v))+k[11]+643717713&4294967295,R=C+(A<<14&4294967295|A>>>18),A=x+(C^v&(R^C))+k[0]+3921069994&4294967295,x=R+(A<<20&4294967295|A>>>12),A=v+(R^C&(x^R))+k[5]+3593408605&4294967295,v=x+(A<<5&4294967295|A>>>27),A=C+(x^R&(v^x))+k[10]+38016083&4294967295,C=v+(A<<9&4294967295|A>>>23),A=R+(v^x&(C^v))+k[15]+3634488961&4294967295,R=C+(A<<14&4294967295|A>>>18),A=x+(C^v&(R^C))+k[4]+3889429448&4294967295,x=R+(A<<20&4294967295|A>>>12),A=v+(R^C&(x^R))+k[9]+568446438&4294967295,v=x+(A<<5&4294967295|A>>>27),A=C+(x^R&(v^x))+k[14]+3275163606&4294967295,C=v+(A<<9&4294967295|A>>>23),A=R+(v^x&(C^v))+k[3]+4107603335&4294967295,R=C+(A<<14&4294967295|A>>>18),A=x+(C^v&(R^C))+k[8]+1163531501&4294967295,x=R+(A<<20&4294967295|A>>>12),A=v+(R^C&(x^R))+k[13]+2850285829&4294967295,v=x+(A<<5&4294967295|A>>>27),A=C+(x^R&(v^x))+k[2]+4243563512&4294967295,C=v+(A<<9&4294967295|A>>>23),A=R+(v^x&(C^v))+k[7]+1735328473&4294967295,R=C+(A<<14&4294967295|A>>>18),A=x+(C^v&(R^C))+k[12]+2368359562&4294967295,x=R+(A<<20&4294967295|A>>>12),A=v+(x^R^C)+k[5]+4294588738&4294967295,v=x+(A<<4&4294967295|A>>>28),A=C+(v^x^R)+k[8]+2272392833&4294967295,C=v+(A<<11&4294967295|A>>>21),A=R+(C^v^x)+k[11]+1839030562&4294967295,R=C+(A<<16&4294967295|A>>>16),A=x+(R^C^v)+k[14]+4259657740&4294967295,x=R+(A<<23&4294967295|A>>>9),A=v+(x^R^C)+k[1]+2763975236&4294967295,v=x+(A<<4&4294967295|A>>>28),A=C+(v^x^R)+k[4]+1272893353&4294967295,C=v+(A<<11&4294967295|A>>>21),A=R+(C^v^x)+k[7]+4139469664&4294967295,R=C+(A<<16&4294967295|A>>>16),A=x+(R^C^v)+k[10]+3200236656&4294967295,x=R+(A<<23&4294967295|A>>>9),A=v+(x^R^C)+k[13]+681279174&4294967295,v=x+(A<<4&4294967295|A>>>28),A=C+(v^x^R)+k[0]+3936430074&4294967295,C=v+(A<<11&4294967295|A>>>21),A=R+(C^v^x)+k[3]+3572445317&4294967295,R=C+(A<<16&4294967295|A>>>16),A=x+(R^C^v)+k[6]+76029189&4294967295,x=R+(A<<23&4294967295|A>>>9),A=v+(x^R^C)+k[9]+3654602809&4294967295,v=x+(A<<4&4294967295|A>>>28),A=C+(v^x^R)+k[12]+3873151461&4294967295,C=v+(A<<11&4294967295|A>>>21),A=R+(C^v^x)+k[15]+530742520&4294967295,R=C+(A<<16&4294967295|A>>>16),A=x+(R^C^v)+k[2]+3299628645&4294967295,x=R+(A<<23&4294967295|A>>>9),A=v+(R^(x|~C))+k[0]+4096336452&4294967295,v=x+(A<<6&4294967295|A>>>26),A=C+(x^(v|~R))+k[7]+1126891415&4294967295,C=v+(A<<10&4294967295|A>>>22),A=R+(v^(C|~x))+k[14]+2878612391&4294967295,R=C+(A<<15&4294967295|A>>>17),A=x+(C^(R|~v))+k[5]+4237533241&4294967295,x=R+(A<<21&4294967295|A>>>11),A=v+(R^(x|~C))+k[12]+1700485571&4294967295,v=x+(A<<6&4294967295|A>>>26),A=C+(x^(v|~R))+k[3]+2399980690&4294967295,C=v+(A<<10&4294967295|A>>>22),A=R+(v^(C|~x))+k[10]+4293915773&4294967295,R=C+(A<<15&4294967295|A>>>17),A=x+(C^(R|~v))+k[1]+2240044497&4294967295,x=R+(A<<21&4294967295|A>>>11),A=v+(R^(x|~C))+k[8]+1873313359&4294967295,v=x+(A<<6&4294967295|A>>>26),A=C+(x^(v|~R))+k[15]+4264355552&4294967295,C=v+(A<<10&4294967295|A>>>22),A=R+(v^(C|~x))+k[6]+2734768916&4294967295,R=C+(A<<15&4294967295|A>>>17),A=x+(C^(R|~v))+k[13]+1309151649&4294967295,x=R+(A<<21&4294967295|A>>>11),A=v+(R^(x|~C))+k[4]+4149444226&4294967295,v=x+(A<<6&4294967295|A>>>26),A=C+(x^(v|~R))+k[11]+3174756917&4294967295,C=v+(A<<10&4294967295|A>>>22),A=R+(v^(C|~x))+k[2]+718787259&4294967295,R=C+(A<<15&4294967295|A>>>17),A=x+(C^(R|~v))+k[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var x=v-this.blockSize,k=this.B,R=this.h,C=0;C<v;){if(R==0)for(;C<=x;)s(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(k[R++]=w.charCodeAt(C++),R==this.blockSize){s(this,k),R=0;break}}else for(;C<v;)if(k[R++]=w[C++],R==this.blockSize){s(this,k),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var x=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=x&255,x/=256;for(this.u(w),w=Array(16),v=x=0;4>v;++v)for(var k=0;32>k;k+=8)w[x++]=this.g[v]>>>k&255;return w};function i(w,v){var x=l;return Object.prototype.hasOwnProperty.call(x,w)?x[w]:x[w]=v(w)}function o(w,v){this.h=v;for(var x=[],k=!0,R=w.length-1;0<=R;R--){var C=w[R]|0;k&&C==v||(x[R]=C,k=!1)}this.g=x}var l={};function u(w){return-128<=w&&128>w?i(w,function(v){return new o([v|0],0>v?-1:0)}):new o([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return j(d(-w));for(var v=[],x=1,k=0;w>=x;k++)v[k]=w/x|0,x*=4294967296;return new o(v,0)}function p(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return j(p(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=d(Math.pow(v,8)),k=m,R=0;R<w.length;R+=8){var C=Math.min(8,w.length-R),A=parseInt(w.substring(R,R+C),v);8>C?(C=d(Math.pow(v,C)),k=k.j(C).add(d(A))):(k=k.j(x),k=k.add(d(A)))}return k}var m=u(0),g=u(1),T=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-j(this).m();for(var w=0,v=1,x=0;x<this.g.length;x++){var k=this.i(x);w+=(0<=k?k:4294967296+k)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(b(this))return"0";if(N(this))return"-"+j(this).toString(w);for(var v=d(Math.pow(w,6)),x=this,k="";;){var R=D(x,v).g;x=E(x,R.j(v));var C=((0<x.g.length?x.g[0]:x.h)>>>0).toString(w);if(x=R,b(x))return C+k;for(;6>C.length;)C="0"+C;k=C+k}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function b(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=E(this,w),N(w)?-1:b(w)?0:1};function j(w){for(var v=w.g.length,x=[],k=0;k<v;k++)x[k]=~w.g[k];return new o(x,~w.h).add(g)}t.abs=function(){return N(this)?j(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],k=0,R=0;R<=v;R++){var C=k+(this.i(R)&65535)+(w.i(R)&65535),A=(C>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);k=A>>>16,C&=65535,A&=65535,x[R]=A<<16|C}return new o(x,x[x.length-1]&-2147483648?-1:0)};function E(w,v){return w.add(j(v))}t.j=function(w){if(b(this)||b(w))return m;if(N(this))return N(w)?j(this).j(j(w)):j(j(this).j(w));if(N(w))return j(this.j(j(w)));if(0>this.l(T)&&0>w.l(T))return d(this.m()*w.m());for(var v=this.g.length+w.g.length,x=[],k=0;k<2*v;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<w.g.length;R++){var C=this.i(k)>>>16,A=this.i(k)&65535,Ve=w.i(R)>>>16,rn=w.i(R)&65535;x[2*k+2*R]+=A*rn,_(x,2*k+2*R),x[2*k+2*R+1]+=C*rn,_(x,2*k+2*R+1),x[2*k+2*R+1]+=A*Ve,_(x,2*k+2*R+1),x[2*k+2*R+2]+=C*Ve,_(x,2*k+2*R+2)}for(k=0;k<v;k++)x[k]=x[2*k+1]<<16|x[2*k];for(k=v;k<2*v;k++)x[k]=0;return new o(x,0)};function _(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function I(w,v){this.g=w,this.h=v}function D(w,v){if(b(v))throw Error("division by zero");if(b(w))return new I(m,m);if(N(w))return v=D(j(w),v),new I(j(v.g),j(v.h));if(N(v))return v=D(w,j(v)),new I(j(v.g),v.h);if(30<w.g.length){if(N(w)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var x=g,k=v;0>=k.l(w);)x=S(x),k=S(k);var R=B(x,1),C=B(k,1);for(k=B(k,2),x=B(x,2);!b(k);){var A=C.add(k);0>=A.l(w)&&(R=R.add(x),C=A),k=B(k,1),x=B(x,1)}return v=E(w,R.j(v)),new I(R,v)}for(R=m;0<=w.l(v);){for(x=Math.max(1,Math.floor(w.m()/v.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),C=d(x),A=C.j(v);N(A)||0<A.l(w);)x-=k,C=d(x),A=C.j(v);b(C)&&(C=g),R=R.add(C),w=E(w,A)}return new I(R,w)}t.A=function(w){return D(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],k=0;k<v;k++)x[k]=this.i(k)&w.i(k);return new o(x,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],k=0;k<v;k++)x[k]=this.i(k)|w.i(k);return new o(x,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),x=[],k=0;k<v;k++)x[k]=this.i(k)^w.i(k);return new o(x,this.h^w.h)};function S(w){for(var v=w.g.length+1,x=[],k=0;k<v;k++)x[k]=w.i(k)<<1|w.i(k-1)>>>31;return new o(x,w.h)}function B(w,v){var x=v>>5;v%=32;for(var k=w.g.length-x,R=[],C=0;C<k;C++)R[C]=0<v?w.i(C+x)>>>v|w.i(C+x+1)<<32-v:w.i(C+x);return new o(R,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,j1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Pr=o}).apply(typeof Sg<"u"?Sg:typeof self<"u"?self:typeof window<"u"?window:{});var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L1,Ri,D1,qa,jd,O1,M1,V1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Aa=="object"&&Aa];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var P=a[y];if(!(P in f))break e;f=f[P]}a=a[a.length-1],y=f[a],h=h(y),h!=y&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,y=!1,P={next:function(){if(!y&&f<a.length){var O=f++;return{value:h(O,a[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function p(a,h,f){return a.call.apply(a.bind,arguments)}function m(a,h,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),a.apply(h,P)}}return function(){return a.apply(h,arguments)}}function g(a,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function T(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function b(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,P,O){for(var z=Array(arguments.length-2),de=2;de<arguments.length;de++)z[de-2]=arguments[de];return h.prototype[P].apply(y,z)}}function N(a){const h=a.length;if(0<h){const f=Array(h);for(let y=0;y<h;y++)f[y]=a[y];return f}return[]}function j(a,h){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(u(y)){const P=a.length||0,O=y.length||0;a.length=P+O;for(let z=0;z<O;z++)a[P+z]=y[z]}else a.push(y)}}class E{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var S=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function B(a,h,f){for(const y in a)h.call(f,a[y],y,a)}function w(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function v(a){const h={};for(const f in a)h[f]=a[f];return h}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,h){let f,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(f in y)a[f]=y[f];for(let O=0;O<x.length;O++)f=x[O],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function R(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function C(a){l.setTimeout(()=>{throw a},0)}function A(){var a=Q;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class Ve{constructor(){this.h=this.g=null}add(h,f){const y=rn.get();y.set(h,f),this.h?this.h.next=y:this.g=y,this.h=y}}var rn=new E(()=>new vr,a=>a.reset());class vr{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Pt,$=!1,Q=new Ve,M=()=>{const a=l.Promise.resolve(void 0);Pt=()=>{a.then(Z)}};var Z=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(f){C(f)}var h=rn;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var sn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return a}();function on(a,h){if(ye.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(S){e:{try{D(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:an[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&on.aa.h.call(this)}}b(on,ye);var an={2:"touch",3:"pen",4:"mouse"};on.prototype.h=function(){on.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ln="closure_listenable_"+(1e6*Math.random()|0),cx=0;function dx(a,h,f,y,P){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!y,this.ha=P,this.key=++cx,this.da=this.fa=!1}function Ho(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Wo(a){this.src=a,this.g={},this.h=0}Wo.prototype.add=function(a,h,f,y,P){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var z=wu(a,h,y,P);return-1<z?(h=a[z],f||(h.fa=!1)):(h=new dx(h,this.src,O,!!y,P),h.fa=f,a.push(h)),h};function xu(a,h){var f=h.type;if(f in a.g){var y=a.g[f],P=Array.prototype.indexOf.call(y,h,void 0),O;(O=0<=P)&&Array.prototype.splice.call(y,P,1),O&&(Ho(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function wu(a,h,f,y){for(var P=0;P<a.length;++P){var O=a[P];if(!O.da&&O.listener==h&&O.capture==!!f&&O.ha==y)return P}return-1}var Eu="closure_lm_"+(1e6*Math.random()|0),Tu={};function Of(a,h,f,y,P){if(Array.isArray(h)){for(var O=0;O<h.length;O++)Of(a,h[O],f,y,P);return null}return f=Ff(f),a&&a[ln]?a.K(h,f,d(y)?!!y.capture:!!y,P):hx(a,h,f,!1,y,P)}function hx(a,h,f,y,P,O){if(!h)throw Error("Invalid event type");var z=d(P)?!!P.capture:!!P,de=ku(a);if(de||(a[Eu]=de=new Wo(a)),f=de.add(h,f,y,z,O),f.proxy)return f;if(y=fx(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)sn||(P=z),P===void 0&&(P=!1),a.addEventListener(h.toString(),y,P);else if(a.attachEvent)a.attachEvent(Vf(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function fx(){function a(f){return h.call(a.src,a.listener,f)}const h=px;return a}function Mf(a,h,f,y,P){if(Array.isArray(h))for(var O=0;O<h.length;O++)Mf(a,h[O],f,y,P);else y=d(y)?!!y.capture:!!y,f=Ff(f),a&&a[ln]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],f=wu(O,f,y,P),-1<f&&(Ho(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=ku(a))&&(h=a.g[h.toString()],a=-1,h&&(a=wu(h,f,y,P)),(f=-1<a?h[a]:null)&&Iu(f))}function Iu(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[ln])xu(h.i,a);else{var f=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(f,y,a.capture):h.detachEvent?h.detachEvent(Vf(f),y):h.addListener&&h.removeListener&&h.removeListener(y),(f=ku(h))?(xu(f,a),f.h==0&&(f.src=null,h[Eu]=null)):Ho(a)}}}function Vf(a){return a in Tu?Tu[a]:Tu[a]="on"+a}function px(a,h){if(a.da)a=!0;else{h=new on(h,this);var f=a.listener,y=a.ha||a.src;a.fa&&Iu(a),a=f.call(y,h)}return a}function ku(a){return a=a[Eu],a instanceof Wo?a:null}var Au="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ff(a){return typeof a=="function"?a:(a[Au]||(a[Au]=function(h){return a.handleEvent(h)}),a[Au])}function Ke(){le.call(this),this.i=new Wo(this),this.M=this,this.F=null}b(Ke,le),Ke.prototype[ln]=!0,Ke.prototype.removeEventListener=function(a,h,f,y){Mf(this,a,h,f,y)};function rt(a,h){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new ye(h,a);else if(h instanceof ye)h.target=h.target||a;else{var P=h;h=new ye(y,a),k(h,P)}if(P=!0,f)for(var O=f.length-1;0<=O;O--){var z=h.g=f[O];P=Go(z,y,!0,h)&&P}if(z=h.g=a,P=Go(z,y,!0,h)&&P,P=Go(z,y,!1,h)&&P,f)for(O=0;O<f.length;O++)z=h.g=f[O],P=Go(z,y,!1,h)&&P}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],y=0;y<f.length;y++)Ho(f[y]);delete a.g[h],a.h--}}this.F=null},Ke.prototype.K=function(a,h,f,y){return this.i.add(String(a),h,!1,f,y)},Ke.prototype.L=function(a,h,f,y){return this.i.add(String(a),h,!0,f,y)};function Go(a,h,f,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,O=0;O<h.length;++O){var z=h[O];if(z&&!z.da&&z.capture==f){var de=z.listener,Fe=z.ha||z.src;z.fa&&xu(a.i,z),P=de.call(Fe,y)!==!1&&P}}return P&&!y.defaultPrevented}function Uf(a,h,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Bf(a){a.g=Uf(()=>{a.g=null,a.i&&(a.i=!1,Bf(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class mx extends le{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Bf(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ei(a){le.call(this),this.h=a,this.g={}}b(ei,le);var zf=[];function $f(a){B(a.g,function(h,f){this.g.hasOwnProperty(f)&&Iu(h)},a),a.g={}}ei.prototype.N=function(){ei.aa.N.call(this),$f(this)},ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Su=l.JSON.stringify,gx=l.JSON.parse,yx=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Ru(){}Ru.prototype.h=null;function Hf(a){return a.h||(a.h=a.i())}function Wf(){}var ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bu(){ye.call(this,"d")}b(bu,ye);function Nu(){ye.call(this,"c")}b(Nu,ye);var _r={},Gf=null;function Ko(){return Gf=Gf||new Ke}_r.La="serverreachability";function Kf(a){ye.call(this,_r.La,a)}b(Kf,ye);function ni(a){const h=Ko();rt(h,new Kf(h))}_r.STAT_EVENT="statevent";function qf(a,h){ye.call(this,_r.STAT_EVENT,a),this.stat=h}b(qf,ye);function st(a){const h=Ko();rt(h,new qf(h,a))}_r.Ma="timingevent";function Qf(a,h){ye.call(this,_r.Ma,a),this.size=h}b(Qf,ye);function ri(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function si(){this.g=!0}si.prototype.xa=function(){this.g=!1};function vx(a,h,f,y,P,O){a.info(function(){if(a.g)if(O)for(var z="",de=O.split("&"),Fe=0;Fe<de.length;Fe++){var oe=de[Fe].split("=");if(1<oe.length){var qe=oe[0];oe=oe[1];var Qe=qe.split("_");z=2<=Qe.length&&Qe[1]=="type"?z+(qe+"="+oe+"&"):z+(qe+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+h+`
`+f+`
`+z})}function _x(a,h,f,y,P,O,z){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+h+`
`+f+`
`+O+" "+z})}function Zr(a,h,f,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+wx(a,f)+(y?" "+y:"")})}function xx(a,h){a.info(function(){return"TIMEOUT: "+h})}si.prototype.info=function(){};function wx(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var O=P[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<P.length;z++)P[z]=""}}}}return Su(f)}catch{return h}}var qo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cu;function Qo(){}b(Qo,Ru),Qo.prototype.g=function(){return new XMLHttpRequest},Qo.prototype.i=function(){return{}},Cu=new Qo;function Cn(a,h,f,y){this.j=a,this.i=h,this.l=f,this.R=y||1,this.U=new ei(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xf}function Xf(){this.i=null,this.g="",this.h=!1}var Jf={},Pu={};function ju(a,h,f){a.L=1,a.v=Zo(un(h)),a.m=f,a.P=!0,Zf(a,null)}function Zf(a,h){a.F=Date.now(),Yo(a),a.A=un(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),fp(f.i,"t",y),a.C=0,f=a.j.J,a.h=new Xf,a.g=Cp(a.j,f?h:null,!a.m),0<a.O&&(a.M=new mx(g(a.Y,a,a.g),a.O)),h=a.U,f=a.g,y=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(zf[0]=P.toString()),P=zf);for(var O=0;O<P.length;O++){var z=Of(f,P[O],y||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),ni(),vx(a.i,a.u,a.A,a.l,a.R,a.m)}Cn.prototype.ca=function(a){a=a.target;const h=this.M;h&&cn(a)==3?h.j():this.Y(a)},Cn.prototype.Y=function(a){try{if(a==this.g)e:{const Qe=cn(this.g);var h=this.g.Ba();const ns=this.g.Z();if(!(3>Qe)&&(Qe!=3||this.g&&(this.h.h||this.g.oa()||xp(this.g)))){this.J||Qe!=4||h==7||(h==8||0>=ns?ni(3):ni(2)),Lu(this);var f=this.g.Z();this.X=f;t:if(ep(this)){var y=xp(this.g);a="";var P=y.length,O=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xr(this),ii(this);var z="";break t}this.h.i=new l.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(O&&h==P-1)});y.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,_x(this.i,this.u,this.A,this.l,this.R,Qe,f),this.o){if(this.T&&!this.K){t:{if(this.g){var de,Fe=this.g;if((de=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(de)){var oe=de;break t}}oe=null}if(f=oe)Zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Du(this,f);else{this.o=!1,this.s=3,st(12),xr(this),ii(this);break e}}if(this.P){f=!0;let jt;for(;!this.J&&this.C<z.length;)if(jt=Ex(this,z),jt==Pu){Qe==4&&(this.s=4,st(14),f=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Jf){this.s=4,st(15),Zr(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Zr(this.i,this.l,jt,null),Du(this,jt);if(ep(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||z.length!=0||this.h.h||(this.s=1,st(16),f=!1),this.o=this.o&&f,!f)Zr(this.i,this.l,z,"[Invalid Chunked Response]"),xr(this),ii(this);else if(0<z.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Bu(qe),qe.M=!0,st(11))}}else Zr(this.i,this.l,z,null),Du(this,z);Qe==4&&xr(this),this.o&&!this.J&&(Qe==4?Sp(this.j,this):(this.o=!1,Yo(this)))}else Fx(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),xr(this),ii(this)}}}catch{}finally{}};function ep(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Ex(a,h){var f=a.C,y=h.indexOf(`
`,f);return y==-1?Pu:(f=Number(h.substring(f,y)),isNaN(f)?Jf:(y+=1,y+f>h.length?Pu:(h=h.slice(y,y+f),a.C=y+f,h)))}Cn.prototype.cancel=function(){this.J=!0,xr(this)};function Yo(a){a.S=Date.now()+a.I,tp(a,a.I)}function tp(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ri(g(a.ba,a),h)}function Lu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Cn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(xx(this.i,this.A),this.L!=2&&(ni(),st(17)),xr(this),this.s=2,ii(this)):tp(this,this.S-a)};function ii(a){a.j.G==0||a.J||Sp(a.j,a)}function xr(a){Lu(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,$f(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Du(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Ou(f.h,a))){if(!a.K&&Ou(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ia(f),ra(f);else break e;Uu(f),st(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=ri(g(f.Za,f),6e3));if(1>=sp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Er(f,11)}else if((a.K||f.g==a)&&ia(f),!_(h))for(P=f.Da.g.parse(h),h=0;h<P.length;h++){let oe=P[h];if(f.T=oe[0],oe=oe[1],f.G==2)if(oe[0]=="c"){f.K=oe[1],f.ia=oe[2];const qe=oe[3];qe!=null&&(f.la=qe,f.j.info("VER="+f.la));const Qe=oe[4];Qe!=null&&(f.Aa=Qe,f.j.info("SVER="+f.Aa));const ns=oe[5];ns!=null&&typeof ns=="number"&&0<ns&&(y=1.5*ns,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const jt=a.g;if(jt){const aa=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(aa){var O=y.h;O.g||aa.indexOf("spdy")==-1&&aa.indexOf("quic")==-1&&aa.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Mu(O,O.h),O.h=null))}if(y.D){const zu=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;zu&&(y.ya=zu,fe(y.I,y.D,zu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var z=a;if(y.qa=Np(y,y.J?y.ia:null,y.W),z.K){ip(y.h,z);var de=z,Fe=y.L;Fe&&(de.I=Fe),de.B&&(Lu(de),Yo(de)),y.g=z}else kp(y);0<f.i.length&&sa(f)}else oe[0]!="stop"&&oe[0]!="close"||Er(f,7);else f.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?Er(f,7):Fu(f):oe[0]!="noop"&&f.l&&f.l.ta(oe),f.v=0)}}ni(4)}catch{}}var Tx=class{constructor(a,h){this.g=a,this.map=h}};function np(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function sp(a){return a.h?1:a.g?a.g.size:0}function Ou(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Mu(a,h){a.g?a.g.add(h):a.h=h}function ip(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}np.prototype.cancel=function(){if(this.i=op(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function op(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return N(a.i)}function Ix(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],f=a.length,y=0;y<f;y++)h.push(a[y]);return h}h=[],f=0;for(y in a)h[f++]=a[y];return h}function kx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const y in a)h[f++]=y;return h}}}function ap(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=kx(a),y=Ix(a),P=y.length,O=0;O<P;O++)h.call(void 0,y[O],f&&f[O],a)}var lp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ax(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),P=null;if(0<=y){var O=a[f].substring(0,y);P=a[f].substring(y+1)}else O=a[f];h(O,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function wr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof wr){this.h=a.h,Xo(this,a.j),this.o=a.o,this.g=a.g,Jo(this,a.s),this.l=a.l;var h=a.i,f=new li;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),up(this,f),this.m=a.m}else a&&(h=String(a).match(lp))?(this.h=!1,Xo(this,h[1]||"",!0),this.o=oi(h[2]||""),this.g=oi(h[3]||"",!0),Jo(this,h[4]),this.l=oi(h[5]||"",!0),up(this,h[6]||"",!0),this.m=oi(h[7]||"")):(this.h=!1,this.i=new li(null,this.h))}wr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(ai(h,cp,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(ai(h,cp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ai(f,f.charAt(0)=="/"?bx:Rx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ai(f,Cx)),a.join("")};function un(a){return new wr(a)}function Xo(a,h,f){a.j=f?oi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Jo(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function up(a,h,f){h instanceof li?(a.i=h,Px(a.i,a.h)):(f||(h=ai(h,Nx)),a.i=new li(h,a.h))}function fe(a,h,f){a.i.set(h,f)}function Zo(a){return fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function oi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ai(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,Sx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Sx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var cp=/[#\/\?@]/g,Rx=/[#\?:]/g,bx=/[#\?]/g,Nx=/[#\?@]/g,Cx=/#/g;function li(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Pn(a){a.g||(a.g=new Map,a.h=0,a.i&&Ax(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=li.prototype,t.add=function(a,h){Pn(this),this.i=null,a=es(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function dp(a,h){Pn(a),h=es(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function hp(a,h){return Pn(a),h=es(a,h),a.g.has(h)}t.forEach=function(a,h){Pn(this),this.g.forEach(function(f,y){f.forEach(function(P){a.call(h,P,y,this)},this)},this)},t.na=function(){Pn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let y=0;y<h.length;y++){const P=a[y];for(let O=0;O<P.length;O++)f.push(h[y])}return f},t.V=function(a){Pn(this);let h=[];if(typeof a=="string")hp(this,a)&&(h=h.concat(this.g.get(es(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return Pn(this),this.i=null,a=es(this,a),hp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function fp(a,h,f){dp(a,h),0<f.length&&(a.i=null,a.g.set(es(a,h),N(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var y=h[f];const O=encodeURIComponent(String(y)),z=this.V(y);for(y=0;y<z.length;y++){var P=O;z[y]!==""&&(P+="="+encodeURIComponent(String(z[y]))),a.push(P)}}return this.i=a.join("&")};function es(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Px(a,h){h&&!a.j&&(Pn(a),a.i=null,a.g.forEach(function(f,y){var P=y.toLowerCase();y!=P&&(dp(this,y),fp(this,P,f))},a)),a.j=h}function jx(a,h){const f=new si;if(l.Image){const y=new Image;y.onload=T(jn,f,"TestLoadImage: loaded",!0,h,y),y.onerror=T(jn,f,"TestLoadImage: error",!1,h,y),y.onabort=T(jn,f,"TestLoadImage: abort",!1,h,y),y.ontimeout=T(jn,f,"TestLoadImage: timeout",!1,h,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function Lx(a,h){const f=new si,y=new AbortController,P=setTimeout(()=>{y.abort(),jn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(O=>{clearTimeout(P),O.ok?jn(f,"TestPingServer: ok",!0,h):jn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),jn(f,"TestPingServer: error",!1,h)})}function jn(a,h,f,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(f)}catch{}}function Dx(){this.g=new yx}function Ox(a,h,f){const y=f||"";try{ap(a,function(P,O){let z=P;d(P)&&(z=Su(P)),h.push(y+O+"="+encodeURIComponent(z))})}catch(P){throw h.push(y+"type="+encodeURIComponent("_badmap")),P}}function ea(a){this.l=a.Ub||null,this.j=a.eb||!1}b(ea,Ru),ea.prototype.g=function(){return new ta(this.l,this.j)},ea.prototype.i=function(a){return function(){return a}}({});function ta(a,h){Ke.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ta,Ke),t=ta.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ci(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function pp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ui(this):ci(this),this.readyState==3&&pp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ui(this))},t.Qa=function(a){this.g&&(this.response=a,ui(this))},t.ga=function(){this.g&&ui(this)};function ui(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ci(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function mp(a){let h="";return B(a,function(f,y){h+=y,h+=":",h+=f,h+=`\r
`}),h}function Vu(a,h,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=mp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):fe(a,h,f))}function Ee(a){Ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ee,Ke);var Mx=/^https?$/i,Vx=["POST","PUT"];t=Ee.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cu.g(),this.v=this.o?Hf(this.o):Hf(Cu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){gp(this,O);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)f.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())f.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),P=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Vx,h,void 0))||y||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of f)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_p(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){gp(this,O)}};function gp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,yp(a),na(a)}function yp(a){a.A||(a.A=!0,rt(a,"complete"),rt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,rt(this,"complete"),rt(this,"abort"),na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),na(this,!0)),Ee.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vp(this):this.bb())},t.bb=function(){vp(this)};function vp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||cn(a)!=4||a.Z()!=2)){if(a.u&&cn(a)==4)Uf(a.Ea,0,a);else if(rt(a,"readystatechange"),cn(a)==4){a.h=!1;try{const z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var y;if(y=z===0){var P=String(a.D).match(lp)[1]||null;!P&&l.self&&l.self.location&&(P=l.self.location.protocol.slice(0,-1)),y=!Mx.test(P?P.toLowerCase():"")}f=y}if(f)rt(a,"complete"),rt(a,"success");else{a.m=6;try{var O=2<cn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",yp(a)}}finally{na(a)}}}}function na(a,h){if(a.g){_p(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||rt(a,"ready");try{f.onreadystatechange=y}catch{}}}function _p(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function cn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),gx(h)}};function xp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Fx(a){const h={};a=(a.g&&2<=cn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var f=R(a[y]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=h[P]||[];h[P]=O,O.push(f)}w(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function di(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function wp(a){this.Aa=0,this.i=[],this.j=new si,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=di("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=di("baseRetryDelayMs",5e3,a),this.cb=di("retryDelaySeedMs",1e4,a),this.Wa=di("forwardChannelMaxRetries",2,a),this.wa=di("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new np(a&&a.concurrentRequestLimit),this.Da=new Dx,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wp.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,y){st(0),this.W=a,this.H=h||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=Np(this,null,this.W),sa(this)};function Fu(a){if(Ep(a),a.G==3){var h=a.U++,f=un(a.I);if(fe(f,"SID",a.K),fe(f,"RID",h),fe(f,"TYPE","terminate"),hi(a,f),h=new Cn(a,a.j,h),h.L=2,h.v=Zo(un(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=Cp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Yo(h)}bp(a)}function ra(a){a.g&&(Bu(a),a.g.cancel(),a.g=null)}function Ep(a){ra(a),a.u&&(l.clearTimeout(a.u),a.u=null),ia(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function sa(a){if(!rp(a.h)&&!a.s){a.s=!0;var h=a.Ga;Pt||M(),$||(Pt(),$=!0),Q.add(h,a),a.B=0}}function Ux(a,h){return sp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ri(g(a.Ga,a,h),Rp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const P=new Cn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=v(O),k(O,this.S)):O=this.S),this.m!==null||this.O||(P.H=O,O=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Ip(this,P,h),f=un(this.I),fe(f,"RID",a),fe(f,"CVER",22),this.D&&fe(f,"X-HTTP-Session-Id",this.D),hi(this,f),O&&(this.O?h="headers="+encodeURIComponent(String(mp(O)))+"&"+h:this.m&&Vu(f,this.m,O)),Mu(this.h,P),this.Ua&&fe(f,"TYPE","init"),this.P?(fe(f,"$req",h),fe(f,"SID","null"),P.T=!0,ju(P,f,null)):ju(P,f,h),this.G=2}}else this.G==3&&(a?Tp(this,a):this.i.length==0||rp(this.h)||Tp(this))};function Tp(a,h){var f;h?f=h.l:f=a.U++;const y=un(a.I);fe(y,"SID",a.K),fe(y,"RID",f),fe(y,"AID",a.T),hi(a,y),a.m&&a.o&&Vu(y,a.m,a.o),f=new Cn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Ip(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Mu(a.h,f),ju(f,y,h)}function hi(a,h){a.H&&B(a.H,function(f,y){fe(h,y,f)}),a.l&&ap({},function(f,y){fe(h,y,f)})}function Ip(a,h,f){f=Math.min(a.i.length,f);var y=a.l?g(a.l.Na,a.l,a):null;e:{var P=a.i;let O=-1;for(;;){const z=["count="+f];O==-1?0<f?(O=P[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let de=!0;for(let Fe=0;Fe<f;Fe++){let oe=P[Fe].g;const qe=P[Fe].map;if(oe-=O,0>oe)O=Math.max(0,P[Fe].g-100),de=!1;else try{Ox(qe,z,"req"+oe+"_")}catch{y&&y(qe)}}if(de){y=z.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,y}function kp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Pt||M(),$||(Pt(),$=!0),Q.add(h,a),a.v=0}}function Uu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ri(g(a.Fa,a),Rp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Ap(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ri(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),ra(this),Ap(this))};function Bu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Ap(a){a.g=new Cn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=un(a.qa);fe(h,"RID","rpc"),fe(h,"SID",a.K),fe(h,"AID",a.T),fe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&fe(h,"TO",a.ja),fe(h,"TYPE","xmlhttp"),hi(a,h),a.m&&a.o&&Vu(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Zo(un(h)),f.m=null,f.P=!0,Zf(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ra(this),Uu(this),st(19))};function ia(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Sp(a,h){var f=null;if(a.g==h){ia(a),Bu(a),a.g=null;var y=2}else if(Ou(a.h,h))f=h.D,ip(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var P=a.B;y=Ko(),rt(y,new Qf(y,f)),sa(a)}else kp(a);else if(P=h.s,P==3||P==0&&0<h.X||!(y==1&&Ux(a,h)||y==2&&Uu(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),P){case 1:Er(a,5);break;case 4:Er(a,10);break;case 3:Er(a,6);break;default:Er(a,2)}}}function Rp(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Er(a,h){if(a.j.info("Error code "+h),h==2){var f=g(a.fb,a),y=a.Xa;const P=!y;y=new wr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Xo(y,"https"),Zo(y),P?jx(y.toString(),f):Lx(y.toString(),f)}else st(2);a.G=0,a.l&&a.l.sa(h),bp(a),Ep(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function bp(a){if(a.G=0,a.ka=[],a.l){const h=op(a.h);(h.length!=0||a.i.length!=0)&&(j(a.ka,h),j(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Np(a,h,f){var y=f instanceof wr?un(f):new wr(f);if(y.g!="")h&&(y.g=h+"."+y.g),Jo(y,y.s);else{var P=l.location;y=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var O=new wr(null);y&&Xo(O,y),h&&(O.g=h),P&&Jo(O,P),f&&(O.l=f),y=O}return f=a.D,h=a.ya,f&&h&&fe(y,f,h),fe(y,"VER",a.la),hi(a,y),y}function Cp(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ee(new ea({eb:f})):new Ee(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pp(){}t=Pp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function oa(){}oa.prototype.g=function(a,h){return new mt(a,h)};function mt(a,h){Ke.call(this),this.g=new wp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!_(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ts(this)}b(mt,Ke),mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){Fu(this.g)},mt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Su(a),a=f);h.i.push(new Tx(h.Ya++,a)),h.G==3&&sa(h)},mt.prototype.N=function(){this.g.l=null,delete this.j,Fu(this.g),delete this.g,mt.aa.N.call(this)};function jp(a){bu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}b(jp,bu);function Lp(){Nu.call(this),this.status=1}b(Lp,Nu);function ts(a){this.g=a}b(ts,Pp),ts.prototype.ua=function(){rt(this.g,"a")},ts.prototype.ta=function(a){rt(this.g,new jp(a))},ts.prototype.sa=function(a){rt(this.g,new Lp)},ts.prototype.ra=function(){rt(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,V1=function(){return new oa},M1=function(){return Ko()},O1=_r,jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qo.NO_ERROR=0,qo.TIMEOUT=8,qo.HTTP_ERROR=6,qa=qo,Yf.COMPLETE="complete",D1=Yf,Wf.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,Ri=Wf,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,L1=Ee}).apply(typeof Aa<"u"?Aa:typeof self<"u"?self:typeof window<"u"?window:{});const Rg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Hh("@firebase/firestore");function wi(){return zr.logLevel}function W(t,...e){if(zr.logLevel<=ne.DEBUG){const n=e.map(tf);zr.debug(`Firestore (${Qs}): ${t}`,...n)}}function Sn(t,...e){if(zr.logLevel<=ne.ERROR){const n=e.map(tf);zr.error(`Firestore (${Qs}): ${t}`,...n)}}function go(t,...e){if(zr.logLevel<=ne.WARN){const n=e.map(tf);zr.warn(`Firestore (${Qs}): ${t}`,...n)}}function tf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: `+t;throw Sn(e),new Error(e)}function ce(t,e){t||Y()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Nn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class dS{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new or,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new uS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new ut(e)}}class hS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ce(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new pS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=gS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function Vs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Le(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new Le(0,0))}static max(){return new X(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return yo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ie extends yo{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const yS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends yo{construct(e,n,r){return new ze(e,n,r)}static isValidIdentifier(e){return yS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ie.fromString(e))}static fromName(e){return new G(Ie.fromString(e).popFirst(5))}static empty(){return new G(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ie(e.slice()))}}function vS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new ur(s,G.empty(),e)}function _S(t){return new ur(t.readTime,t.key,-1)}class ur{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ur(X.min(),G.empty(),-1)}static max(){return new ur(X.max(),G.empty(),-1)}}function xS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ES{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==wS)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function TS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}nf.oe=-1;function lu(t){return t==null}function Cl(t){return t===0&&1/t==-1/0}function IS(t){return typeof t=="number"&&Number.isInteger(t)&&!Cl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ys(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function U1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){this.comparator=e,this.root=n||Be.EMPTY}insert(e,n){return new we(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new we(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sa(this.root,e,this.comparator,!0)}}class Sa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Be.RED,this.left=s??Be.EMPTY,this.right=i??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Be(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Be.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Be(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ng(this.data.getIterator())}getIteratorFrom(e){return new Ng(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class Ng{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new Vt([])}unionWith(e){let n=new He(ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new B1("Invalid base64 string: "+i):i}}(e);return new Ge(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ge(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const kS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(t){if(ce(!!t),typeof t=="string"){let e=0;const n=kS.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $r(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sf(t){const e=t.mapValue.fields.__previous_value__;return rf(e)?sf(e):e}function vo(t){const e=cr(t.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class _o{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new _o("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rf(t)?4:RS(t)?9007199254740991:SS(t)?10:11:Y()}function tn(t,e){if(t===e)return!0;const n=Hr(t);if(n!==Hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vo(t).isEqual(vo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=cr(s.timestampValue),l=cr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return $r(s.bytesValue).isEqual($r(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ae(s.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ae(s.integerValue)===Ae(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ae(s.doubleValue),l=Ae(i.doubleValue);return o===l?Cl(o)===Cl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Vs(t.arrayValue.values||[],e.arrayValue.values||[],tn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(bg(o)!==bg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!tn(o[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function xo(t,e){return(t.values||[]).find(n=>tn(n,e))!==void 0}function Fs(t,e){if(t===e)return 0;const n=Hr(t),r=Hr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ae(i.integerValue||i.doubleValue),u=Ae(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Cg(t.timestampValue,e.timestampValue);case 4:return Cg(vo(t),vo(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(i,o){const l=$r(i),u=$r(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=ae(l[d],u[d]);if(p!==0)return p}return ae(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ae(Ae(i.latitude),Ae(o.latitude));return l!==0?l:ae(Ae(i.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Pg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,p;const m=i.fields||{},g=o.fields||{},T=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=(u=g.value)===null||u===void 0?void 0:u.arrayValue,N=ae(((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return N!==0?N:Pg(T,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ra.mapValue&&o===Ra.mapValue)return 0;if(i===Ra.mapValue)return 1;if(o===Ra.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=ae(u[m],p[m]);if(g!==0)return g;const T=Fs(l[u[m]],d[p[m]]);if(T!==0)return T}return ae(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Y()}}function Cg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=cr(t),r=cr(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function Pg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Fs(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function Us(t){return Ld(t)}function Ld(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=cr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ld(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ld(n.fields[o])}`;return s+"}"}(t.mapValue):Y()}function Dd(t){return!!t&&"integerValue"in t}function of(t){return!!t&&"arrayValue"in t}function jg(t){return!!t&&"nullValue"in t}function Lg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qa(t){return!!t&&"mapValue"in t}function SS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Bi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ys(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bi(n)}setAll(e){let n=ze.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Bi(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Qa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Qa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ys(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new kt(Bi(this.value))}}function z1(t){const e=[];return Ys(t.fields,(n,r)=>{const s=new ze([n]);if(Qa(r)){const i=z1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new et(e,0,X.min(),X.min(),X.min(),kt.empty(),0)}static newFoundDocument(e,n,r,s){return new et(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new et(e,2,n,X.min(),X.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new et(e,3,n,X.min(),X.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.position=e,this.inclusive=n}}function Dg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Fs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Og(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function bS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $1=class{};class Pe extends $1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CS(e,n,r):n==="array-contains"?new LS(e,r):n==="in"?new DS(e,r):n==="not-in"?new OS(e,r):n==="array-contains-any"?new MS(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new PS(e,r):new jS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fs(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(Fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends $1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new nn(e,n)}matches(e){return H1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function H1(t){return t.op==="and"}function W1(t){return NS(t)&&H1(t)}function NS(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function Od(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+Us(t.value);if(W1(t))return t.filters.map(e=>Od(e)).join(",");{const e=t.filters.map(n=>Od(n)).join(",");return`${t.op}(${e})`}}function G1(t,e){return t instanceof Pe?function(r,s){return s instanceof Pe&&r.op===s.op&&r.field.isEqual(s.field)&&tn(r.value,s.value)}(t,e):t instanceof nn?function(r,s){return s instanceof nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&G1(o,s.filters[l]),!0):!1}(t,e):void Y()}function K1(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${Us(n.value)}`}(t):t instanceof nn?function(n){return n.op.toString()+" {"+n.getFilters().map(K1).join(" ,")+"}"}(t):"Filter"}class CS extends Pe{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class PS extends Pe{constructor(e,n){super(e,"in",n),this.keys=q1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jS extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=q1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function q1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class LS extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return of(n)&&xo(n.arrayValue,this.value)}}class DS extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xo(this.value.arrayValue,n)}}class OS extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xo(this.value.arrayValue,n)}}class MS extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!of(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Mg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new VS(t,e,n,r,s,i,o)}function af(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Od(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),lu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Us(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Us(r)).join(",")),e.ue=n}return e.ue}function lf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!G1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Og(t.startAt,e.startAt)&&Og(t.endAt,e.endAt)}function Md(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FS(t,e,n,r,s,i,o,l){return new uu(t,e,n,r,s,i,o,l)}function uf(t){return new uu(t)}function Vg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function US(t){return t.collectionGroup!==null}function zi(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new He(ze.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new jl(i,r))}),n.has(ze.keyField().canonicalString())||e.ce.push(new jl(ze.keyField(),r))}return e.ce}function Zt(t){const e=J(t);return e.le||(e.le=BS(e,zi(t))),e.le}function BS(t,e){if(t.limitType==="F")return Mg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new jl(s.field,i)});const n=t.endAt?new Pl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pl(t.startAt.position,t.startAt.inclusive):null;return Mg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vd(t,e,n){return new uu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cu(t,e){return lf(Zt(t),Zt(e))&&t.limitType===e.limitType}function Q1(t){return`${af(Zt(t))}|lt:${t.limitType}`}function ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>K1(s)).join(", ")}]`),lu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Us(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Us(s)).join(",")),`Target(${r})`}(Zt(t))}; limitType=${t.limitType})`}function du(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of zi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Dg(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,zi(r),s)||r.endAt&&!function(o,l,u){const d=Dg(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,zi(r),s))}(t,e)}function zS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Y1(t){return(e,n)=>{let r=!1;for(const s of zi(t)){const i=$S(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function $S(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Fs(u,d):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return U1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new we(G.comparator);function Rn(){return HS}const X1=new we(G.comparator);function bi(...t){let e=X1;for(const n of t)e=e.insert(n.key,n);return e}function J1(t){let e=X1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function br(){return $i()}function Z1(){return $i()}function $i(){return new Xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const WS=new we(G.comparator),GS=new He(G.comparator);function te(...t){let e=GS;for(const n of t)e=e.add(n);return e}const KS=new He(ae);function qS(){return KS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cl(e)?"-0":e}}function e_(t){return{integerValue:""+t}}function QS(t,e){return IS(e)?e_(e):cf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this._=void 0}}function YS(t,e,n){return t instanceof Ll?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rf(i)&&(i=sf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof wo?n_(t,e):t instanceof Eo?r_(t,e):function(s,i){const o=t_(s,i),l=Fg(o)+Fg(s.Pe);return Dd(o)&&Dd(s.Pe)?e_(l):cf(s.serializer,l)}(t,e)}function XS(t,e,n){return t instanceof wo?n_(t,e):t instanceof Eo?r_(t,e):n}function t_(t,e){return t instanceof Dl?function(r){return Dd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ll extends hu{}class wo extends hu{constructor(e){super(),this.elements=e}}function n_(t,e){const n=s_(e);for(const r of t.elements)n.some(s=>tn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Eo extends hu{constructor(e){super(),this.elements=e}}function r_(t,e){let n=s_(e);for(const r of t.elements)n=n.filter(s=>!tn(s,r));return{arrayValue:{values:n}}}class Dl extends hu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Fg(t){return Ae(t.integerValue||t.doubleValue)}function s_(t){return of(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function JS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof wo&&s instanceof wo||r instanceof Eo&&s instanceof Eo?Vs(r.elements,s.elements,tn):r instanceof Dl&&s instanceof Dl?tn(r.Pe,s.Pe):r instanceof Ll&&s instanceof Ll}(t.transform,e.transform)}class ZS{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ya(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fu{}function i_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new a_(t.key,xn.none()):new Fo(t.key,t.data,xn.none());{const n=t.data,r=kt.empty();let s=new He(ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Xr(t.key,r,new Vt(s.toArray()),xn.none())}}function eR(t,e,n){t instanceof Fo?function(s,i,o){const l=s.value.clone(),u=Bg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Xr?function(s,i,o){if(!Ya(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Bg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(o_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Hi(t,e,n,r){return t instanceof Fo?function(i,o,l,u){if(!Ya(i.precondition,o))return l;const d=i.value.clone(),p=zg(i.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xr?function(i,o,l,u){if(!Ya(i.precondition,o))return l;const d=zg(i.fieldTransforms,u,o),p=o.data;return p.setAll(o_(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return Ya(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function tR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=t_(r.transform,s||null);i!=null&&(n===null&&(n=kt.empty()),n.set(r.field,i))}return n||null}function Ug(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Vs(r,s,(i,o)=>JS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fo extends fu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xr extends fu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function o_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Bg(t,e,n){const r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,XS(o,l,n[s]))}return r}function zg(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,YS(i,o,e))}return r}class a_ extends fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nR extends fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&eR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Z1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=i_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&Vs(this.mutations,e.mutations,(n,r)=>Ug(n,r))&&Vs(this.baseMutations,e.baseMutations,(n,r)=>Ug(n,r))}}class df{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=function(){return WS}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new df(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,re;function oR(t){switch(t){default:return Y();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function l_(t){if(t===void 0)return Sn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Re.OK:return F.OK;case Re.CANCELLED:return F.CANCELLED;case Re.UNKNOWN:return F.UNKNOWN;case Re.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Re.INTERNAL:return F.INTERNAL;case Re.UNAVAILABLE:return F.UNAVAILABLE;case Re.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Re.NOT_FOUND:return F.NOT_FOUND;case Re.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Re.ABORTED:return F.ABORTED;case Re.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Re.DATA_LOSS:return F.DATA_LOSS;default:return Y()}}(re=Re||(Re={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new Pr([4294967295,4294967295],0);function $g(t){const e=aR().encode(t),n=new j1;return n.update(e),new Uint8Array(n.digest())}function Hg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Pr([n,r],0),new Pr([s,i],0)]}class hf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ni(`Invalid padding: ${n}`);if(r<0)throw new Ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ni(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Pr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Pr.fromNumber(r)));return s.compare(lR)===1&&(s=new Pr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=$g(e),[r,s]=Hg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=$g(e),[r,s]=Hg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Uo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pu(X.min(),s,new we(ae),Rn(),te())}}class Uo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Uo(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class u_{constructor(e,n){this.targetId=e,this.me=n}}class c_{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Wg{constructor(){this.fe=0,this.ge=Kg(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new Uo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Kg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rn(),this.qe=Gg(),this.Qe=new we(ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Md(i))if(r===0){const o=new G(i.path);this.Ue(n,o,et.newNoDocument(o,X.min()))}else ce(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=$r(r).toUint8Array()}catch(u){if(u instanceof B1)return go("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new hf(o,s,i)}catch(u){return go(u instanceof Ni?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Md(l.target)){const u=new G(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,et.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=te();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new pu(e,n,this.Qe,this.ke,r);return this.ke=Rn(),this.qe=Gg(),this.Qe=new we(ae),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Wg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new He(ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Gg(){return new we(G.comparator)}function Kg(){return new we(G.comparator)}const cR={asc:"ASCENDING",desc:"DESCENDING"},dR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hR={and:"AND",or:"OR"};class fR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fd(t,e){return t.useProto3Json||lu(e)?e:{value:e}}function Ol(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pR(t,e){return Ol(t,e.toTimestamp())}function en(t){return ce(!!t),X.fromTimestamp(function(n){const r=cr(n);return new Le(r.seconds,r.nanos)}(t))}function ff(t,e){return Ud(t,e).canonicalString()}function Ud(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function h_(t){const e=Ie.fromString(t);return ce(y_(e)),e}function Bd(t,e){return ff(t.databaseId,e.path)}function Tc(t,e){const n=h_(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(p_(n))}function f_(t,e){return ff(t.databaseId,e)}function mR(t){const e=h_(t);return e.length===4?Ie.emptyPath():p_(e)}function zd(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function p_(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qg(t,e,n){return{name:Bd(t,e),fields:n.value.mapValue.fields}}function gR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(ce(p===void 0||typeof p=="string"),Ge.fromBase64String(p||"")):(ce(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ge.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const p=d.code===void 0?F.UNKNOWN:l_(d.code);return new K(p,d.message||"")}(o);n=new c_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Tc(t,r.document.name),i=en(r.document.updateTime),o=r.document.createTime?en(r.document.createTime):X.min(),l=new kt({mapValue:{fields:r.document.fields}}),u=et.newFoundDocument(s,i,o,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Xa(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Tc(t,r.document),i=r.readTime?en(r.readTime):X.min(),o=et.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Xa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Tc(t,r.document),i=r.removedTargetIds||[];n=new Xa([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new iR(s,i),l=r.targetId;n=new u_(l,o)}}return n}function yR(t,e){let n;if(e instanceof Fo)n={update:qg(t,e.key,e.value)};else if(e instanceof a_)n={delete:Bd(t,e.key)};else if(e instanceof Xr)n={update:qg(t,e.key,e.data),updateMask:AR(e.fieldMask)};else{if(!(e instanceof nR))return Y();n={verify:Bd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Ll)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Eo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Dl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:pR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function vR(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?en(s.updateTime):en(i);return o.isEqual(X.min())&&(o=en(i)),new ZS(o,s.transformResults||[])}(n,e))):[]}function _R(t,e){return{documents:[f_(t,e.path)]}}function xR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=f_(t,s);const i=function(d){if(d.length!==0)return g_(nn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(g){return{field:is(g.field),direction:TR(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Fd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function wR(t){let e=mR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=m_(m);return g instanceof nn&&W1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(b){return new jl(os(b.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,lu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,T=m.values||[];return new Pl(T,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,T=m.values||[];return new Pl(T,g)}(n.endAt)),FS(e,s,o,i,l,"F",u,d)}function ER(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function m_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=os(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=os(n.unaryFilter.field);return Pe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=os(n.unaryFilter.field);return Pe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=os(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(os(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nn.create(n.compositeFilter.filters.map(r=>m_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function TR(t){return cR[t]}function IR(t){return dR[t]}function kR(t){return hR[t]}function is(t){return{fieldPath:t.canonicalString()}}function os(t){return ze.fromServerFormat(t.fieldPath)}function g_(t){return t instanceof Pe?function(n){if(n.op==="=="){if(Lg(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NAN"}};if(jg(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lg(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NOT_NAN"}};if(jg(n.value))return{unaryFilter:{field:is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(n.field),op:IR(n.op),value:n.value}}}(t):t instanceof nn?function(n){const r=n.getFilters().map(s=>g_(s));return r.length===1?r[0]:{compositeFilter:{op:kR(n.op),filters:r}}}(t):Y()}function AR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function y_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r,s,i=X.min(),o=X.min(),l=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Kn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.ct=e}}function RR(t){const e=wR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.un=new NR}addToCollectionParentIndex(e,n){return this.un.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(ur.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class NR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new He(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bs(0)}static kn(){return new Bs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.changes=new Xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Hi(r.mutation,s,Vt.empty(),Le.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const s=br();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=bi();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Rn();const o=$i(),l=function(){return $i()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Xr)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),Hi(p.mutation,d,p.mutation.getFieldMask(),Le.now())):o.set(d.key,Vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var m;return l.set(d,new PR(p,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=$i();let s=new we((o,l)=>o-l),i=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||Vt.empty();p=l.applyToLocalView(d,p),r.set(u,p);const m=(s.get(l.batchId)||te()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,m=Z1();p.forEach(g=>{if(!i.has(g)){const T=i_(n.get(g),r.get(g));T!==null&&m.set(g,T),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):US(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(br());let l=-1,u=i;return o.next(d=>V.forEach(d,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?V.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,te())).next(p=>({batchId:l,changes:J1(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=bi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=bi();return this.indexManager.getCollectionParents(e,i).next(l=>V.forEach(l,u=>{const d=function(m,g){return new uu(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,et.newInvalidDocument(p)))});let l=bi();return o.forEach((u,d)=>{const p=i.get(u);p!==void 0&&Hi(p.mutation,d,Vt.empty(),Le.now()),du(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return V.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:en(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:RR(s.bundledQuery),readTime:en(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.overlays=new we(G.comparator),this.Ir=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=br();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=br(),i=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new we((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=br(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=br(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return V.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sR(n,r));let i=this.Ir.get(n);i===void 0&&(i=te(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(){this.Tr=new He(De.Er),this.dr=new He(De.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new De(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new De(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Ie([])),r=new De(n,e),s=new De(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Ie([])),r=new De(n,e),s=new De(n,e+1);let i=te();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new De(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class De{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ae(e.wr,n.wr)}static Ar(e,n){return ae(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new He(De.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new De(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new De(n,0),s=new De(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(ae);return n.forEach(s=>{const i=new De(s,0),o=new De(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new De(new G(i),0);let l=new He(ae);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),V.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(n.mutations,s=>{const i=new De(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new De(n,0),s=this.br.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.Mr=e,this.docs=function(){return new we(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():et.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():et.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Rn();const o=n.path,l=new G(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||xS(_S(p),r)<=0||(s.has(p.key)||du(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FR(this)}getSize(e){return V.resolve(this.size)}}class FR extends CR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.persistence=e,this.Nr=new Xs(n=>af(n),lf),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pf,this.targetCount=0,this.kr=Bs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),V.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Bs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Kn(n),V.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new nf(0),this.Kr=!1,this.Kr=!0,this.$r=new OR,this.referenceDelegate=e(this),this.Ur=new UR(this),this.indexManager=new bR,this.remoteDocumentCache=function(s){return new VR(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new SR(n),this.Gr=new LR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new MR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new zR(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class zR extends ES{constructor(e){super(),this.currentSequenceNumber=e}}class mf{constructor(e){this.persistence=e,this.Jr=new pf,this.Yr=null}static Zr(e){return new mf(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{const s=G.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return V.or([()=>V.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=te(),s=te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new gf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return PI()?8:TS(nt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $R;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(wi()<=ne.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(wi()<=ne.DEBUG&&W("QueryEngine","Query:",ss(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(wi()<=ne.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(n))):V.resolve())}Yi(e,n){if(Vg(n))return V.resolve(null);let r=Zt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Vd(n,null,"F"),r=Zt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=te(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Vd(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Vg(n)||s.isEqual(X.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?V.resolve(null):(wi()<=ne.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ss(n)),this.rs(e,o,n,vS(s,-1)).next(l=>l))})}ts(e,n){let r=new He(Y1(e));return n.forEach((s,i)=>{du(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return wi()<=ne.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ss(n)),this.Ji.getDocumentsMatchingQuery(e,n,ur.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new we(ae),this._s=new Xs(i=>af(i),lf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function GR(t,e,n,r){return new WR(t,e,n,r)}async function v_(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=te();for(const d of s){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function KR(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const m=d.batch,g=m.keys();let T=V.resolve();return g.forEach(b=>{T=T.next(()=>p.getEntry(u,b)).next(N=>{const j=d.docVersions.get(b);ce(j!==null),N.version.compareTo(j)<0&&(m.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),p.addEntry(N)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function __(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function qR(t,e){const n=J(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(Ge.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):p.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(p.resumeToken,r)),s=s.insert(m,T),function(N,j,E){return N.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,T,p)&&l.push(n.Ur.updateTargetData(i,T))});let u=Rn(),d=te();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(QR(i,o,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(X.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return V.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function QR(t,e,n){let r=te(),s=te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Rn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function YR(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XR(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Kn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function $d(t,e,n){const r=J(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Vo(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Qg(t,e,n){const r=J(t);let s=X.min(),i=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=J(u),g=m._s.get(p);return g!==void 0?V.resolve(m.os.get(g)):m.Ur.getTargetData(d,p)}(r,o,Zt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:te())).next(l=>(JR(r,zS(e),l),{documents:l,Ts:i})))}function JR(t,e,n){let r=t.us.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Yg{constructor(){this.activeTargetIds=qS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZR{constructor(){this.so=new Yg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba=null;function Ic(){return ba===null?ba=function(){return 268435456+Math.round(2147483648*Math.random())}():ba++,"0x"+ba.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je="WebChannelConnection";class rb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Ic(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(p=>(W("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw go("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=tb[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Ic();return new Promise((o,l)=>{const u=new L1;u.setWithCredentials(!0),u.listenOnce(D1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case qa.NO_ERROR:const p=u.getResponseJson();W(Je,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case qa.TIMEOUT:W(Je,`RPC '${e}' ${i} timed out`),l(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case qa.HTTP_ERROR:const m=u.getStatus();if(W(Je,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const T=g==null?void 0:g.error;if(T&&T.status&&T.message){const b=function(j){const E=j.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(T.status);l(new K(b,T.message))}else l(new K(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K(F.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(Je,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);W(Je,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Ic(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=V1(),l=M1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");W(Je,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);let g=!1,T=!1;const b=new nb({Io:j=>{T?W(Je,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(g||(W(Je,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),W(Je,`RPC '${e}' stream ${s} sending:`,j),m.send(j))},To:()=>m.close()}),N=(j,E,_)=>{j.listen(E,I=>{try{_(I)}catch(D){setTimeout(()=>{throw D},0)}})};return N(m,Ri.EventType.OPEN,()=>{T||(W(Je,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),N(m,Ri.EventType.CLOSE,()=>{T||(T=!0,W(Je,`RPC '${e}' stream ${s} transport closed`),b.So())}),N(m,Ri.EventType.ERROR,j=>{T||(T=!0,go(Je,`RPC '${e}' stream ${s} transport errored:`,j),b.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),N(m,Ri.EventType.MESSAGE,j=>{var E;if(!T){const _=j.data[0];ce(!!_);const I=_,D=I.error||((E=I[0])===null||E===void 0?void 0:E.error);if(D){W(Je,`RPC '${e}' stream ${s} received error:`,D);const S=D.status;let B=function(x){const k=Re[x];if(k!==void 0)return l_(k)}(S),w=D.message;B===void 0&&(B=F.INTERNAL,w="Unknown error status: "+S+" with message "+D.message),T=!0,b.So(new K(B,w)),m.close()}else W(Je,`RPC '${e}' stream ${s} received:`,_),b.bo(_)}}),N(l,O1.STAT_EVENT,j=>{j.stat===jd.PROXY?W(Je,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===jd.NOPROXY&&W(Je,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function kc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){return new fR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new x_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Sn(n.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sb extends w_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gR(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?en(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=zd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Md(u)?{documents:_R(i,u)}:{query:xR(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=d_(i,o.resumeToken);const d=Fd(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=Ol(i,o.snapshotVersion.toTimestamp());const d=Fd(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=ER(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=zd(this.serializer),n.removeTarget=e,this.a_(n)}}class ib extends w_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=vR(e.writeResults,e.commitTime),r=en(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=zd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Ud(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Ud(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ab{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Sn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Jr(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=J(u);d.L_.add(4),await Bo(d),d.q_.set("Unknown"),d.L_.delete(4),await gu(d)}(this))})}),this.q_=new ab(r,s)}}async function gu(t){if(Jr(t))for(const e of t.B_)await e(!0)}async function Bo(t){for(const e of t.B_)await e(!1)}function E_(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xf(n)?_f(n):Js(n).r_()&&vf(n,e))}function yf(t,e){const n=J(t),r=Js(n);n.N_.delete(e),r.r_()&&T_(n,e),n.N_.size===0&&(r.r_()?r.o_():Jr(n)&&n.q_.set("Unknown"))}function vf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Js(t).A_(e)}function T_(t,e){t.Q_.xe(e),Js(t).R_(e)}function _f(t){t.Q_=new uR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Js(t).start(),t.q_.v_()}function xf(t){return Jr(t)&&!Js(t).n_()&&t.N_.size>0}function Jr(t){return J(t).L_.size===0}function I_(t){t.Q_=void 0}async function ub(t){t.q_.set("Online")}async function cb(t){t.N_.forEach((e,n)=>{vf(t,e)})}async function db(t,e){I_(t),xf(t)?(t.q_.M_(e),_f(t)):t.q_.set("Unknown")}async function hb(t,e,n){if(t.q_.set("Online"),e instanceof c_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ml(t,r)}else if(e instanceof Xa?t.Q_.Ke(e):e instanceof u_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await __(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(Ge.EMPTY_BYTE_STRING,p.snapshotVersion)),T_(i,u);const m=new Kn(p.target,u,d,p.sequenceNumber);vf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Ml(t,r)}}async function Ml(t,e,n){if(!Vo(e))throw e;t.L_.add(1),await Bo(t),t.q_.set("Offline"),n||(n=()=>__(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await gu(t)})}function k_(t,e){return e().catch(n=>Ml(t,n,e))}async function yu(t){const e=J(t),n=dr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fb(e);)try{const s=await YR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,pb(e,s)}catch(s){await Ml(e,s)}A_(e)&&S_(e)}function fb(t){return Jr(t)&&t.O_.length<10}function pb(t,e){t.O_.push(e);const n=dr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function A_(t){return Jr(t)&&!dr(t).n_()&&t.O_.length>0}function S_(t){dr(t).start()}async function mb(t){dr(t).p_()}async function gb(t){const e=dr(t);for(const n of t.O_)e.m_(n.mutations)}async function yb(t,e,n){const r=t.O_.shift(),s=df.from(r,e,n);await k_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await yu(t)}async function vb(t,e){e&&dr(t).V_&&await async function(r,s){if(function(o){return oR(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();dr(r).s_(),await k_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await yu(r)}}(t,e),A_(t)&&S_(t)}async function Jg(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Jr(n);n.L_.add(3),await Bo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await gu(n)}async function _b(t,e){const n=J(t);e?(n.L_.delete(2),await gu(n)):e||(n.L_.add(2),await Bo(n),n.q_.set("Unknown"))}function Js(t){return t.K_||(t.K_=function(n,r,s){const i=J(n);return i.w_(),new sb(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:ub.bind(null,t),Ro:cb.bind(null,t),mo:db.bind(null,t),d_:hb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xf(t)?_f(t):t.q_.set("Unknown")):(await t.K_.stop(),I_(t))})),t.K_}function dr(t){return t.U_||(t.U_=function(n,r,s){const i=J(n);return i.w_(),new ib(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mb.bind(null,t),mo:vb.bind(null,t),f_:gb.bind(null,t),g_:yb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await yu(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new wf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ef(t,e){if(Sn("AsyncQueue",`${e}: ${t}`),Vo(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=bi(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new bs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this.W_=new we(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class zs{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new zs(e,n,bs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class wb{constructor(){this.queries=e0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=e0(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function e0(){return new Xs(t=>Q1(t),cu)}async function Eb(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new xb,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Ef(o,`Initialization of query '${ss(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Tf(n)}async function Tb(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ib(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Tf(n)}function kb(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Tf(t){t.Y_.forEach(e=>{e.next()})}var Hd,t0;(t0=Hd||(Hd={})).ea="default",t0.Cache="cache";class Ab{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e){this.key=e}}class b_{constructor(e){this.key=e}}class Sb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=Y1(e),this.Ra=new bs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Zg,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),T=du(this.query,m)?m:null,b=!!g&&this.mutatedKeys.has(g.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let j=!1;g&&T?g.data.isEqual(T.data)?b!==N&&(r.track({type:3,doc:T}),j=!0):this.ga(g,T)||(r.track({type:2,doc:T}),j=!0,(u&&this.Aa(T,u)>0||d&&this.Aa(T,d)<0)&&(l=!0)):!g&&T?(r.track({type:0,doc:T}),j=!0):g&&!T&&(r.track({type:1,doc:g}),j=!0,(u||d)&&(l=!0)),j&&(T?(o=o.add(T),i=N?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(T,b){const N=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return N(T)-N(b)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new zs(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new b_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new R_(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return zs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Rb{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bb{constructor(e){this.key=e,this.va=!1}}class Nb{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xs(l=>Q1(l),cu),this.Ma=new Map,this.xa=new Set,this.Oa=new we(G.comparator),this.Na=new Map,this.La=new pf,this.Ba={},this.ka=new Map,this.qa=Bs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Cb(t,e,n=!0){const r=D_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await N_(r,e,n,!0),s}async function Pb(t,e){const n=D_(t);await N_(n,e,!0,!1)}async function N_(t,e,n,r){const s=await XR(t.localStore,Zt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await jb(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&E_(t.remoteStore,s),l}async function jb(t,e,n,r,s){t.Ka=(m,g,T)=>async function(N,j,E,_){let I=j.view.ma(E);I.ns&&(I=await Qg(N.localStore,j.query,!1).then(({documents:w})=>j.view.ma(w,I)));const D=_&&_.targetChanges.get(j.targetId),S=_&&_.targetMismatches.get(j.targetId)!=null,B=j.view.applyChanges(I,N.isPrimaryClient,D,S);return r0(N,j.targetId,B.wa),B.snapshot}(t,m,g,T);const i=await Qg(t.localStore,e,!0),o=new Sb(e,i.Ts),l=o.ma(i.documents),u=Uo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);r0(t,n,d.wa);const p=new Rb(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function Lb(t,e,n){const r=J(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!cu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $d(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yf(r.remoteStore,s.targetId),Wd(r,s.targetId)}).catch(Mo)):(Wd(r,s.targetId),await $d(r.localStore,s.targetId,!0))}async function Db(t,e){const n=J(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yf(n.remoteStore,r.targetId))}async function Ob(t,e,n){const r=$b(t);try{const s=await function(o,l){const u=J(o),d=Le.now(),p=l.reduce((T,b)=>T.add(b.key),te());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",T=>{let b=Rn(),N=te();return u.cs.getEntries(T,p).next(j=>{b=j,b.forEach((E,_)=>{_.isValidDocument()||(N=N.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(T,b)).next(j=>{m=j;const E=[];for(const _ of l){const I=tR(_,m.get(_.key).overlayedDocument);I!=null&&E.push(new Xr(_.key,I,z1(I.value.mapValue),xn.exists(!0)))}return u.mutationQueue.addMutationBatch(T,d,E,l)}).next(j=>{g=j;const E=j.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(T,j.batchId,E)})}).then(()=>({batchId:g.batchId,changes:J1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new we(ae)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await zo(r,s.changes),await yu(r.remoteStore)}catch(s){const i=Ef(s,"Failed to persist write");n.reject(i)}}async function C_(t,e){const n=J(t);try{const r=await qR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ce(o.va):s.removedDocuments.size>0&&(ce(o.va),o.va=!1))}),await zo(n,r,e)}catch(r){await Mo(r)}}function n0(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=J(o);u.onlineState=l;let d=!1;u.queries.forEach((p,m)=>{for(const g of m.j_)g.Z_(l)&&(d=!0)}),d&&Tf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Mb(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new we(G.comparator);o=o.insert(i,et.newNoDocument(i,X.min()));const l=te().add(i),u=new pu(X.min(),new Map,new we(ae),o,l);await C_(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),If(r)}else await $d(r.localStore,e,!1).then(()=>Wd(r,e,n)).catch(Mo)}async function Vb(t,e){const n=J(t),r=e.batch.batchId;try{const s=await KR(n.localStore,e);j_(n,r,null),P_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zo(n,s)}catch(s){await Mo(s)}}async function Fb(t,e,n){const r=J(t);try{const s=await function(o,l){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(ce(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);j_(r,e,n),P_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zo(r,s)}catch(s){await Mo(s)}}function P_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function j_(t,e,n){const r=J(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Wd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||L_(t,r)})}function L_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(yf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),If(t))}function r0(t,e,n){for(const r of n)r instanceof R_?(t.La.addReference(r.key,e),Ub(t,r)):r instanceof b_?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||L_(t,r.key)):Y()}function Ub(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),If(t))}function If(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Ie.fromString(e)),r=t.qa.next();t.Na.set(r,new bb(n)),t.Oa=t.Oa.insert(n,r),E_(t.remoteStore,new Kn(Zt(uf(n.path)),r,"TargetPurposeLimboResolution",nf.oe))}}async function zo(t,e,n){const r=J(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=gf.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const p=J(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(d,g=>V.forEach(g.$i,T=>p.persistence.referenceDelegate.addReference(m,g.targetId,T)).next(()=>V.forEach(g.Ui,T=>p.persistence.referenceDelegate.removeReference(m,g.targetId,T)))))}catch(m){if(!Vo(m))throw m;W("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const T=p.os.get(g),b=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(g,N)}}}(r.localStore,i))}async function Bb(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await v_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new K(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zo(n,r.hs)}}function zb(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let s=te();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function D_(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=C_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mb.bind(null,e),e.Ca.d_=Ib.bind(null,e.eventManager),e.Ca.$a=kb.bind(null,e.eventManager),e}function $b(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fb.bind(null,e),e}class Vl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return GR(this.persistence,new HR,e.initialUser,this.serializer)}Ga(e){return new BR(mf.Zr,this.serializer)}Wa(e){return new ZR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vl.provider={build:()=>new Vl};class Gd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bb.bind(null,this.syncEngine),await _b(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wb}()}createDatastore(e){const n=mu(e.databaseInfo.databaseId),r=function(i){return new rb(i)}(e.databaseInfo);return function(i,o,l,u){return new ob(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new lb(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>n0(this.syncEngine,n,0),function(){return Xg.D()?new Xg:new eb}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,p){const m=new Nb(s,i,o,l,u,d);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Bo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gd.provider={build:()=>new Gd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Sn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=F1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ef(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ac(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await v_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function s0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Gb(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Jg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Jg(e.remoteStore,s)),t._onlineComponents=e}async function Gb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ac(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;go("Error using user provided cache. Falling back to memory cache: "+n),await Ac(t,new Vl)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Ac(t,new Vl);return t._offlineComponents}async function O_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await s0(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await s0(t,new Gd))),t._onlineComponents}function Kb(t){return O_(t).then(e=>e.syncEngine)}async function qb(t){const e=await O_(t),n=e.eventManager;return n.onListen=Cb.bind(null,e.syncEngine),n.onUnlisten=Lb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Pb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Db.bind(null,e.syncEngine),n}function Qb(t,e,n={}){const r=new or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const p=new Hb({next:g=>{p.Za(),o.enqueueAndForget(()=>Tb(i,m));const T=g.docs.has(l);!T&&g.fromCache?d.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&u&&u.source==="server"?d.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Ab(uf(l.path),p,{includeMetadataChanges:!0,_a:!0});return Eb(i,m)}(await qb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Xb(t,e,n,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function o0(t){if(!G.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Fl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kf(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class V_{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cS;switch(r.type){case"firstParty":return new fS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=i0.get(n);r&&(W("ComponentProvider","Removing Datastore"),i0.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Af(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class To extends Af{constructor(e,n,r){super(e,n,uf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new G(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function l0(t,e,...n){if(t=xt(t),arguments.length===1&&(e=F1.newId()),Yb("doc","path",e),t instanceof V_){const r=Ie.fromString(e,...n);return o0(r),new bt(t,null,new G(r))}{if(!(t instanceof bt||t instanceof To))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return o0(r),new bt(t.firestore,t instanceof To?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new x_(this,"async_queue_retry"),this.Vu=()=>{const r=kc();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=kc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=kc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new or;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Vo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Sn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=wf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Sf extends V_{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new u0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u0(e),this._firestoreClient=void 0,await e}}}function F_(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Jb(t),t._firestoreClient}function Jb(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,p){return new AS(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,M_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Wb(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(Ge.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $s(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=/^__.*__$/;class eN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fo(e,this.data,n,this.fieldTransforms)}}function B_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Cf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ul(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(B_(this.Cu)&&Zb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mu(e)}Qu(e,n,r,s=!1){return new Cf({Cu:e,methodName:n,qu:r,path:ze.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nN(t){const e=t._freezeSettings(),n=mu(t._databaseId);return new tN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rN(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);W_("Data must be an object, but it was:",o,r);const l=$_(r,o);let u,d;if(i.merge)u=new Vt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=sN(e,m,n);if(!o.contains(g))throw new K(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);oN(p,g)||p.push(g)}u=new Vt(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new eN(new kt(l),u,d)}function z_(t,e){if(H_(t=xt(t)))return W_("Unsupported field value:",e,t),$_(t,e);if(t instanceof U_)return function(r,s){if(!B_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=z_(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Le.fromDate(r);return{timestampValue:Ol(s.serializer,i)}}if(r instanceof Le){const i=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ol(s.serializer,i)}}if(r instanceof bf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $s)return{bytesValue:d_(s.serializer,r._byteString)};if(r instanceof bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ff(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Nf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return cf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${kf(r)}`)}(t,e)}function $_(t,e){const n={};return U1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(t,(r,s)=>{const i=z_(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function H_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof bf||t instanceof $s||t instanceof bt||t instanceof U_||t instanceof Nf)}function W_(t,e,n){if(!H_(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=kf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function sN(t,e,n){if((e=xt(e))instanceof Rf)return e._internalPath;if(typeof e=="string")return G_(t,e);throw Ul("Field path arguments must be of type string or ",t,!1,void 0,n)}const iN=new RegExp("[~\\*/\\[\\]]");function G_(t,e,n){if(e.search(iN)>=0)throw Ul(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rf(...e.split("."))._internalPath}catch{throw Ul(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ul(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new K(F.INVALID_ARGUMENT,l+t+u)}function oN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(q_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aN extends K_{data(){return super.data()}}function q_(t,e){return typeof e=="string"?G_(t,e):e instanceof Rf?e._internalPath:e._delegate._internalPath}class lN{convertValue(e,n="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ys(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ae(o.doubleValue));return new Nf(i)}convertGeoPoint(e){return new bf(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vo(e));default:return null}}convertTimestamp(e){const n=cr(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);ce(y_(r));const s=new _o(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Sn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Q_ extends K_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new dN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(q_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class dN extends Q_{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t){t=Fl(t,bt);const e=Fl(t.firestore,Sf);return Qb(F_(e),t._key).then(n=>gN(e,t,n))}class fN extends lN{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function pN(t,e,n){t=Fl(t,bt);const r=Fl(t.firestore,Sf),s=uN(t.converter,e);return mN(r,[rN(nN(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xn.none())])}function mN(t,e){return function(r,s){const i=new or;return r.asyncQueue.enqueueAndForget(async()=>Ob(await Kb(r),s,i)),i.promise}(F_(t),e)}function gN(t,e,n){const r=n.docs.get(e._key),s=new fN(t);return new Q_(t,s,e._key,r,new cN(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Qs=s})(Ks),Ms(new Fr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Sf(new dS(r.getProvider("auth-internal")),new mS(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _o(d.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ir(Rg,"4.7.3",e),ir(Rg,"4.7.3","esm2017")})();var yN="firebase",vN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(yN,vN,"app");const _N={apiKey:"AIzaSyBWaYH6fnf6Etp8kWzjoO5FUejE5sE8ShA",authDomain:"t-track-demo.firebaseapp.com",projectId:"t-track-demo",storageBucket:"t-track-demo.firebasestorage.app",messagingSenderId:"303259648078",appId:"1:303259648078:web:0dd0b3887215d659d3431f",measurementId:"G-GTPLK2KLVQ"},xN=Yv(_N),Na=aS(xN),c0={},Y_=L.createContext(void 0),d0="https://api.t-track.rivieraapps.com/api/",Pf=()=>{const t=L.useContext(Y_);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},wN=({children:t})=>{const[e,n]=L.useState(null),[r,s]=L.useState(null),[i,o]=L.useState(!0);L.useEffect(()=>Qk(Na,async g=>{if(n(g),g){try{var T=d0+"users/"+g.uid;if(!(await fetch(T,{method:"GET"})).ok)throw new Error("Request failed")}catch(b){console.log("ERROR: couldn't retrive user",b)}try{const b=await hN(l0(c0,"users",g.uid));if(b.exists())s(b.data());else{const N={uid:g.uid,email:g.email||"",isAdmin:!1,displayName:g.displayName||void 0};await pN(l0(c0,"users",g.uid),N),s(N)}}catch(b){console.error("Error fetching user profile:",b),s({uid:g.uid,email:g.email||"",isAdmin:g.email==="admin@t-track.com",displayName:g.displayName||void 0})}}else s(null);o(!1)}),[]);const p={user:e,userProfile:r,loading:i,login:async(m,g)=>{await Gk(Na,m,g)},register:async(m,g,T)=>{const b=await Wk(Na,m,g),N={uid:b.user.uid,email:b.user.email||"",isAdmin:m==="admin@t-track.com",displayName:T};try{var j=d0+"users";if(!(await fetch(j,{method:"POST",body:JSON.stringify(N)})).ok)throw new Error("Request failed")}catch(E){console.log("ERROR: couldn't save user",E)}},logout:async()=>{await Yk(Na)},isAdmin:(r==null?void 0:r.isAdmin)||!1};return c.jsx(Y_.Provider,{value:p,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(t,e)=>{const n=L.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...d},p)=>L.createElement("svg",{ref:p,...EN,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${TN(t)}`,l].join(" "),...d},[...e.map(([m,g])=>L.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=ie("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=ie("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ie("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=ie("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=ie("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ie("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ox=({isOpen:t,onClose:e})=>{const[n,r]=L.useState(!0),[s,i]=L.useState(""),[o,l]=L.useState(""),[u,d]=L.useState(""),[p,m]=L.useState(!1),[g,T]=L.useState(""),{login:b,register:N}=Pf(),j=async E=>{E.preventDefault(),m(!0),T("");try{n?await b(s,o):await N(s,o,u),e(),i(""),l(""),d("")}catch(_){T(_.message||"An error occurred")}finally{m(!1)}};return t?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n?"Sign In":"Create Account"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-6 h-6"})})]}),c.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[g&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:c.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:g})}),!n&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),c.jsxs("div",{className:"relative",children:[c.jsx($o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",value:u,onChange:E=>d(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Your name"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),c.jsxs("div",{className:"relative",children:[c.jsx(bN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"email",value:s,onChange:E=>i(E.target.value),required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"your@email.com"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(RN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"password",value:o,onChange:E=>l(E.target.value),required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:""})]})]}),c.jsx("button",{type:"submit",disabled:p,className:"w-full bg-emerald-600 text-white py-2 px-4 rounded-lg hover:bg-emerald-700 focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Please wait...":n?"Sign In":"Create Account"}),c.jsx("div",{className:"text-center",children:c.jsx("button",{type:"button",onClick:()=>r(!n),className:"text-emerald-600 hover:text-emerald-700 dark:text-emerald-400 text-sm",children:n?"Don't have an account? Sign up":"Already have an account? Sign in"})}),n&&c.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:c.jsxs("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:[c.jsx("strong",{children:"Demo Accounts:"}),c.jsx("br",{}),"Admin: admin@t-track.com / password",c.jsx("br",{}),"User: user@t-track.com / password"]})})]})]})}):null},MN=()=>{const{darkMode:t,toggleDarkMode:e,isPWA:n}=Qr(),{user:r,userProfile:s,logout:i}=Pf(),[o,l]=L.useState(!1),[u,d]=L.useState(!1);if(n)return null;const p=async()=>{try{await i(),l(!1)}catch(m){console.error("Error logging out:",m)}};return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-800",children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsxs(ke,{to:"/",className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"text-white font-bold text-lg",children:"T"})}),c.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"T-track"})]}),c.jsxs("nav",{className:"hidden md:flex space-x-8",children:[c.jsx(ke,{to:"/",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:"Events"}),c.jsx(ke,{to:"/riders",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:"Riders"}),c.jsx(ke,{to:"/horses",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:"Horses"}),c.jsx(ke,{to:"/history",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:"History"}),c.jsx(ke,{to:"/settings",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:"Settings"})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("a",{href:"https://t-tracksystem.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:c.jsx(Lf,{className:"w-5 h-5"})}),r?c.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[c.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(s==null?void 0:s.displayName)||r.email,(s==null?void 0:s.isAdmin)&&c.jsx("span",{className:"text-emerald-600 ml-1",children:"(Admin)"})]}),c.jsx("button",{onClick:p,className:"text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:c.jsx(tx,{className:"w-5 h-5"})})]}):c.jsx("button",{onClick:()=>d(!0),className:"hidden md:flex text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:c.jsx($o,{className:"w-5 h-5"})}),c.jsx("button",{onClick:e,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",children:t?c.jsx(ix,{className:"w-5 h-5"}):c.jsx(rx,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>l(!o),className:"md:hidden text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:o?c.jsx(jr,{className:"w-6 h-6"}):c.jsx(NN,{className:"w-6 h-6"})})]})]})}),o&&c.jsx("div",{className:"md:hidden bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800",children:c.jsxs("div",{className:"px-4 py-2 space-y-1",children:[c.jsx(ke,{to:"/",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",onClick:()=>l(!1),children:"Events"}),c.jsx(ke,{to:"/riders",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",onClick:()=>l(!1),children:"Riders"}),c.jsx(ke,{to:"/horses",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",onClick:()=>l(!1),children:"Horses"}),c.jsx(ke,{to:"/history",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",onClick:()=>l(!1),children:"History"}),c.jsx(ke,{to:"/settings",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",onClick:()=>l(!1),children:"Settings"}),c.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-2",children:r?c.jsxs("div",{className:"px-3 py-2",children:[c.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:[(s==null?void 0:s.displayName)||r.email,(s==null?void 0:s.isAdmin)&&c.jsx("span",{className:"text-emerald-600 ml-1",children:"(Admin)"})]}),c.jsx("button",{onClick:p,className:"text-red-600 hover:text-red-700 text-sm",children:"Sign Out"})]}):c.jsx("button",{onClick:()=>{d(!0),l(!1)},className:"block px-3 py-2 text-emerald-600 hover:text-emerald-700",children:"Sign In"})})]})})]}),c.jsx(ox,{isOpen:u,onClose:()=>d(!1)})]})},VN=()=>{const{isPWA:t}=Qr(),e=No();if(!t)return null;const n=[{path:"/",icon:SN,label:"Events"},{path:"/riders",icon:Df,label:"Riders"},{path:"/horses",icon:Zs,label:"Horses"},{path:"/history",icon:AN,label:"History"},{path:"/settings",icon:LN,label:"Settings"}];return c.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 safe-area-padding-bottom",children:c.jsx("div",{className:"flex justify-around items-center py-2",children:n.map(({path:r,icon:s,label:i})=>{const o=e.pathname===r;return c.jsxs(ke,{to:r,className:`flex flex-col items-center space-y-1 p-2 rounded-lg transition-colors ${o?"text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400"}`,children:[c.jsx(s,{className:"w-5 h-5"}),c.jsx("span",{className:"text-xs",children:i})]},r)})})})},FN=({children:t})=>{const{isPWA:e}=Qr();return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsx(MN,{}),c.jsx("main",{className:`${e?"pb-20":"pb-4"}`,children:t}),c.jsx(VN,{})]})},UN=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(!1),[s,i]=L.useState(!1);L.useEffect(()=>{const u=window.matchMedia("(display-mode: standalone)").matches;i(u);const d=m=>{m.preventDefault(),e(m),setTimeout(()=>{u||r(!0)},18e4)},p=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",d),window.addEventListener("appinstalled",p),()=>{window.removeEventListener("beforeinstallprompt",d),window.removeEventListener("appinstalled",p)}},[]);const o=async()=>{if(!t)return;t.prompt();const{outcome:u}=await t.userChoice;u==="accepted"&&(e(null),r(!1))},l=()=>{r(!1),sessionStorage.setItem("pwa-prompt-dismissed","true")};return s||!n||!t||sessionStorage.getItem("pwa-prompt-dismissed")?null:c.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 z-50 max-w-sm mx-auto",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center",children:c.jsx(sx,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Install T-track App"}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Get faster access and offline features by installing our app on your device."}),c.jsxs("div",{className:"flex space-x-2 mt-3",children:[c.jsxs("button",{onClick:o,className:"flex items-center space-x-1 bg-emerald-600 text-white px-3 py-1.5 rounded text-xs font-medium hover:bg-emerald-700 transition-colors",children:[c.jsx(kN,{className:"w-3 h-3"}),c.jsx("span",{children:"Install"})]}),c.jsx("button",{onClick:l,className:"text-gray-500 dark:text-gray-400 px-3 py-1.5 rounded text-xs hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Not now"})]})]}),c.jsx("button",{onClick:l,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-4 h-4"})})]})})},ax=({event:t})=>{const e=r=>{switch(r){case"live":return"bg-red-500 animate-pulse";case"upcoming":return"bg-emerald-500";case"finished":return"bg-gray-500";default:return"bg-gray-500"}},n=r=>{switch(r){case"live":return"LIVE";case"upcoming":return"UPCOMING";case"finished":return"FINISHED";default:return"UNKNOWN"}};return c.jsx(ke,{to:`/events/${t.id}`,className:"block",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[c.jsxs("div",{className:"h-48 bg-cover bg-center relative",style:{backgroundImage:`url(${t.backgroundImage})`},children:[c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),c.jsx("div",{className:"absolute top-4 left-4",children:c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold text-white ${e(t.status)}`,children:n(t.status)})}),c.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[c.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t.name}),c.jsxs("div",{className:"flex items-center text-white text-sm space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(nx,{className:"w-4 h-4"}),c.jsx("span",{children:t.location})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(vu,{className:"w-4 h-4"}),c.jsx("span",{children:new Date(t.startTime).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"})})]})]})]})]}),c.jsxs("div",{className:"p-4",children:[c.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-3",children:t.description}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400",children:[c.jsx(Df,{className:"w-4 h-4"}),c.jsxs("span",{className:"text-sm",children:[t.categories.length," categories"]})]}),c.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400",children:[c.jsx(jf,{className:"w-4 h-4"}),c.jsxs("span",{className:"text-sm",children:[" ",new Date(t.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]}),c.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:t.categories.map(r=>c.jsx("span",{className:"px-2 py-1 bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200 text-xs rounded-full",children:r},r))})]})]})})},BN={ListName:"API T-Track|Live CEN B",BottomPicture:"",BottomPictureShow:0,ColumnHeadsFontName:"",ColumnHeadsFontSize:12,ColumnHeadsFontBold:!0,ColumnHeadsFontItalic:!1,ColumnHeadsFontUnderlined:!1,ColumnHeadsColor:"",ColumnHeadsShow:2,Columns:1,ColumnSpacing:5,CoverSheet:"",BackSheet:"",Design:"",DesignShow:2,EveryOtherLineGray:!1,FontName:"Arial",FontSize:10,FooterFontName:"",FooterFontSize:10,FooterFontBold:!1,FooterFontItalic:!1,FooterFontUnderlined:!1,FooterColor:"",GrayLine:!0,HeadLine1:" 28 Trofeo Les Grandes Montagnes (2)",HeadLine1FontName:"",HeadLine1FontSize:16,HeadLine1FontBold:!1,HeadLine1FontItalic:!1,HeadLine1FontUnderlined:!0,HeadLine2:"",HeadLine1Color:"",HeadLine1Show:2,HeadLine2FontName:"",HeadLine2FontSize:16,HeadLine2FontBold:!0,HeadLine2FontItalic:!1,HeadLine2FontUnderlined:!1,HeadLine2Color:"",HeadLine2Show:2,HeightBottomPicture:40,LineColor:"",LineBackColor:"",LineDynamicFormat:"",LineSpacing:1,MaxRecords:0,MultiplierField:"",PageFormat:0,PageMarginBottom:10,PageMarginLeft:10,PageMarginRight:10,PageMarginTop:10,PageSize:3,PageHeight:297,PageWidth:210,SepLine:!0,TopRightPicture:"",TopRightPictureShow:0,ListHeaderText:"",ListFooterText:"",ListHeaderFooterFontName:"",ListHeaderFooterFontSize:10,ListHeaderFooterFontBold:!1,ListHeaderFooterFontItalic:!1,ListHeaderFooterFontUnderlined:!1,ListHeaderFooterAlignment:1,Remarks:"",LastChange:"2025-07-08 20:45:44",FooterText1:"",FooterText2:"",FooterText3:"[Time]",Orders:[{Expression:"[Elimination_Gait_1]=0",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0},{Expression:"[Elimination_Gait_2]=0",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0},{Expression:"[Elimination_Gait_3]=0",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0},{Expression:"val(replace([AfterRide 3 anelli];-1;98))",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0},{Expression:"val(replace([AfterRide2];-1;98))",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0},{Expression:"val(replace([AfterRide1];-1;98))",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0}],Filters:[{OrConjunction:!1,Expression1:"CONTEST",Operator:"=",Expression2:"3"}],Fields:[{Expression:"DisplayName",Label:"RIDER NAME"},{Expression:"BIB",Label:"Bib"},{Expression:"[ID_FISE_CAVALIERE]",Label:"RIDER ID"},{Expression:"if([CLUB]>0;[CLUB];[NATION.IOCNAME])",Label:"FLAG"},{Expression:"[Horse]",Label:"HORSE NAME"},{Expression:"[ID_FISE_CAVALLO]",Label:"HORSE ID"},{Expression:"Switch([AfterRide 3 anelli]>0;[AfterRide 3 anelli];[AfterRide2]>0;[AfterRide2];[AfterRide1]>0;[AfterRide1])",Label:"Main rank"},{Expression:'"----------------------------------"',Label:"TIMING 1"},{Expression:'"1" & " - " & [_1_KM]',Label:"Phase Km"},{Expression:"Partenza 1",Label:"Start phase"},{Expression:"TIME3",Label:"Arrival"},{Expression:"TIME6",Label:"Loop Time"},{Expression:"Media arrivo 1",Label:"Loop Speed"},{Expression:"TIME4",Label:"In Time"},{Expression:"TIME5",Label:"Recovery Time"},{Expression:"Media in vet 1",Label:"Phase Speed"},{Expression:"TIME7",Label:"Ride Time"},{Expression:"TIME10",Label:"Ride Speed"},{Expression:'if([AfterRide1]>0;[AfterRide1]& " ";"")',Label:"Rank"},{Expression:`Switch([Elimination_Gait_1]=1;[EC1];[T12]>0;[TIME12]) & if([Pass_1]=1;" ["& GapTimeTop(4;11;"-";"+HH:mm:ss''") &"]")`,Label:"Start"},{Expression:'if([Pass_1]=1;"yes")',Label:"Ready to next phase"},{Expression:"TIME16",Label:"Extimated time arrival"},{Expression:" ",Label:"Extimated loop time"},{Expression:'"----------------------------------"',Label:"TIMING 2"},{Expression:'"2" & " - " & [_2_KM]',Label:"Phase Km"},{Expression:"Partenza 2",Label:"Start phase"},{Expression:"Arrivo 2",Label:"Arrival"},{Expression:"TIME35",Label:"Loop Time"},{Expression:"TIME39",Label:"Loop Speed"},{Expression:"TIME33",Label:"In Time"},{Expression:"TIME34",Label:"Recovery Time"},{Expression:"TIME40",Label:"Phase Speed"},{Expression:"TIME37",Label:"Ride Time"},{Expression:"Average 2",Label:"Ride Speed"},{Expression:'if([AfterRide2]>0;[AfterRide2]& " ";"")',Label:"Rank"},{Expression:`Switch([Elimination_Gait_2]=1;[EC2];[T42]>0;[TIME42]) & if([Pass_2]=1;" ["& GapTimeTop(33;12;"-";"+HH:mm:ss''") &"]")`,Label:"Start"},{Expression:'if([Pass_2]=1;"yes")',Label:"Ready to next phase"},{Expression:"TIME46",Label:"Extimated time arrival"},{Expression:"",Label:"Extimated loop time"},{Expression:'"----------------------------------"',Label:"TIMING 3"},{Expression:'"3" & " - " & [_3_KM]',Label:"Phase Km"},{Expression:"Partenza 3",Label:"Start phase"},{Expression:`Arrivo 3 & if([Pass_3]=1;" ["& GapTimeTop(52;1;"";"+HH:mm:ss''") &"]")`,Label:"Arrival"},{Expression:"Tempo arrivo 3",Label:"Loop Time"},{Expression:"Media arrivo 3",Label:"Loop Speed"},{Expression:"In vet 3",Label:"In Time"},{Expression:"Recovery 3",Label:"Recovery Time"},{Expression:"TIME59",Label:"Phase Speed"},{Expression:"Total time 3 anelli",Label:"Ride Time"},{Expression:"TIME65",Label:"Ride Speed"},{Expression:'if([AfterRide 3 anelli]>0 and [Pass_3]=1;[AfterRide 3 anelli]& " ";"")',Label:"Rank"},{Expression:'Switch([Elimination_Gait_3]=1;[EC3];[T62]>0;[TIME62];[Pass_3]=1;"-")',Label:"Start"},{Expression:'if([Pass_3]=1;"yes")',Label:"Ready to next phase"},{Expression:"",Label:"Extimated time arrival"},{Expression:"",Label:"Extimated loop time"},{Expression:'"----------------------------------"',Label:"VET PRE"},{Expression:'"PRE"',Label:"Phase"},{Expression:'""',Label:"Recovery Time Vet"},{Expression:"Heart_Rate",Label:"Heart Rate"},{Expression:"",Label:"Rec. Index"},{Expression:"Respiro",Label:"Resp."},{Expression:"Mucous",Label:"Mucous"},{Expression:"Capillar_Refill",Label:"Cap. Refill"},{Expression:"Skin",Label:"Skin"},{Expression:"Gut_Sounds",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone",Label:"Muscle Tone"},{Expression:"Gait",Label:"Gait"},{Expression:"Vet",Label:"Veterinary"},{Expression:'"1"',Label:"R.I."},{Expression:'"----------------------------------"',Label:"VET 1"},{Expression:'"1"',Label:"Phase"},{Expression:"TIME5 ",Label:"Recovery Time Vet"},{Expression:"Heart_Rate_1",Label:"Heart Rate"},{Expression:'IF([T14]>0 ;"+"&[T14];[T14])',Label:"Rec. Index"},{Expression:"Respiro_1",Label:"Resp."},{Expression:"Mucous_1",Label:"Mucous"},{Expression:"Capillar_Refill_1",Label:"Cap. Refill"},{Expression:"Skin_1",Label:"Skin"},{Expression:"Gut_Sounds_1",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_1",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_1",Label:"Muscle Tone"},{Expression:"Gait_1",Label:"Gait"},{Expression:"Vet_1",Label:"Veterinary"},{Expression:'"1"',Label:"R.I."},{Expression:'"1 - Re Insp."',Label:"Phase"},{Expression:'""',Label:"Recovery Time Vet"},{Expression:"Heart_Rate_1_RI",Label:"Heart Rate"},{Expression:'IF([T14]>0 ;"+"&[T14];[T14])',Label:"Rec. Index"},{Expression:"Respiro_1_RI",Label:"Resp."},{Expression:"Mucous_1_RI",Label:"Mucous"},{Expression:"Capillar_Refill_1_RI",Label:"Cap. Refill"},{Expression:"Skin_1_RI",Label:"Skin"},{Expression:"Gut_Sounds_1_RI",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_1_RI",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_1_RI",Label:"Muscle Tone"},{Expression:"Gait_1_RI",Label:"Gait"},{Expression:"Vet_1_RI",Label:"Veterinary"},{Expression:"if([Riesame_1]=1;1;0)",Label:"R.I."},{Expression:'"----------------------------------"',Label:"VET 2"},{Expression:'"2"',Label:"Phase"},{Expression:"TIME34",Label:"Recovery Time Vet"},{Expression:"Heart_Rate_2",Label:"Heart Rate"},{Expression:'IF([T44]>0 ;"+"&[T44];[T44])',Label:"Rec. Index"},{Expression:"Respiro_2",Label:"Resp."},{Expression:"Mucous_2",Label:"Mucous"},{Expression:"Capillar_Refill_2",Label:"Cap. Refill"},{Expression:"Skin_2",Label:"Skin"},{Expression:"Gut_Sounds_2",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_2",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_2",Label:"Muscle Tone"},{Expression:"Gait_2",Label:"Gait"},{Expression:"Vet_2",Label:"Veterinary"},{Expression:'"1"',Label:"R.I."},{Expression:'"2 - Re Insp."',Label:"Phase"},{Expression:'""',Label:"Recovery Time Vet"},{Expression:"Heart_Rate_2_RI",Label:"Heart Rate"},{Expression:'IF([T47]>0 ;"+"&[T47];[T47])',Label:"Rec. Index"},{Expression:"Respiro_2_RI",Label:"Resp."},{Expression:"Mucous_2_RI",Label:"Mucous"},{Expression:"Capillar_Refill_2_RI",Label:"Cap. Refill"},{Expression:"Skin_2_RI",Label:"Skin"},{Expression:"Gut_Sounds_2_RI",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_2_RI",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_2_RI",Label:"Muscle Tone"},{Expression:"Gait_2_RI",Label:"Gait"},{Expression:"Vet_2_RI",Label:"Veterinary"},{Expression:"if([Riesame_2]=1;1;0)",Label:"R.I."},{Expression:'"----------------------------------"',Label:"VET 3"},{Expression:'"3"',Label:"Phase"},{Expression:"Recovery 3",Label:"Recovery Time Vet"},{Expression:"Heart_Rate_3",Label:"Heart Rate"},{Expression:'IF([T67]>0 ;"+"&[T67];[T67])',Label:"Rec. Index"},{Expression:"Respiro_3",Label:"Resp."},{Expression:"Mucous_3",Label:"Mucous"},{Expression:"Capillar_Refill_3",Label:"Cap. Refill"},{Expression:"Skin_3",Label:"Skin"},{Expression:"Gut_Sounds_3",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_3",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_3",Label:"Muscle Tone"},{Expression:"Gait_3",Label:"Gait"},{Expression:"Vet_3",Label:"Veterinary"},{Expression:'"1"',Label:"R.I."},{Expression:'"3 - Re Insp."',Label:"Phase"},{Expression:'""',Label:"Recovery Time Vet"},{Expression:"Heart_Rate_3_RI",Label:"Heart Rate"},{Expression:'IF([T67]>0 ;"+"&[T67];[T67])',Label:"Rec. Index"},{Expression:"Respiro_3_RI",Label:"Resp."},{Expression:"Mucous_3_RI",Label:"Mucous"},{Expression:"Capillar_Refill_3_RI",Label:"Cap. Refill"},{Expression:"Skin_3_RI",Label:"Skin"},{Expression:"Gut_Sounds_3_RI",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_3_RI",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_3_RI",Label:"Muscle Tone"},{Expression:"Gait_3_RI",Label:"Gait"},{Expression:"Vet_3_RI",Label:"Veterinary"},{Expression:"if([Riesame_3]=1;1;0)",Label:"R.I."}],SelectorResults:[]},zN=[["308","37","FRASSI MARCO","FISE40509/B","Veneto","CYRILLA","46159B","1","----------------------------------","1 - 0","07:00:19","8:50:23","1:50:22","15,220","8:52:38","2:14","14,917","1:52:38","14,917","1 ","9:32:37 [-]","yes","11:23:00","","2 - 0","09:32:52","11:08:57","1:36:19","17,442","11:12:17","3:20","16,858","03:32:17","15,828","1 ","11:52:16 [-]","yes","13:28:35","","3 - 0","11:52:32","13:36:12 []","1:43:55","16.165","13:45:59","9:46","16.165","05:16:13","15.93","1 ","-","yes","PRE","","36","Ok","A","1","1","A","A","A","A","","1","2:14","54","+4","Ok","B","1","1","A","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","63","+1","Ok","A","1","1","B","A","A","A","","2 - Re Insp.","60","0","Ok","A","1","1","B","A","A","A","","1","3","56","+4","Ok","B","2","2","B","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["311","40","TESTA MANUEL","FISE52669/B","Lombardia","KADEV AA","49368B","2","----------------------------------","1 - 0","07:00:23","8:56:01","1:56:00","14,483","9:01:19","5:19","13,849","2:01:19","13,849","8 ","9:41:18 [+08:41'']","yes","11:37:18","","2 - 0","09:41:36","11:31:39","1:50:19","15,228","11:36:22","4:43","14,603","03:56:22","14,216","6 ","12:16:21 [+24:05'']","yes","14:06:40","","3 - 0","12:16:37","13:55:09 [+18:57'']","1:38:47","17.005","14:04:50","9:41","17.005","05:35:09","15.03","2 ","-","yes","PRE","","44","Ok","A","1","1","A","A","A","A","","1","5:19","64","-4","Ok","A","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","62","0","Ok","B","2","1","A","A","A","A","","2 - Re Insp.","50","-2","Ok","B","1","1","A","A","A","A","","1","3","64","0","Ok","B","1","2","B","A","A","B","","3 - Re Insp.","","","","","","","","","","","0"],["312","41","AMERALDI ALICE","FISE124297/B","Lombardia","KAHIPAN","34600B/AN","3","----------------------------------","1 - 0","07:00:25","8:56:03","1:56:02","14,478","9:01:22","5:19","13,843","2:01:22","13,843","9 ","9:41:21 [+08:44'']","yes","11:37:24","","2 - 0","09:41:37","11:31:42","1:50:19","15,229","11:36:27","4:45","14,600","03:56:27","14,211","7 ","12:16:26 [+24:10'']","yes","14:06:45","","3 - 0","12:16:40","13:55:10 [+18:58'']","1:38:43","17.016","14:04:58","9:47","17.016","05:35:10","15.03","3 ","-","yes","PRE","","44","Ok","A","1","1","A","A","A","A","","1","5:19","60","0","Ok","B","1","1","A","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","62","-2","Ok","B","1","1","A","A","A","A","","2 - Re Insp.","50","+2","Ok","B","1","2","A","A","A","A","","1","3","55","+5","Ok","B","2","2","A","A","A","B","","3 - Re Insp.","","","","","","","","","","","0"],["313","42","GARBETTA COSTANZA","FISE4833/Y","Valle d'Aosta","TASHUNKA WITKA","17233A","4","----------------------------------","1 - 0","07:00:28","8:54:21","1:54:20","14,693","8:56:37","2:16","14,408","1:56:37","14,408","2 ","9:36:36 [+03:59'']","yes","11:30:56","","2 - 0","09:36:53","11:29:55","1:53:18","14,827","11:32:09","2:14","14,541","03:52:09","14,474","2 ","12:12:08 [+19:52'']","yes","14:05:26","","3 - 0","12:12:30","14:04:46 [+28:34'']","1:52:37","14.915","14:10:53","6:07","14.915","05:44:47","14.61","4 ","-","yes","PRE","","40","Ok","A","1","1","A","A","A","A","","1","2:16","56","-4","Ok","B","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","59","0","Ok","B","1","1","B","A","A","A","","2 - Re Insp.","51","-7","Ok","A","1","1","A","A","A","A","","1","3","52","+12","Ok","B","2","2","B","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["316","45","GALLI VALENTINA","FISE32947/B","Emilia Romagna","ZIRU DE ILOI","34782B/AN","5","----------------------------------","1 - 0","07:00:26","8:55:54","1:55:53","14,497","8:58:21","2:27","14,197","1:58:21","14,197","5 ","9:38:20 [+05:43'']","yes","11:34:13","","2 - 0","09:38:33","11:31:20","1:52:59","14,869","11:34:03","2:43","14,519","03:54:03","14,356","4 ","12:14:02 [+21:46'']","yes","14:07:01","","3 - 0","12:14:19","14:07:56 [+31:44'']","1:53:53","14.751","14:16:30","8:33","14.751","05:47:57","14.48","5 ","-","yes","PRE","","48","Ok","A","1","1","A","A","A","A","","1","2:27","53","-1","Ok","A","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","58","+4","Ok","B","1","1","A","A","A","A","","2 - Re Insp.","51","+1","Ok","A","1","1","B","A","A","A","","1","3","60","0","Ok","A","1","2","A","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["320","105","CAMPAGNONI GIACOMINO","50545196","LOMBARDIA","ANTO DI GALLURA","49022B","6","----------------------------------","1 - 0","07:00:21","8:56:05","1:56:04","14,473","8:58:12","2:07","14,214","1:58:12","14,214","4 ","9:38:11 [+05:34'']","yes","11:34:16","","2 - 0","09:38:27","11:31:34","1:53:22","14,819","11:33:47","2:12","14,536","03:53:47","14,373","3 ","12:13:46 [+21:30'']","yes","14:07:08","","3 - 0","12:14:01","14:10:37 [+34:25'']","1:56:50","14.378","14:12:45","2:08","14.378","05:50:37","14.37","6 ","-","yes","PRE","","40","Ok","A","1","1","A","A","A","A","","1","2:07","58","-2","Ok","A","2","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","61","-1","Ok","A","1","1","A","A","A","A","","2 - Re Insp.","51","-1","Ok","A","1","1","A","A","A","A","","1","3","59","-1","Ok","B","2","1","A","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["305","34","CASALENA GABRIELE","FISE63355/A","Valle d'Aosta","NIHAL TAOUY","24719A","7","----------------------------------","1 - 0","07:00:33","8:56:12","1:56:11","14,459","9:00:50","4:39","13,904","2:00:50","13,904","7 ","9:40:49 [+08:12'']","yes","11:37:01","","2 - 0","09:41:06","11:31:51","1:51:01","15,133","11:39:10","7:18","14,198","03:59:10","14,050","8 ","12:19:09 [+26:53'']","yes","14:10:10","","3 - 0","12:19:35","14:26:04 [+49:52'']","2:06:54","13.237","14:39:27","13:23","13.237","06:06:04","13.76","7 ","-","yes","PRE","","52","Ok","A","1","1","A","A","A","A","","1","4:39","63","-3","Ok","B","1","2","A","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","56","-2","Ok","A","1","1","A","A","A","A","","2 - Re Insp.","50","0","Ok","B","1","1","B","A","A","A","","1","3","58","+2","Ok","B","1","1","B","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["309","38","PATRIA ADRIANO","007173/A","Piemonte","AMETYST DELLE ROSE","29210T","8","----------------------------------","1 - 0","07:00:37","9:01:02","2:01:01","13,882","9:04:54","3:52","13,451","2:04:54","13,451","11 ","9:44:53 [+12:16'']","yes","11:45:55","","2 - 0","09:45:20","11:48:51","2:03:56","13,554","11:59:06","10:15","12,519","04:19:06","12,968","10 ","12:39:05 [+46:49'']","yes","14:43:02","","3 - 0","12:39:27","14:46:27 [+1:10:15'']","2:07:21","13.191","14:53:35","7:07","13.191","06:26:27","13.04","8 ","-","yes","PRE","","36","Ok","A","1","1","A","A","A","A","","1","3:52","61","-1","Ok","A","1","1","A","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","62","+2","Ok","A","1","1","A","A","A","A","","2 - Re Insp.","45","+1","Ok","A","1","1","A","A","A","A","","1","3","56","0","Ok","A","1","1","B","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["314","43","BARMASSE CELINE","FISE6146/Y","Valle d'Aosta","RAMSES","01130Y","9","----------------------------------","1 - 0","07:00:30","9:03:23","2:03:22","13,616","9:08:19","4:55","13,094","2:08:19","13,094","12 ","9:48:18 [+15:41'']","yes","11:51:41","","2 - 0","09:48:38","11:54:51","2:06:32","13,276","12:02:03","7:11","12,563","04:22:03","12,823","11 ","12:42:02 [+49:46'']","yes","14:48:34","","3 - 0","12:43:04","15:15:39 [+1:39:27'']","2:33:36","10.937","15:30:32","14:53","10.937","06:55:39","12.12","9 ","-","yes","PRE","","56","Ok","A","1","1","A","A","A","A","","1","4:55","55","0","Ok","A","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","58","-10","Ok","A","1","2","B","A","A","A","","2 - Re Insp.","","0","","","","","","","","","","0","3","64","0","Ok","A","1","1","A","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["315","44","VASSALLO CHIARA","FISE22400/C","Piemonte","SHEITAN","04406C","10","----------------------------------","1 - 0","07:00:34","8:54:18","1:54:17","14,699","8:56:51","2:33","14,378","1:56:51","14,378","3 ","9:36:50 [+04:13'']","yes","11:31:08","","2 - 0","09:37:08","11:45:40","2:08:48","13,043","11:48:35","2:55","12,754","04:08:35","13,517","9 ","12:28:34 [+36:18'']","yes","14:37:22","","3 - 0","12:29:30","15:31:47 [+1:55:35'']","3:03:12","09.170","15:34:02","2:15","09.170","07:11:47","11.67","10 ","-","yes","PRE","","32","Ok","A","1","1","A","A","A","A","","1","2:33","54","-2","Ok","B","2","1","A","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","62","-6","Ok","A","1","1","A","A","A","A","","2 - Re Insp.","51","-3","Ok","A","1","2","A","A","A","A","","1","3","59","-1","Ok","A","1","1","A","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["317","46","LUSTRISSY ALESSIA","FISE5950/Y","Valle d'Aosta","EDUARDO","01062Y","5","----------------------------------","1 - 0","07:00:32","8:56:10","1:56:09","14,463","8:59:01","2:51","14,117","1:59:01","14,117","6 ","9:39:00 [+06:23'']","yes","11:35:10","","2 - 0","09:39:14","11:31:48","1:52:47","14,894","11:34:09","2:21","14,591","03:54:09","14,350","5 ","12:14:08 [+21:52'']","yes","14:06:56","","3 - 0","12:14:20","14:08:01","1:53:52","14.752","14:15:25","7:23","14.752","05:48:02","14.48","","FTQ-GA","","PRE","","42","Ok","A","1","1","A","A","A","A","","1","2:51","64","0","Ok","A","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","58","+6","Ok","B","1","1","B","A","A","B","","2 - Re Insp.","51","0","Ok","A","1","1","A","A","A","A","","1","3","59","0","Ok","A","1","2","A","A","A","C","","3 - Re Insp.","","","","","","","","","","","0"],["310","39","TORRE CATERINA","FISE6015/C","Piemonte","KP CASSIOPEA","05247S/AN","10","----------------------------------","1 - 0","07:00:40","9:01:04","2:01:03","13,878","9:04:50","3:46","13,460","2:04:50","13,460","10 ","9:44:49 [+12:12'']","yes","11:45:52","","2 - 0","09:45:18","11:48:52","2:04:02","13,543","11:51:13","2:21","13,292","04:11:13","13,375","","FTQ-GA []","yes","14:35:15","","3 - 0","","","","","","","","","","","","","PRE","","44","Ok","A","1","1","A","A","A","A","","1","3:46","64","-4","Ok","B","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","48","0","Ok","B","1","1","A","A","A","A","","2 - Re Insp.","58","-14","Ok","A","1","1","A","A","A","C","","1","3","","0","OK","","","","","","","","","3 - Re Insp.","","","","","","","","","","","0"],["319","48","BOFFITO MIRKO","008194/A","Piemonte","ANIMOSO","04766C","13","----------------------------------","1 - 0","07:00:45","9:14:07","2:14:06","12,528","9:17:54","3:47","12,184","2:17:54","12,184","13 ","9:57:53 [+25:16'']","yes","12:11:59","","2 - 0","09:58:18","12:40:29","2:42:35","10,333","12:43:58","3:29","10,116","05:03:58","11,054","","RET","","16:06:32","","3 - 0","","","","","","","","","","","","","PRE","","40","Ok","A","1","1","A","A","A","A","","1","3:47","60","0","Ok","B","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","57","-1","Ok","B","1","2","A","A","A","A","","2 - Re Insp.","46","+6","Ok","B","1","1","A","A","A","A","","1","3","","0","OK","","","","","","","","","3 - Re Insp.","","","","","","","","","","","0"]],$N=["BIB","ID","DisplayName","[ID_FISE_CAVALIERE]","if([CLUB]>0;[CLUB];[NATION.IOCNAME])","[Horse]","[ID_FISE_CAVALLO]","Switch([AfterRide 3 anelli]>0;[AfterRide 3 anelli];[AfterRide2]>0;[AfterRide2];[AfterRide1]>0;[AfterRide1])",'"----------------------------------"','"1" & " - " & [_1_KM]',"Partenza 1","TIME3","TIME6","Media arrivo 1","TIME4","TIME5","Media in vet 1","TIME7","TIME10",'if([AfterRide1]>0;[AfterRide1]& " ";"")',`Switch([Elimination_Gait_1]=1;[EC1];[T12]>0;[TIME12]) & if([Pass_1]=1;" ["& GapTimeTop(4;11;"-";"+HH:mm:ss''") &"]")`,'if([Pass_1]=1;"yes")',"TIME16"," ",'"2" & " - " & [_2_KM]',"Partenza 2","Arrivo 2","TIME35","TIME39","TIME33","TIME34","TIME40","TIME37","Average 2",'if([AfterRide2]>0;[AfterRide2]& " ";"")',`Switch([Elimination_Gait_2]=1;[EC2];[T42]>0;[TIME42]) & if([Pass_2]=1;" ["& GapTimeTop(33;12;"-";"+HH:mm:ss''") &"]")`,'if([Pass_2]=1;"yes")',"TIME46","",'"3" & " - " & [_3_KM]',"Partenza 3",`Arrivo 3 & if([Pass_3]=1;" ["& GapTimeTop(52;1;"";"+HH:mm:ss''") &"]")`,"Tempo arrivo 3","Media arrivo 3","In vet 3","Recovery 3","TIME59","Total time 3 anelli","TIME65",'if([AfterRide 3 anelli]>0 and [Pass_3]=1;[AfterRide 3 anelli]& " ";"")','Switch([Elimination_Gait_3]=1;[EC3];[T62]>0;[TIME62];[Pass_3]=1;"-")','if([Pass_3]=1;"yes")','"PRE"','""',"Heart_Rate","Respiro","Mucous","Capillar_Refill","Skin","Gut_Sounds","Girth_Back_Whiters","Muscle_Tone","Gait","Vet",'"1"',"TIME5 ","Heart_Rate_1",'IF([T14]>0 ;"+"&[T14];[T14])',"Respiro_1","Mucous_1","Capillar_Refill_1","Skin_1","Gut_Sounds_1","Girth_Back_Whiters_1","Muscle_Tone_1","Gait_1","Vet_1",'"1 - Re Insp."',"Heart_Rate_1_RI","Respiro_1_RI","Mucous_1_RI","Capillar_Refill_1_RI","Skin_1_RI","Gut_Sounds_1_RI","Girth_Back_Whiters_1_RI","Muscle_Tone_1_RI","Gait_1_RI","Vet_1_RI","if([Riesame_1]=1;1;0)",'"2"',"Heart_Rate_2",'IF([T44]>0 ;"+"&[T44];[T44])',"Respiro_2","Mucous_2","Capillar_Refill_2","Skin_2","Gut_Sounds_2","Girth_Back_Whiters_2","Muscle_Tone_2","Gait_2","Vet_2",'"2 - Re Insp."',"Heart_Rate_2_RI",'IF([T47]>0 ;"+"&[T47];[T47])',"Respiro_2_RI","Mucous_2_RI","Capillar_Refill_2_RI","Skin_2_RI","Gut_Sounds_2_RI","Girth_Back_Whiters_2_RI","Muscle_Tone_2_RI","Gait_2_RI","Vet_2_RI","if([Riesame_2]=1;1;0)",'"3"',"Heart_Rate_3",'IF([T67]>0 ;"+"&[T67];[T67])',"Respiro_3","Mucous_3","Capillar_Refill_3","Skin_3","Gut_Sounds_3","Girth_Back_Whiters_3","Muscle_Tone_3","Gait_3","Vet_3",'"3 - Re Insp."',"Heart_Rate_3_RI","Respiro_3_RI","Mucous_3_RI","Capillar_Refill_3_RI","Skin_3_RI","Gut_Sounds_3_RI","Girth_Back_Whiters_3_RI","Muscle_Tone_3_RI","Gait_3_RI","Vet_3_RI","if([Riesame_3]=1;1;0)"],HN=null,WN={List:BN,Data:zN,DataFields:$N,GroupFilters:HN};let At=[{id:"1",name:"Test Sprint Race",eventID:"345604",location:"Tuscany Hills",startTime:"2025-07-31T05:00:00Z",endTime:"2025-07-31T22:00:00Z",subscriptionDeadline:"2025-7-10T23:59:59Z",backgroundImage:""},{id:"27",name:"Mountain Challenge",eventID:"340001",location:"Alpine Region",startTime:"2024-12-20T07:00:00Z",endTime:"2024-12-20T18:00:00Z",subscriptionDeadline:"2024-12-15T23:59:59Z",backgroundImage:""},{id:"26",name:"28 Trofeo Les Grandes Montagnes (2)",eventID:"340002",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:""},{id:"25",name:"MASTER ENERGY CUP (2)",eventID:"340003",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:""},{id:"24",name:"MASTER ENERGY CUP (1)",eventID:"340004",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:""},{id:"23",name:"28 Trofeo Les Grandes Montagnes (1)",eventID:"340005",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"22",name:"Endurance horse Show Pony",eventID:"340006",location:"Samorin (SVK)",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"21",name:"Endurance horse Show Pony",eventID:"340007",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"20",name:"Autumn Classic",eventID:"340008",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"19",name:"Autumn Classic",eventID:"340009",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"18",name:"Autumn Classic",eventID:"340010",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"17",name:"Autumn Classic",eventID:"340011",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"16",name:"Autumn Classic",eventID:"340420",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"15",name:"Autumn Classic",eventID:"340501",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"14",name:"Autumn Classic",eventID:"341453",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"13",name:"Autumn Classic",eventID:"341520",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"12",name:"Autumn Classic",eventID:"341665",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"11",name:"Autumn Classic",eventID:"342379",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"10",name:"Autumn Classic",eventID:"342741",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"9",name:"Autumn Classic",eventID:"343452",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"8",name:"Autumn Classic",eventID:"343526",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"7",name:"Autumn Classic",eventID:"343879",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"6",name:"Autumn Classic",eventID:"343880",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"5",name:"Autumn Classic",eventID:"343882",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"4",name:"Autumn Classic",eventID:"342379",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"3",name:"Autumn Classic",eventID:"345604",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2025-7-27T17:00:00Z",subscriptionDeadline:"2025-7-27T17T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"2",name:"Autumn Classic",eventID:"349041",location:"countryside",startTime:"2025-08-23T09:00:00Z",endTime:"2025-08-23T17:00:00Z",subscriptionDeadline:"2025-08-23T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}];const lx=[{id:"1",name:"BELLAGENTE CLAUDIO",nationality:"ITA",club:"OFENA BOSANA",region:"Emilia Romagna",fiseId:"424",horseId:"1",horseName:"THUNDER BOLT",position:1,totalTime:"6:13:18",phases:[{phase:1,km:40,startTime:"07:54:00",arrivalTime:"15:15:09",loopTime:"2:01:07",speed:13.89,inTime:"9:55:08",recoveryTime:"1:52",phaseSpeed:13.87,rideTime:"9:57:00",rank:1,gap:"00:00:00"}],veterinaryChecks:[{phase:"PRE",heartRate:30,respiration:"Ok",mucous:"A",capillaryRefill:"1",skin:"1",gutSounds:"A",girth:"A",muscleTone:"A",gait:"A",veterinary:"Ok"}]}],GN=[{id:"1",name:"THUNDER BOLT",fiseId:"H001",age:8,breed:"Arabian",owner:"Claudio Bellagente",results:[{eventId:"1",eventName:"Summer Sprint Race",date:"2024-12-15",position:1,riderId:"1",riderName:"BELLAGENTE CLAUDIO"}]}],KN=[{id:"1",name:"CEI3* 160",distance:160,description:"160km endurance race with 3 phases"},{id:"2",name:"CEI3* 140",distance:140,description:"140km endurance race with 3 phases"}];function Wi(t){return t.forEach(e=>{e.description="",e.categories=[],new Date(e.endTime).getTime()>new Date().getTime()&&new Date(e.startTime).getTime()<new Date().getTime()?e.status="live":new Date(e.endTime).getTime()<new Date().getTime()?e.status="finished":e.status="upcoming"}),t}function Rc(t){return t.forEach(e=>{if(e.backgroundImage==""){const n=ux(),r=e.location.length%n.length;e.backgroundImage=n[r].url}}),t}const Gi=async t=>{const e="eventsData",n=localStorage.getItem(e);if(n)try{let r=JSON.parse(n);if(r&&r.length>0)return r=Wi(r),r=Rc(r),r}catch(r){console.warn("Failed to parse stored events from localStorage, will fetch from API.",r)}try{const r=t.endsWith("/")?t+"events":t+"/events",s=await fetch(r);if(!s.ok)throw new Error("Failed to fetch events from API");let i=await s.json();i=Wi(i),i=Rc(i);try{localStorage.setItem(e,JSON.stringify(i))}catch(o){console.warn("Failed to save events to localStorage.",o)}return i}catch(r){console.error("Error fetching events:",r);let s=Wi(At);s=Rc(s);try{localStorage.setItem(e,JSON.stringify(s))}catch(i){console.warn("Failed to save fallback events to localStorage.",i)}return s}},qN=async(t,e)=>{try{var n=t+"events";(e!=""||e!==void 0||e!=null)&&(n+="/"+e);const i=await fetch(n);if(!i.ok)throw new Error("Failed to fetch live data");var r=await i.json(),s=Wi([r]);return s[0]}catch{var s=Wi(At);return s.find(o=>o.id===e)||null}},QN=async()=>(await new Promise(t=>setTimeout(t,500)),lx),YN=async()=>(await new Promise(t=>setTimeout(t,500)),GN),XN=async()=>(await new Promise(t=>setTimeout(t,300)),KN),f0=async(t,e)=>{await new Promise(n=>setTimeout(n,300)),console.log("apiUrl",t);try{const n=await fetch(t+"livedata/"+e);if(!n.ok)throw new Error("Failed to fetch live data");return await n.json()}catch(n){return console.error("Error fetching live data:",n),JN()}},JN=()=>WN,ZN=async(t,e)=>(await new Promise(n=>setTimeout(n,400)),lx.filter(n=>n.id==="1")),eC=async(t,e)=>{const n={id:e.id,name:e.name,location:e.location||"TBD",status:"upcoming",categories:[],startTime:e.startTime,endTime:e.endTime,subscriptionDeadline:e.subscriptionDeadline||new Date(new Date(e.startTime).getTime()-432e6).toISOString(),backgroundImage:e.backgroundImage};At.push(n),localStorage.setItem("mockEvents",JSON.stringify(At)),await new Promise(s=>setTimeout(s,300));try{var r=t+"events";if(!(await fetch(r,{method:"POST",body:JSON.stringify(n)})).ok)throw new Error("Request failed")}catch(s){console.log("ERROR: couldn't save event",s)}return n},tC=async(t,e)=>{const n=At.findIndex(r=>r.id===t);if(n===-1)throw new Error("Event not found");return At[n]={...At[n],...e},localStorage.setItem("mockEvents",JSON.stringify(At)),await new Promise(r=>setTimeout(r,300)),At[n]},nC=async t=>{const e=At.findIndex(n=>n.id===t);return e===-1?!1:(At.splice(e,1),localStorage.setItem("mockEvents",JSON.stringify(At)),await new Promise(n=>setTimeout(n,300)),!0)},ux=()=>[{name:"alain-moreau",url:"/event_backgrounds/alain-moreau-unsplash.jpg"},{name:"bird-eye-venue",url:"/event_backgrounds/bird-eye-venue-1280x720.jpg"},{name:"dallas-reedy",url:"/event_backgrounds/dallas-reedy-unsplash.jpg"},{name:"daniel-sanchez",url:"/event_backgrounds/daniel-sanchez-unsplash.jpg"},{name:"elena-rabkina",url:"/event_backgrounds/elena-rabkina-unsplash.jpg"},{name:"helena-lopes",url:"/event_backgrounds/helena-lopes-unsplash.jpg"},{name:"jeff-griffith",url:"/event_backgrounds/jeff-griffith-1-nsplash.jpg"},{name:"jeff-griffith",url:"/event_backgrounds/jeff-griffith-unsplash.jpg"},{name:"julia-joppien",url:"/event_backgrounds/julia-joppien-unsplash.jpg"},{name:"keith-luke",url:"/event_backgrounds/keith-luke-unsplash.jpg"},{name:"SUMMER_SPIRIT_RACE_1",url:"/event_backgrounds/SUMMER_SPIRIT_RACE_1.jpg"},{name:"violeta-pencheva",url:"/event_backgrounds/violeta-pencheva-12dXKDujs40-unsplash.jpg"}],rC=()=>{const{apiUrl:t}=Qr(),[e,n]=L.useState([]),[r,s]=L.useState([]),[i,o]=L.useState(!0),[l,u]=L.useState(""),[d,p]=L.useState("all");return L.useEffect(()=>{(async()=>{try{const g=await Gi(t);g.sort((T,b)=>new Date(b.startTime).getTime()-new Date(T.startTime).getTime()),console.log(g),n(g),s(g)}catch(g){console.error("Error loading events:",g)}finally{o(!1)}})()},[]),L.useEffect(()=>{let m=e;l&&(m=m.filter(g=>g.name.toLowerCase().includes(l.toLowerCase())||g.location.toLowerCase().includes(l.toLowerCase()))),d!=="all"&&(m=m.filter(g=>g.status===d)),m.sort((g,T)=>g.status==="live"&&T.status!=="live"?-1:T.status==="live"&&g.status!=="live"?1:new Date(T.startTime).getTime()-new Date(g.startTime).getTime()),s(m)},[e,l,d]),i?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(m=>c.jsx("div",{className:"h-80 bg-gray-200 dark:bg-gray-700 rounded-lg"},m))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Horse Racing Events"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Discover upcoming and past endurance racing events"})]}),c.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(_u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Search events...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:l,onChange:m=>u(m.target.value)})]}),c.jsxs("div",{className:"relative",children:[c.jsx(J_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsxs("select",{className:"pl-10 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:d,onChange:m=>p(m.target.value),children:[c.jsx("option",{value:"all",children:"All Events"}),c.jsx("option",{value:"live",children:"Live"}),c.jsx("option",{value:"upcoming",children:"Upcoming"}),c.jsx("option",{value:"finished",children:"Finished"})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(m=>c.jsx(ax,{event:m},m.id))}),r.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No events found matching your criteria."})})]})},sC=({apiUrl:t,eventID:e})=>{const[n,r]=L.useState(null),[s,i]=L.useState([]),[o,l]=L.useState(!0),[u,d]=L.useState(null),[p,m]=L.useState("position"),[g,T]=L.useState(30);L.useEffect(()=>{const _=async()=>{if(!t){try{l(!0),d(null);const S=await f0("mock","123");S&&(r(S),b(S))}catch{d("Failed to load data")}finally{l(!1)}return}try{l(!0),d(null);const S=await f0(t,e);S&&(r(S),b(S))}catch(S){d("Failed to fetch live data"),console.error("Error fetching live data:",S)}finally{l(!1)}};_();const I=setInterval(_,3e4),D=setInterval(()=>{T(S=>S<=1?30:S-1)},1e3);return()=>{clearInterval(I),clearInterval(D)}},[t]),L.useEffect(()=>{if(s.length>0){const _=[...s].sort((I,D)=>{switch(p){case"position":return parseInt(I.rank)-parseInt(D.rank);case"time":return I.totalTime.localeCompare(D.totalTime);case"name":return I.name.localeCompare(D.name);default:return 0}});i(_)}},[p]);const b=_=>{const I=_.Data.map(D=>{const S=(B,w=0,v=1)=>{const x=_.List.Fields.map((k,R)=>({label:k.Label,index:R})).filter(k=>k.label===B).map(k=>k.index);return x.length>w?D[x[w]+v]??"":""};return{bib:S("Bib",0,-1),name:S("RIDER NAME",0,2).toLowerCase().split(" ").map(B=>B.charAt(0).toUpperCase()+B.slice(1)).join(" "),nationality:S("FLAG"),horse:S("HORSE NAME"),rank:S("Main rank"),totalTime:S("Ride Time"),phases:[{phase:"1",gap:S("Start",0),phaseKm:S("Phase Km",0),arrival:S("Arrival",0),loopSpeed:S("Loop Speed",0),loopTime:S("Loop Time",0),inTime:S("In Time",0),recoveryTime:S("Recovery Time",0),phaseSpeed:S("Phase Speed",0),rideTime:S("Ride Time",0),rideSpeed:S("Ride Speed",0),rank:S("Rank",0).replace(/[^a-z0-9]+/gi,""),startPhase:S("Start phase",0),ready4nextphase:S("Ready to next phase",0)==="yes",phaseInProgress:S("Ready to next phase",0)==="",estimatedTimeArrival:S("Extimated time arrival",0),estimatedLoopTime:S("Extimated loop time",0)},{phase:"2",gap:S("Start",1,0),phaseKm:S("Phase Km",1,0),startPhase:S("Start phase",1,0),arrival:S("Arrival",1,0),loopSpeed:S("Loop Speed",1,0),loopTime:S("Loop Time",1,0),inTime:S("In Time",1,0),recoveryTime:S("Recovery Time",1,0),phaseSpeed:S("Phase Speed",1,0),rideTime:S("Ride Time",1,0),rideSpeed:S("Ride Speed",1,0),rank:S("Rank",1,0).replace(/[^a-z0-9]+/gi,""),ready4nextphase:S("Ready to next phase",1,0)==="yes",phaseInProgress:S("Ready to next phase",1,0)==="",estimatedTimeArrival:S("Extimated time arrival",1,0),estimatedLoopTime:S("Extimated loop time",1,0)},{phase:"3",gap:S("Start",2,-1),phaseKm:S("Phase Km",2,-1),startPhase:S("Start phase",2,-1),arrival:S("Arrival",2,-1),loopSpeed:S("Loop Speed",2,-1),loopTime:S("Loop Time",2,-1),inTime:S("In Time",2,-1),recoveryTime:S("Recovery Time",2,-1),phaseSpeed:S("Phase Speed",2,-1),rideTime:S("Ride Time",2,-1),rideSpeed:S("Ride Speed",2,-1),rank:S("Rank",2,-1).replace(/[^a-z0-9]+/gi,""),ready4nextphase:S("Ready to next phase",2,-1)==="yes",phaseInProgress:S("Ready to next phase",2,-1)==="",estimatedTimeArrival:S("Extimated time arrival",2,-1),estimatedLoopTime:S("Extimated loop time",2,-1)}],veterinary:[{phase:"PRE",recoveryTimeVet:S("Recovery Time Vet",0,-4),heartRate:S("Heart Rate",0,-4),recIndex:S("Rec. Index",0,-4),respiration:S("Resp.",0,-4),mucous:S("Mucous",0,-4),capRefill:S("Cap. Refill",0,-4),skin:S("Skin",0,-4),gutSound:S("Gut Sounds",0,-4),girthBackWhiters:S("Girth Back Whiters",0,-4),muscleTone:S("Muscle Tone",0,-4),gait:S("Gait",0,-4),veterinary:S("Veterinary",0,-4),RI:S("R.I.",0,-4)},{phase:"1",recoveryTimeVet:S("Recovery Time Vet",1,-7),heartRate:S("Heart Rate",1,-7),recIndex:S("Rec. Index",1,-7),respiration:S("Resp.",1,-7),mucous:S("Mucous",1,-7),capRefill:S("Cap. Refill",1,-7),skin:S("Skin",1,-7),gutSound:S("Gut Sounds",1,-7),girthBackWhiters:S("Girth Back Whiters",1,-7),muscleTone:S("Muscle Tone",1,-7),gait:S("Gait",1,-7),veterinary:S("Veterinary",1,-7),RI:S("R.I.",1,-7)},{phase:"2",recoveryTimeVet:S("Recovery Time Vet",2,3),heartRate:S("Heart Rate",2,3),recIndex:S("Rec. Index",2,3),respiration:S("Resp.",2,3),mucous:S("Mucous",2,3),capRefill:S("Cap. Refill",2,3),skin:S("Skin",2,3),gutSound:S("Gut Sounds",2,3),girthBackWhiters:S("Girth Back Whiters",2,3),muscleTone:S("Muscle Tone",2,3),gait:S("Gait",2,3),veterinary:S("Veterinary",2,3),RI:S("R.I.",2,3)},{phase:"3",heartRate:S("Heart Rate",3,13),recIndex:S("Rec. Index",3,13),respiration:S("Resp.",3,13),mucous:S("Mucous",3,13),capRefill:S("Cap. Refill",3,13),skin:S("Skin",3,13),gutSound:S("Gut Sounds",3,13),girthBackWhiters:S("Girth Back Whiters",3,13),muscleTone:S("Muscle Tone",3,13),gait:S("Gait",3,13),veterinary:S("Veterinary",3,13),RI:S("R.I.",3,13)}]}});console.log("riders",I),i(I)};if(u)return c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:c.jsx("div",{className:"text-center text-red-600 dark:text-red-400",children:c.jsxs("p",{children:["Error loading live data: ",u]})})});if(!n||s.length===0)return c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:c.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[c.jsx(IN,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No live race data available"}),c.jsx("p",{className:"text-sm mt-2",children:"Configure the live API URL in settings to see real-time results"})]})});const N=7,j=2*Math.PI*N;function E(_){const I=_/30,D=j*(1-I);return c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("div",{className:"relative w-8 h-8",children:[c.jsxs("svg",{className:"w-8 h-8 absolute top-0 left-0 -rotate-90",viewBox:"0 0 32 32",children:[c.jsx("circle",{cx:"16",cy:"16",r:N,stroke:"currentColor",strokeWidth:"2",fill:"none",className:"opacity-30"}),c.jsx("circle",{cx:"16",cy:"16",r:N,stroke:"red",strokeWidth:"2",fill:"none",strokeDasharray:j,strokeDashoffset:D,className:"transition-all duration-1000 ease-linear"})]}),c.jsx("div",{className:"absolute top-1/2 left-1/2 w-3 h-3 bg-red-500 rounded-full animate-pulse",style:{transform:"translate(-50%, -50%)"}})]}),c.jsx("span",{className:"text-sm",children:"LIVE"})]})}return c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold",children:n.List.HeadLine1}),c.jsxs("p",{className:"text-emerald-100 text-sm",children:[s.length," riders competing"]})]}),E(g)]})}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 border-b border-gray-200 dark:border-gray-600",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sort by:"}),c.jsx("div",{className:"flex space-x-2",children:[{key:"position",label:"Position"},{key:"time",label:"Time"},{key:"name",label:"Name"}].map(({key:_,label:I})=>c.jsx("button",{onClick:()=>m(_),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${p===_?"bg-emerald-600 text-white":"bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500"}`,children:I},_))})]})}),c.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(_=>c.jsx(iC,{rider:_},_.bib))})]})},iC=Gt.memo(({rider:t})=>{var u;const[e,n]=L.useState(!1),[r,s]=L.useState(!1),i=parseInt(t.rank)||0;(u=t.phases[0])!=null&&u.gap;const o=d=>d===1?"text-yellow-500":d===2?"text-gray-400":d===3?"text-amber-600":"text-gray-600 dark:text-gray-400",l=d=>{const p=t.bib+"Position"+t.name.replace(/[^a-zA-Z0-9]/g,"");return d<=3?c.jsx("div",{className:`flex items-center space-x-1 ${o(d)}`,children:c.jsx("span",{className:"font-bold text-lg",children:d})},p):c.jsx("div",{className:"flex items-center space-x-1 text-gray-600 dark:text-gray-400",children:c.jsx("span",{className:"font-bold text-lg",children:d})},p)};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${i<=3?"bg-gradient-to-r from-yellow-50 to-transparent dark:from-yellow-900/20":""}`,children:c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"flex items-center space-x-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"POS"}),l(i)]})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx(Z_,{className:"w-4 h-4 text-gray-400"}),c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white font-upper ",children:t.name})]}),c.jsx("p",{id:"horse name",className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:t.horse}),c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.bib}),c.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["(",t.nationality,")"]})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-6",children:[c.jsxs("div",{className:"text-right min-w-0",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"STARTED"}),c.jsx("div",{className:"flex items-center space-x-1",children:c.jsx("span",{className:"text-sm font-mono font-semibold text-gray-900 dark:text-white",children:t.phases.map((d,p)=>{if(d.phaseInProgress||t.phases.length==p+1)return d.startPhase})||t.phases[2].startPhase})})]}),c.jsxs("div",{className:"items-center",children:[c.jsx("button",{onClick:()=>s(!0),className:"flex items-center space-x-1 mt-1 px-3 py-1.5 border border-blue-300 text-blue-600 hover:bg-blue-50 text-xs rounded-lg transition-colors bg-transparent",children:c.jsx(h0,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>n(!0),className:"flex items-center space-x-1 mt-1 px-3 py-1.5 border border-red-400 text-red-600 hover:bg-red-50 text-xs rounded-lg transition-colors bg-transparent",children:c.jsx(Sc,{className:"w-3 h-3"})})]})]})]}),c.jsx(oC,{phases:t.phases})]})}),r&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[c.jsx(h0,{className:"w-5 h-5 mr-2 text-blue-600"}),"Phase Results - ",t.name]}),c.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"p-4",children:c.jsx("div",{className:"space-y-4",children:t.phases.map((d,p)=>c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400 text-lg",children:["Phase ",d.phase]}),c.jsx("span",{className:"text-lg font-mono bg-gray-100 dark:bg-gray-600 px-3 py-1 rounded",children:d.loopTime})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-gray-600 dark:text-gray-300",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Start:"}),c.jsx("span",{className:"font-mono",children:d.startPhase})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Arrival:"}),c.jsx("span",{className:"font-mono",children:d.arrival})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"In Time:"}),c.jsx("span",{className:"font-mono",children:d.inTime})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Recovery:"}),c.jsx("span",{className:"font-mono",children:d.recoveryTime})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Phase Speed:"}),c.jsxs("span",{className:"font-mono",children:[d.phaseSpeed," km/h"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Rank:"}),c.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:d.rank})]})]})]},"modal-phase"+p))})})]})}),e&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"hidden lg:block fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[c.jsx(Sc,{className:"w-5 h-5 mr-2 text-red-600"}),"Veterinary Checks - ",t.name]}),c.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"p-4",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-sm border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[c.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Phase"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"HR"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"RI"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Resp"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Mucous"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Cap"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Skin"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Gut"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Girth"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Muscle"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Gait"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Vet"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:t.veterinary.map((d,p)=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[c.jsx("td",{className:"px-3 py-2 font-semibold text-red-600 dark:text-red-400 border border-gray-300 dark:border-gray-600",children:d.phase}),c.jsx("td",{className:"px-3 py-2 text-center border border-gray-300 dark:border-gray-600",children:c.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-900 dark:text-white",children:[c.jsx(ex,{className:"w-4 h-4 text-red-500"}),c.jsx("span",{className:"font-mono font-semibold",children:d.heartRate})]})}),c.jsx("td",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:d.recIndex}),c.jsx("td",{className:"px-3 py-2 text-center text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:d.respiration}),c.jsx("td",{className:"px-3 py-2 text-center text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:d.mucous}),c.jsx("td",{className:"px-3 py-2 text-center text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:d.capRefill}),c.jsx("td",{className:`px-3 py-2 text-center font-semibold border border-gray-300 dark:border-gray-600 ${d.skin==="1"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.skin}),c.jsx("td",{className:`px-3 py-2 text-center font-semibold border border-gray-300 dark:border-gray-600 ${d.gutSound==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.gutSound}),c.jsx("td",{className:`px-3 py-2 text-center font-semibold border border-gray-300 dark:border-gray-600 ${d.girthBackWhiters==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.girthBackWhiters}),c.jsx("td",{className:`px-3 py-2 text-center font-semibold border border-gray-300 dark:border-gray-600 ${d.muscleTone==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.muscleTone}),c.jsx("td",{className:`px-3 py-2 text-center font-semibold border border-gray-300 dark:border-gray-600 ${d.gait==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.gait}),c.jsx("td",{className:"px-3 py-2 text-center text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:d.veterinary})]},"modal-vet"+p))})]})})})]})}),c.jsx("div",{className:"block lg:hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[c.jsx(Sc,{className:"w-5 h-5 mr-2 text-red-600"}),"Veterinary Checks - ",t.name]}),c.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"p-4",children:c.jsx("div",{className:"overflow-x-auto w-full",children:c.jsxs("table",{className:"min-w-max table-fixed border-collapse text-sm w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[c.jsx("th",{className:"px-3 py-2 border text-left font-bold text-gray-800 dark:text-gray-200",children:"Phase"}),t.veterinary.map((d,p)=>c.jsx("th",{className:"px-3 py-2 border text-center font-bold text-red-600 dark:text-red-400",children:d.phase},"phase-head-"+p))]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white flex items-center space-x-1",children:c.jsx("span",{children:"HR"})}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center font-mono text-gray-800 dark:text-white",children:d.heartRate},"hr-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"RI"}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center",children:d.recIndex},"ri-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Resp"}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center",children:d.respiration},"resp-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Mucous"}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center",children:d.mucous},"mucous-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Cap"}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center",children:d.capRefill},"cap-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Skin"}),t.veterinary.map((d,p)=>c.jsx("td",{className:`px-3 py-2 border text-center font-semibold ${d.skin==="1"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.skin},"skin-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Gut"}),t.veterinary.map((d,p)=>c.jsx("td",{className:`px-3 py-2 border text-center font-semibold ${d.gutSound==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.gutSound},"gut-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Girth"}),t.veterinary.map((d,p)=>c.jsx("td",{className:`px-3 py-2 border text-center font-semibold ${d.girthBackWhiters==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.girthBackWhiters},"girth-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Muscle"}),t.veterinary.map((d,p)=>c.jsx("td",{className:`px-3 py-2 border text-center font-semibold ${d.muscleTone==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.muscleTone},"muscle-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Gait"}),t.veterinary.map((d,p)=>c.jsx("td",{className:`px-3 py-2 border text-center font-semibold ${d.gait==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.gait},"gait-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Vet"}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center",children:d.veterinary},"vet-"+p))]})]})]})})})]})})]})]})}),oC=({phases:t})=>{const e=t.length;return c.jsxs("div",{className:"w-full mt-2",children:[c.jsx("div",{className:"flex items-center justify-between w-full",children:t.map((n,r)=>{const s=n.ready4nextphase,i=n.phaseInProgress;return c.jsxs(Gt.Fragment,{children:[c.jsx("div",{className:`flex-1 h-2 mx-1 rounded-full transition-all duration-500 ${s?"bg-green-500":i?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`}),r<e&&c.jsx("div",{className:"relative",children:c.jsxs("div",{className:`w-6 h-6 rounded-full border-2 transition-all duration-500 flex items-center justify-center ${s?"bg-green-500 border-green-500":i?"bg-blue-500 border-blue-500":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"}`,children:[s&&c.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),i&&!s&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})]})})]},`phase-${r}`)})}),c.jsx("div",{className:"flex justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:t.map((n,r)=>c.jsx("div",{className:"flex-1 text-center",children:c.jsxs("span",{children:["Phase ",r+1]})},`label-${r}`))})]})},aC=()=>{const{id:t}=Ov(),[e,n]=L.useState(null),[r,s]=L.useState([]),[i,o]=L.useState(!0),{liveApiUrl:l}=Qr();return L.useEffect(()=>{(async()=>{if(t)try{const[d,p]=await Promise.all([qN(t),XN()]);n(d),s(p)}catch(d){console.error("Error loading event data:",d)}finally{o(!1)}})()},[t]),i?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-700 rounded-lg"})]})}):e?c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"mb-6",children:c.jsxs(ke,{to:"/",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400 mb-4",children:[c.jsx(X_,{className:"w-4 h-4"}),c.jsx("span",{children:"Back to Events"})]})}),c.jsxs("div",{className:"h-96 bg-cover bg-center rounded-lg relative mb-8",style:{backgroundImage:`url(${e.backgroundImage})`},children:[c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{overflowX:"clip"},children:c.jsxs("div",{className:"text-center text-white",children:[c.jsx("div",{className:"mb-4",children:c.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${e.status==="live"?"bg-red-500 animate-pulse":e.status==="upcoming"?"bg-emerald-500":"bg-gray-500"}`,children:e.status.toUpperCase()})}),c.jsx("h1",{className:"text-4xl font-bold mb-4",children:e.name}),c.jsxs("div",{className:"p-6 flex items-center justify-center space-x-6 text-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(nx,{className:"w-5 h-5"}),c.jsx("span",{children:e.location})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(vu,{className:"w-5 h-5"}),c.jsx("span",{children:new Date(e.startTime).toLocaleDateString()})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(jf,{className:"w-5 h-5"}),c.jsx("span",{children:new Date(e.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2",children:[e.status==="live"&&l&&c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Live Results"}),c.jsx(sC,{apiUrl:l,eventID:e.id})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Event Details"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:e.description}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Start Time"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:new Date(e.startTime).toLocaleString()})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"End Time"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:new Date(e.endTime).toLocaleString()})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Location"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.location})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Registration Deadline"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:new Date(e.subscriptionDeadline).toLocaleString()})]})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Categories"}),c.jsx("div",{className:"space-y-3",children:e.categories.map(u=>{const d=r.find(p=>p.name===u);return c.jsx(ke,{to:`/events/${e.id}/categories/${u}`,className:"block p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:u}),d&&c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[d.distance,"km - ",d.description]})]}),c.jsx(Zs,{className:"w-5 h-5 text-amber-500"})]})},u)})})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Quick Links"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("a",{href:"https://t-tracksystem.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400",children:[c.jsx(Lf,{className:"w-4 h-4"}),c.jsx("span",{children:"T-track System"})]}),c.jsxs(ke,{to:"/riders",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400",children:[c.jsx(Df,{className:"w-4 h-4"}),c.jsx("span",{children:"View All Riders"})]})]})]})]})]})]}):c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Event Not Found"}),c.jsx(ke,{to:"/",className:"text-emerald-600 hover:text-emerald-700 dark:text-emerald-400",children:"Return to Events"})]})})},lC=()=>{const{eventId:t,categoryName:e}=Ov(),[n,r]=L.useState([]),[s,i]=L.useState(!0);return L.useEffect(()=>{(async()=>{if(!(!t||!e))try{const l=await ZN(t,e);r(l)}catch(l){console.error("Error loading riders:",l)}finally{i(!1)}})()},[t,e]),s?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"space-y-4",children:[1,2,3].map(o=>c.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-lg"},o))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs(ke,{to:`/events/${t}`,className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400 mb-4",children:[c.jsx(X_,{className:"w-4 h-4"}),c.jsx("span",{children:"Back to Event"})]}),c.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[e," Results"]})]}),c.jsx("div",{className:"space-y-6",children:n.map(o=>c.jsx(uC,{rider:o},o.id))}),n.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No riders found for this category."})})]})},uC=({rider:t})=>{const[e,n]=L.useState(!1);return c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[t.position&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Zs,{className:"w-6 h-6 text-amber-500"}),c.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[t.position,""]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.name}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[t.club," - ",t.region]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Horse: ",t.horseName]}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Nationality: ",t.nationality]}),t.totalTime&&c.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[c.jsx(jf,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"font-mono text-sm",children:t.totalTime})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs(ke,{to:`/riders/${t.id}`,className:"flex items-center space-x-1 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400",children:[c.jsx($o,{className:"w-4 h-4"}),c.jsx("span",{children:"View Profile"})]})}),c.jsx("button",{onClick:()=>n(!e),className:"px-4 py-2 text-sm bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:e?"Show Less":"Show Details"})]}),e&&c.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Phase Results"}),c.jsx("div",{className:"space-y-3",children:t.phases.map((r,s)=>c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"font-medium",children:["Phase ",r.phase," (",r.km,"km)"]}),c.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.speed," km/h"]})]}),c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[c.jsxs("div",{children:["Start: ",r.startTime]}),c.jsxs("div",{children:["Arrival: ",r.arrivalTime]}),c.jsxs("div",{children:["Loop Time: ",r.loopTime]}),c.jsxs("div",{children:["Recovery: ",r.recoveryTime]}),r.rank&&c.jsxs("div",{children:["Rank: ",r.rank]})]})]},s))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Veterinary Checks"}),c.jsx("div",{className:"space-y-3",children:t.veterinaryChecks.map((r,s)=>c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-medium",children:r.phase}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ex,{className:"w-4 h-4 text-red-500"}),c.jsxs("span",{className:"text-sm",children:[r.heartRate," bpm"]})]})]}),c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[c.jsxs("div",{children:["Status: ",r.veterinary]}),c.jsxs("div",{children:["Respiration: ",r.respiration]}),c.jsxs("div",{children:["Mucous: ",r.mucous]}),c.jsxs("div",{children:["Gait: ",r.gait]}),r.recoveryTime&&c.jsxs("div",{children:["Recovery: ",r.recoveryTime]})]})]},s))})]})]})})]})})},p0=()=>{const[t,e]=L.useState([]),[n,r]=L.useState([]),[s,i]=L.useState(!0),[o,l]=L.useState("");return L.useEffect(()=>{(async()=>{try{const d=await QN();e(d),r(d)}catch(d){console.error("Error loading riders:",d)}finally{i(!1)}})()},[]),L.useEffect(()=>{if(o){const u=t.filter(d=>d.name.toLowerCase().includes(o.toLowerCase())||d.club.toLowerCase().includes(o.toLowerCase())||d.region.toLowerCase().includes(o.toLowerCase()));r(u)}else r(t)},[t,o]),s?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(u=>c.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700 rounded-lg"},u))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Riders"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Browse rider profiles and their racing history"})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"relative",children:[c.jsx(_u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Search riders...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:o,onChange:u=>l(u.target.value)})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(u=>c.jsx(cC,{rider:u},u.id))}),n.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No riders found matching your search."})})]})},cC=({rider:t})=>c.jsx(ke,{to:`/riders/${t.id}`,className:"block",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-12 h-12 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:c.jsx($o,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.fifeId})]})]}),t.position&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Zs,{className:"w-4 h-4 text-amber-500"}),c.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.position,""]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Z_,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.nationality})]}),c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.jsxs("div",{children:["Club: ",t.club]}),c.jsxs("div",{children:["Region: ",t.region]}),c.jsxs("div",{children:["Horse: ",t.horseName]})]})]})]})}),m0=()=>{const[t,e]=L.useState([]),[n,r]=L.useState([]),[s,i]=L.useState(!0),[o,l]=L.useState("");return L.useEffect(()=>{(async()=>{try{const d=await YN();e(d),r(d)}catch(d){console.error("Error loading horses:",d)}finally{i(!1)}})()},[]),L.useEffect(()=>{if(o){const u=t.filter(d=>{var p,m;return d.name.toLowerCase().includes(o.toLowerCase())||((p=d.breed)==null?void 0:p.toLowerCase().includes(o.toLowerCase()))||((m=d.owner)==null?void 0:m.toLowerCase().includes(o.toLowerCase()))});r(u)}else r(t)},[t,o]),s?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(u=>c.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700 rounded-lg"},u))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Horses"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Browse horse profiles and their racing achievements"})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"relative",children:[c.jsx(_u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Search horses...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:o,onChange:u=>l(u.target.value)})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(u=>c.jsx(dC,{horse:u},u.id))}),n.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No horses found matching your search."})})]})},dC=({horse:t})=>c.jsx(ke,{to:`/horses/${t.id}`,className:"block",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[c.jsx("div",{className:"h-48 bg-cover bg-center",style:{backgroundImage:"url(https://images.pexels.com/photos/1996327/pexels-photo-1996327.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1)"},children:c.jsx("div",{className:"h-full bg-black bg-opacity-30 flex items-end",children:c.jsxs("div",{className:"p-4 text-white",children:[c.jsx("h3",{className:"text-xl font-bold",children:t.name}),c.jsxs("p",{className:"text-sm opacity-90",children:[t.breed,"  ",t.age," years"]})]})})}),c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.jsxs("div",{children:["Owner: ",t.owner]}),c.jsxs("div",{children:["FISE ID: ",t.fifeId]})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Zs,{className:"w-4 h-4 text-amber-500"}),c.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.results.length," races"]})]})]}),t.results.length>0&&c.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(vu,{className:"w-4 h-4"}),c.jsxs("span",{children:["Last race: ",t.results[0].eventName]})]}),c.jsxs("div",{className:"mt-1",children:["Position: ",t.results[0].position," with ",t.results[0].riderName]})]})})]})]})}),hC=()=>{const{apiUrl:t}=Qr(),[e,n]=L.useState([]),[r,s]=L.useState([]),[i,o]=L.useState(!0),[l,u]=L.useState(""),[d,p]=L.useState("all");L.useEffect(()=>{(async()=>{try{const b=(await Gi(t)).filter(N=>N.status==="finished");n(b),s(b)}catch(T){console.error("Error loading events:",T)}finally{o(!1)}})()},[]),L.useEffect(()=>{let g=e;l&&(g=g.filter(T=>T.name.toLowerCase().includes(l.toLowerCase())||T.location.toLowerCase().includes(l.toLowerCase()))),d!=="all"&&(g=g.filter(T=>new Date(T.startTime).getFullYear().toString()===d)),g.sort((T,b)=>new Date(b.startTime).getTime()-new Date(T.startTime).getTime()),s(g)},[e,l,d]);const m=Array.from(new Set(e.map(g=>new Date(g.startTime).getFullYear().toString()))).sort((g,T)=>parseInt(T)-parseInt(g));return i?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(g=>c.jsx("div",{className:"h-80 bg-gray-200 dark:bg-gray-700 rounded-lg"},g))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Race History"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Browse past endurance racing events and results"})]}),c.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(_u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Search events...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:l,onChange:g=>u(g.target.value)})]}),c.jsxs("div",{className:"relative",children:[c.jsx(J_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsxs("select",{className:"pl-10 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:d,onChange:g=>p(g.target.value),children:[c.jsx("option",{value:"all",children:"All Years"}),m.map(g=>c.jsx("option",{value:g,children:g},g))]})]})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:e.length}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Events"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:m.length}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Years of Racing"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.reduce((g,T)=>g+T.categories.length,0)}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Categories"})]})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(g=>c.jsx(ax,{event:g},g.id))}),r.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Zs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No events found matching your criteria."})]})]})},fC=()=>{const{darkMode:t,toggleDarkMode:e,isPWA:n,apiUrl:r,liveApiKey:s,setLiveApiKey:i,historyApiKey:o,setHistoryApiKey:l,eventApiKey:u,setEventApiKey:d}=Qr(),{user:p,userProfile:m,logout:g,isAdmin:T}=Pf(),[b,N]=Gt.useState(!1),[j,E]=Gt.useState([]),[_,I]=Gt.useState(!1),[D,S]=Gt.useState(null),[B,w]=L.useState(5),[v,x]=Gt.useState({id:"",name:"",startTime:"",endTime:"",subscriptionDeadline:"",backgroundImage:"",location:"",description:""}),[k,R]=Gt.useState(!1),[C,A]=Gt.useState("");L.useEffect(()=>{(async()=>{try{const Z=await Gi(r);Z.sort((le,ye)=>new Date(ye.startTime).getTime()-new Date(le.startTime).getTime()),console.log(Z),E(Z)}catch(Z){console.error("Error loading events:",Z)}finally{R(!1)}})()},[]);const Ve=ux(),rn=async()=>{try{await g()}catch(M){console.error("Error logging out:",M)}},vr=()=>{S(null),x({id:"",name:"",startTime:"",endTime:"",backgroundImage:Ve[0].url,location:"",description:""}),I(!0),A("")},Pt=M=>{S(M),x({id:M.id,name:M.name,startTime:M.startTime.slice(0,16),endTime:M.endTime.slice(0,16),backgroundImage:M.backgroundImage,location:M.location,description:""}),A(""),I(!0)},$=async()=>{if(!v.id||!v.name||!v.startTime){A("Please fill in all required fields");return}R(!0),A("");try{const M={...v,startTime:new Date(v.startTime).toISOString(),endTime:new Date(v.endTime).toISOString(),subscriptionDeadline:new Date(v.subscriptionDeadline).toISOString()};D?await tC(D.id,M):await eC(r,M);const Z=await Gi(r);E(Z),I(!1)}catch(M){A(M.message||"Failed to save event")}finally{R(!1)}},Q=async M=>{if(confirm("Are you sure you want to delete this event?"))try{await nC(M),E(Gi(r))}catch(Z){console.error("Failed to delete event:",Z)}};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure your T-track experience"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Account"}),p?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:T?c.jsx(Ca,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}):c.jsx($o,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:(m==null?void 0:m.displayName)||p.email}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[T?"Administrator":"User","  ",p.email]})]})]}),c.jsxs("button",{onClick:rn,className:"flex items-center space-x-2 text-red-600 hover:text-red-700 dark:text-red-400",children:[c.jsx(tx,{className:"w-4 h-4"}),c.jsx("span",{children:"Sign Out"})]})]}):c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Sign in to access additional features and settings."}),c.jsx("button",{onClick:()=>N(!0),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors",children:"Sign In"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Appearance"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[t?c.jsx(rx,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):c.jsx(ix,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Dark Mode"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t?"Currently using dark theme":"Currently using light theme"})]})]}),c.jsx("button",{onClick:e,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 ${t?"bg-emerald-600":"bg-gray-200"}`,children:c.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t?"translate-x-5":"translate-x-0"}`})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Display Mode"}),c.jsxs("div",{className:"flex items-center space-x-3",children:[n?c.jsx(sx,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}):c.jsx(CN,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:n?"PWA Mode":"Browser Mode"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n?"Running as installed PWA with bottom navigation":"Running in browser with top navigation"})]})]})]}),T&&c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Live API Configuration"}),c.jsx("div",{className:"mb-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ca,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),c.jsx("span",{className:"text-sm text-amber-800 dark:text-amber-200 font-medium",children:"Administrator Only"})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"liveApiKey",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Live API Key"}),c.jsx("input",{type:"url",id:"liveApiKey",value:s,onChange:M=>i(M.target.value),placeholder:"https://api.t-tracksystem.com/live",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Enter the API key for the live race data API endpoint"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"eventApiKey",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event API Key"}),c.jsx("input",{type:"url",id:"eventApiKey",value:u,onChange:M=>d(M.target.value),placeholder:"https://api.t-tracksystem.com/live",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Enter the API key for the event race data API endpoint"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"historyApiKey",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"History API Keys"}),c.jsx("input",{type:"url",id:"historyApiKey",value:o,onChange:M=>l(M.target.value),placeholder:"https://api.t-tracksystem.com/live",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Enter the API key for the history data API endpoint"})]}),c.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:c.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[c.jsx("strong",{children:"Note:"})," The API should return JSON data in the format used by the T-track system. Live data will be refreshed every 30 seconds during events."]})})]})]}),T&&c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Event Management"}),c.jsxs("button",{onClick:vr,className:"flex items-center space-x-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors",children:[c.jsx(PN,{className:"w-4 h-4"}),c.jsx("span",{children:"Create Event"})]})]}),c.jsx("div",{className:"mb-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ca,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),c.jsx("span",{className:"text-sm text-amber-800 dark:text-amber-200 font-medium",children:"Administrator Only"})]})}),j.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[c.jsx(vu,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No custom events created yet"}),c.jsx("p",{className:"text-sm",children:'Click "Create Event" to add your first event'})]}):c.jsx("div",{className:"space-y-3",children:j.map(M=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("img",{src:M.backgroundImage,alt:M.name,className:"w-16 h-10 object-cover rounded",onError:Z=>{Z.currentTarget.onerror=null,Z.currentTarget.src="/no-image-icon-6.png"}}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:M.name}),c.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[c.jsx("span",{children:new Date(M.startTime).toLocaleDateString()}),c.jsx("span",{children:M.location})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>Pt(M),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400",children:c.jsx(DN,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>Q(M.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400",children:c.jsx(ON,{className:"w-4 h-4"})})]})]},M.id))})]}),!T&&p&&c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 text-center",children:[c.jsx(Ca,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Administrator Access Required"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Event management and API configuration settings are only available to administrators."})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"About"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"T-track Horse Racing PWA"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"A progressive web application for tracking horse racing events, riders, and results."})]}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("a",{href:"https://t-tracksystem.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400",children:[c.jsx(Lf,{className:"w-4 h-4"}),c.jsx("span",{children:"T-track System"})]})})]})]})]})]}),c.jsx(ox,{isOpen:b,onClose:()=>N(!1)}),_&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:D?"Edit Event":"Create New Event"}),c.jsx("button",{onClick:()=>I(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-6 h-6"})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[C&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:c.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:C})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event ID *"}),c.jsx("input",{type:"number",inputMode:"numeric",maxLength:7,value:v.id,onChange:M=>{const Z=M.target.value.replace(/\D/g,"");x({...v,id:Z})},disabled:!!D,placeholder:"e.g., 340001",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600"}),D&&c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Event ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Name *"}),c.jsx("input",{type:"text",value:v.name,onChange:M=>x({...v,name:M.target.value}),placeholder:"e.g., Summer Endurance Championship",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Time *"}),c.jsx("input",{type:"datetime-local",value:v.startTime,onChange:M=>{x({...v,startTime:M.target.value,endTime:M.target.value})},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Time *"}),c.jsx("input",{type:"datetime-local",value:v.endTime,onChange:M=>x({...v,endTime:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Submission Deadline *"}),c.jsx("input",{type:"datetime-local",value:v.subscriptionDeadline,onChange:M=>x({...v,subscriptionDeadline:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),c.jsx("input",{type:"text",value:v.location,onChange:M=>x({...v,location:M.target.value}),placeholder:"e.g., Tuscany Hills, Italy",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cover Image"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Ve.slice(0,B).map(M=>c.jsxs("button",{type:"button",onClick:()=>x({...v,backgroundImage:M.url}),className:`relative rounded-lg overflow-hidden border-2 transition-all ${v.backgroundImage===M.url?"border-emerald-500 ring-2 ring-emerald-200 dark:ring-emerald-800":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[c.jsx("img",{src:M.url,alt:M.name,className:"w-full h-20 object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-end",children:c.jsx("span",{className:"text-white text-xs p-2 font-medium",children:M.name})}),v.backgroundImage===M.url&&c.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},M.url))}),B<Ve.length&&c.jsx("div",{className:"mt-3 flex justify-center",children:c.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-600 text-white rounded shadow hover:bg-gray-700 transition",onClick:()=>w(M=>Math.min(M+5,Ve.length)),children:"Load More Images"})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),c.jsx("textarea",{value:v.description,onChange:M=>x({...v,description:M.target.value}),rows:3,placeholder:"Brief description of the event...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]})]}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),c.jsx("button",{onClick:$,disabled:k,className:"flex items-center space-x-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:k?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Saving..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(jN,{className:"w-4 h-4"}),c.jsx("span",{children:D?"Update Event":"Create Event"})]})})]})]})})]})};function pC(){return c.jsx(wN,{children:c.jsx(gI,{children:c.jsxs(hI,{children:[c.jsx(FN,{children:c.jsxs(iI,{children:[c.jsx(Ht,{path:"/",element:c.jsx(rC,{})}),c.jsx(Ht,{path:"/events/:id",element:c.jsx(aC,{})}),c.jsx(Ht,{path:"/events/:eventId/categories/:categoryName",element:c.jsx(lC,{})}),c.jsx(Ht,{path:"/riders",element:c.jsx(p0,{})}),c.jsx(Ht,{path:"/riders/:id",element:c.jsx(p0,{})}),c.jsx(Ht,{path:"/horses",element:c.jsx(m0,{})}),c.jsx(Ht,{path:"/horses/:id",element:c.jsx(m0,{})}),c.jsx(Ht,{path:"/history",element:c.jsx(hC,{})}),c.jsx(Ht,{path:"/settings",element:c.jsx(fC,{})})]})}),c.jsx(UN,{})]})})})}Rv(document.getElementById("root")).render(c.jsx(L.StrictMode,{children:c.jsx(pC,{})}));
