function Bx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function zx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var m0={exports:{}},Fl={},g0={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wo=Symbol.for("react.element"),$x=Symbol.for("react.portal"),Hx=Symbol.for("react.fragment"),Wx=Symbol.for("react.strict_mode"),Gx=Symbol.for("react.profiler"),Kx=Symbol.for("react.provider"),qx=Symbol.for("react.context"),Qx=Symbol.for("react.forward_ref"),Yx=Symbol.for("react.suspense"),Xx=Symbol.for("react.memo"),Zx=Symbol.for("react.lazy"),Op=Symbol.iterator;function Jx(t){return t===null||typeof t!="object"?null:(t=Op&&t[Op]||t["@@iterator"],typeof t=="function"?t:null)}var y0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v0=Object.assign,_0={};function $s(t,e,n){this.props=t,this.context=e,this.refs=_0,this.updater=n||y0}$s.prototype.isReactComponent={};$s.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function x0(){}x0.prototype=$s.prototype;function Kd(t,e,n){this.props=t,this.context=e,this.refs=_0,this.updater=n||y0}var qd=Kd.prototype=new x0;qd.constructor=Kd;v0(qd,$s.prototype);qd.isPureReactComponent=!0;var Mp=Array.isArray,w0=Object.prototype.hasOwnProperty,Qd={current:null},E0={key:!0,ref:!0,__self:!0,__source:!0};function T0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)w0.call(e,r)&&!E0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:wo,type:t,key:i,ref:o,props:s,_owner:Qd.current}}function ew(t,e){return{$$typeof:wo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yd(t){return typeof t=="object"&&t!==null&&t.$$typeof===wo}function tw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vp=/\/+/g;function Bu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tw(""+t.key):e.toString(36)}function ba(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wo:case $x:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Bu(o,0):r,Mp(s)?(n="",t!=null&&(n=t.replace(Vp,"$&/")+"/"),ba(s,e,n,"",function(d){return d})):s!=null&&(Yd(s)&&(s=ew(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Vp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Mp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Bu(i,l);o+=ba(i,e,n,u,s)}else if(u=Jx(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Bu(i,l++),o+=ba(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function oa(t,e,n){if(t==null)return t;var r=[],s=0;return ba(t,r,"","",function(i){return e.call(n,i,s++)}),r}function nw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var at={current:null},Ca={transition:null},rw={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:Ca,ReactCurrentOwner:Qd};function I0(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:oa,forEach:function(t,e,n){oa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return oa(t,function(){e++}),e},toArray:function(t){return oa(t,function(e){return e})||[]},only:function(t){if(!Yd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=$s;J.Fragment=Hx;J.Profiler=Gx;J.PureComponent=Kd;J.StrictMode=Wx;J.Suspense=Yx;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rw;J.act=I0;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=v0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Qd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)w0.call(e,u)&&!E0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:wo,type:t.type,key:s,ref:i,props:r,_owner:o}};J.createContext=function(t){return t={$$typeof:qx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Kx,_context:t},t.Consumer=t};J.createElement=T0;J.createFactory=function(t){var e=T0.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:Qx,render:t}};J.isValidElement=Yd;J.lazy=function(t){return{$$typeof:Zx,_payload:{_status:-1,_result:t},_init:nw}};J.memo=function(t,e){return{$$typeof:Xx,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=Ca.transition;Ca.transition={};try{t()}finally{Ca.transition=e}};J.unstable_act=I0;J.useCallback=function(t,e){return at.current.useCallback(t,e)};J.useContext=function(t){return at.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return at.current.useDeferredValue(t)};J.useEffect=function(t,e){return at.current.useEffect(t,e)};J.useId=function(){return at.current.useId()};J.useImperativeHandle=function(t,e,n){return at.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return at.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return at.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return at.current.useMemo(t,e)};J.useReducer=function(t,e,n){return at.current.useReducer(t,e,n)};J.useRef=function(t){return at.current.useRef(t)};J.useState=function(t){return at.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return at.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return at.current.useTransition()};J.version="18.3.1";g0.exports=J;var L=g0.exports;const Dt=zx(L),sw=Bx({__proto__:null,default:Dt},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iw=L,ow=Symbol.for("react.element"),aw=Symbol.for("react.fragment"),lw=Object.prototype.hasOwnProperty,uw=iw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cw={key:!0,ref:!0,__self:!0,__source:!0};function k0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lw.call(e,r)&&!cw.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ow,type:t,key:i,ref:o,props:s,_owner:uw.current}}Fl.Fragment=aw;Fl.jsx=k0;Fl.jsxs=k0;m0.exports=Fl;var c=m0.exports,A0={exports:{}},Et={},S0={exports:{}},R0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,O){var Q=$.length;$.push(O);e:for(;0<Q;){var ge=Q-1>>>1,ue=$[ge];if(0<s(ue,O))$[ge]=O,$[Q]=ue,Q=ge;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var O=$[0],Q=$.pop();if(Q!==O){$[0]=Q;e:for(var ge=0,ue=$.length,ke=ue>>>1;ge<ke;){var sn=2*(ge+1)-1,on=$[sn],an=sn+1,ln=$[an];if(0>s(on,Q))an<ue&&0>s(ln,on)?($[ge]=ln,$[an]=Q,ge=an):($[ge]=on,$[sn]=Q,ge=sn);else if(an<ue&&0>s(ln,Q))$[ge]=ln,$[an]=Q,ge=an;else break e}}return O}function s($,O){var Q=$.sortIndex-O.sortIndex;return Q!==0?Q:$.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,m=null,g=3,S=!1,N=!1,P=!1,j=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I($){for(var O=n(d);O!==null;){if(O.callback===null)r(d);else if(O.startTime<=$)r(d),O.sortIndex=O.expirationTime,e(u,O);else break;O=n(d)}}function w($){if(P=!1,I($),!N)if(n(u)!==null)N=!0,vr(U);else{var O=n(d);O!==null&&Pt(w,O.startTime-$)}}function U($,O){N=!1,P&&(P=!1,E(v),v=-1),S=!0;var Q=g;try{for(I(O),m=n(u);m!==null&&(!(m.expirationTime>O)||$&&!R());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,g=m.priorityLevel;var ue=ge(m.expirationTime<=O);O=t.unstable_now(),typeof ue=="function"?m.callback=ue:m===n(u)&&r(u),I(O)}else r(u);m=n(u)}if(m!==null)var ke=!0;else{var sn=n(d);sn!==null&&Pt(w,sn.startTime-O),ke=!1}return ke}finally{m=null,g=Q,S=!1}}var B=!1,x=null,v=-1,T=5,k=-1;function R(){return!(t.unstable_now()-k<T)}function b(){if(x!==null){var $=t.unstable_now();k=$;var O=!0;try{O=x(!0,$)}finally{O?A():(B=!1,x=null)}}else B=!1}var A;if(typeof _=="function")A=function(){_(b)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,rn=ut.port2;ut.port1.onmessage=b,A=function(){rn.postMessage(null)}}else A=function(){j(b,0)};function vr($){x=$,B||(B=!0,A())}function Pt($,O){v=j(function(){$(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){N||S||(N=!0,vr(U))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var O=3;break;default:O=g}var Q=g;g=O;try{return $()}finally{g=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,O){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=g;g=$;try{return O()}finally{g=Q}},t.unstable_scheduleCallback=function($,O,Q){var ge=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ge+Q:ge):Q=ge,$){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Q+ue,$={id:p++,callback:O,priorityLevel:$,startTime:Q,expirationTime:ue,sortIndex:-1},Q>ge?($.sortIndex=Q,e(d,$),n(u)===null&&$===n(d)&&(P?(E(v),v=-1):P=!0,Pt(w,Q-ge))):($.sortIndex=ue,e(u,$),N||S||(N=!0,vr(U))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var O=g;return function(){var Q=g;g=O;try{return $.apply(this,arguments)}finally{g=Q}}}})(R0);S0.exports=R0;var dw=S0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw=L,xt=dw;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N0=new Set,Hi={};function Wr(t,e){Ns(t,e),Ns(t+"Capture",e)}function Ns(t,e){for(Hi[t]=e,t=0;t<e.length;t++)N0.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nc=Object.prototype.hasOwnProperty,fw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fp={},Up={};function pw(t){return Nc.call(Up,t)?!0:Nc.call(Fp,t)?!1:fw.test(t)?Up[t]=!0:(Fp[t]=!0,!1)}function mw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gw(t,e,n,r){if(e===null||typeof e>"u"||mw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xd=/[\-:]([a-z])/g;function Zd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xd,Zd);We[e]=new lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xd,Zd);We[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xd,Zd);We[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new lt(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jd(t,e,n,r){var s=We.hasOwnProperty(e)?We[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gw(e,n,s,r)&&(n=null),r||s===null?pw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Nn=hw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aa=Symbol.for("react.element"),os=Symbol.for("react.portal"),as=Symbol.for("react.fragment"),eh=Symbol.for("react.strict_mode"),bc=Symbol.for("react.profiler"),b0=Symbol.for("react.provider"),C0=Symbol.for("react.context"),th=Symbol.for("react.forward_ref"),Cc=Symbol.for("react.suspense"),Pc=Symbol.for("react.suspense_list"),nh=Symbol.for("react.memo"),On=Symbol.for("react.lazy"),P0=Symbol.for("react.offscreen"),Bp=Symbol.iterator;function hi(t){return t===null||typeof t!="object"?null:(t=Bp&&t[Bp]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,zu;function wi(t){if(zu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zu=e&&e[1]||""}return`
`+zu+t}var $u=!1;function Hu(t,e){if(!t||$u)return"";$u=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{$u=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wi(t):""}function yw(t){switch(t.tag){case 5:return wi(t.type);case 16:return wi("Lazy");case 13:return wi("Suspense");case 19:return wi("SuspenseList");case 0:case 2:case 15:return t=Hu(t.type,!1),t;case 11:return t=Hu(t.type.render,!1),t;case 1:return t=Hu(t.type,!0),t;default:return""}}function jc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case as:return"Fragment";case os:return"Portal";case bc:return"Profiler";case eh:return"StrictMode";case Cc:return"Suspense";case Pc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case C0:return(t.displayName||"Context")+".Consumer";case b0:return(t._context.displayName||"Context")+".Provider";case th:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nh:return e=t.displayName||null,e!==null?e:jc(t.type)||"Memo";case On:e=t._payload,t=t._init;try{return jc(t(e))}catch{}}return null}function vw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jc(e);case 8:return e===eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _w(t){var e=j0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function la(t){t._valueTracker||(t._valueTracker=_w(t))}function L0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=j0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ya(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lc(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function D0(t,e){e=e.checked,e!=null&&Jd(t,"checked",e,!1)}function Dc(t,e){D0(t,e);var n=ar(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oc(t,e.type,ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $p(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oc(t,e,n){(e!=="number"||Ya(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ei=Array.isArray;function _s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ar(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Ei(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ar(n)}}function O0(t,e){var n=ar(e.value),r=ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function M0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?M0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ua,V0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ua=ua||document.createElement("div"),ua.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ua.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xw=["Webkit","ms","Moz","O"];Object.keys(bi).forEach(function(t){xw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bi[e]=bi[t]})});function F0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||bi.hasOwnProperty(t)&&bi[t]?(""+e).trim():e+"px"}function U0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=F0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ww=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fc(t,e){if(e){if(ww[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Uc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bc=null;function rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zc=null,xs=null,ws=null;function Gp(t){if(t=Io(t)){if(typeof zc!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Hl(e),zc(t.stateNode,t.type,e))}}function B0(t){xs?ws?ws.push(t):ws=[t]:xs=t}function z0(){if(xs){var t=xs,e=ws;if(ws=xs=null,Gp(t),e)for(t=0;t<e.length;t++)Gp(e[t])}}function $0(t,e){return t(e)}function H0(){}var Wu=!1;function W0(t,e,n){if(Wu)return t(e,n);Wu=!0;try{return $0(t,e,n)}finally{Wu=!1,(xs!==null||ws!==null)&&(H0(),z0())}}function Gi(t,e){var n=t.stateNode;if(n===null)return null;var r=Hl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var $c=!1;if(wn)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){$c=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{$c=!1}function Ew(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Ci=!1,Xa=null,Za=!1,Hc=null,Tw={onError:function(t){Ci=!0,Xa=t}};function Iw(t,e,n,r,s,i,o,l,u){Ci=!1,Xa=null,Ew.apply(Tw,arguments)}function kw(t,e,n,r,s,i,o,l,u){if(Iw.apply(this,arguments),Ci){if(Ci){var d=Xa;Ci=!1,Xa=null}else throw Error(F(198));Za||(Za=!0,Hc=d)}}function Gr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function G0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kp(t){if(Gr(t)!==t)throw Error(F(188))}function Aw(t){var e=t.alternate;if(!e){if(e=Gr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Kp(s),t;if(i===r)return Kp(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function K0(t){return t=Aw(t),t!==null?q0(t):null}function q0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q0(t);if(e!==null)return e;t=t.sibling}return null}var Q0=xt.unstable_scheduleCallback,qp=xt.unstable_cancelCallback,Sw=xt.unstable_shouldYield,Rw=xt.unstable_requestPaint,Re=xt.unstable_now,Nw=xt.unstable_getCurrentPriorityLevel,sh=xt.unstable_ImmediatePriority,Y0=xt.unstable_UserBlockingPriority,Ja=xt.unstable_NormalPriority,bw=xt.unstable_LowPriority,X0=xt.unstable_IdlePriority,Ul=null,Qt=null;function Cw(t){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Ul,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Lw,Pw=Math.log,jw=Math.LN2;function Lw(t){return t>>>=0,t===0?32:31-(Pw(t)/jw|0)|0}var ca=64,da=4194304;function Ti(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function el(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ti(l):(i&=o,i!==0&&(r=Ti(i)))}else o=n&~s,o!==0?r=Ti(o):i!==0&&(r=Ti(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),s=1<<n,r|=t[n],e&=~s;return r}function Dw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ow(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ut(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=Dw(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Wc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z0(){var t=ca;return ca<<=1,!(ca&4194240)&&(ca=64),t}function Gu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Eo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function Mw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ut(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ih(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ae=0;function J0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ey,oh,ty,ny,ry,Gc=!1,ha=[],qn=null,Qn=null,Yn=null,Ki=new Map,qi=new Map,Vn=[],Vw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qp(t,e){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":Ki.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(e.pointerId)}}function pi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Io(e),e!==null&&oh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Fw(t,e,n,r,s){switch(e){case"focusin":return qn=pi(qn,t,e,n,r,s),!0;case"dragenter":return Qn=pi(Qn,t,e,n,r,s),!0;case"mouseover":return Yn=pi(Yn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ki.set(i,pi(Ki.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qi.set(i,pi(qi.get(i)||null,t,e,n,r,s)),!0}return!1}function sy(t){var e=Ar(t.target);if(e!==null){var n=Gr(e);if(n!==null){if(e=n.tag,e===13){if(e=G0(n),e!==null){t.blockedOn=e,ry(t.priority,function(){ty(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bc=r,n.target.dispatchEvent(r),Bc=null}else return e=Io(n),e!==null&&oh(e),t.blockedOn=n,!1;e.shift()}return!0}function Yp(t,e,n){Pa(t)&&n.delete(e)}function Uw(){Gc=!1,qn!==null&&Pa(qn)&&(qn=null),Qn!==null&&Pa(Qn)&&(Qn=null),Yn!==null&&Pa(Yn)&&(Yn=null),Ki.forEach(Yp),qi.forEach(Yp)}function mi(t,e){t.blockedOn===e&&(t.blockedOn=null,Gc||(Gc=!0,xt.unstable_scheduleCallback(xt.unstable_NormalPriority,Uw)))}function Qi(t){function e(s){return mi(s,t)}if(0<ha.length){mi(ha[0],t);for(var n=1;n<ha.length;n++){var r=ha[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qn!==null&&mi(qn,t),Qn!==null&&mi(Qn,t),Yn!==null&&mi(Yn,t),Ki.forEach(e),qi.forEach(e),n=0;n<Vn.length;n++)r=Vn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)sy(n),n.blockedOn===null&&Vn.shift()}var Es=Nn.ReactCurrentBatchConfig,tl=!0;function Bw(t,e,n,r){var s=ae,i=Es.transition;Es.transition=null;try{ae=1,ah(t,e,n,r)}finally{ae=s,Es.transition=i}}function zw(t,e,n,r){var s=ae,i=Es.transition;Es.transition=null;try{ae=4,ah(t,e,n,r)}finally{ae=s,Es.transition=i}}function ah(t,e,n,r){if(tl){var s=Kc(t,e,n,r);if(s===null)nc(t,e,r,nl,n),Qp(t,r);else if(Fw(s,t,e,n,r))r.stopPropagation();else if(Qp(t,r),e&4&&-1<Vw.indexOf(t)){for(;s!==null;){var i=Io(s);if(i!==null&&ey(i),i=Kc(t,e,n,r),i===null&&nc(t,e,r,nl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else nc(t,e,r,null,n)}}var nl=null;function Kc(t,e,n,r){if(nl=null,t=rh(r),t=Ar(t),t!==null)if(e=Gr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=G0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nl=t,null}function iy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nw()){case sh:return 1;case Y0:return 4;case Ja:case bw:return 16;case X0:return 536870912;default:return 16}default:return 16}}var Hn=null,lh=null,ja=null;function oy(){if(ja)return ja;var t,e=lh,n=e.length,r,s="value"in Hn?Hn.value:Hn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ja=s.slice(t,1<r?1-r:void 0)}function La(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fa(){return!0}function Xp(){return!1}function Tt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fa:Xp,this.isPropagationStopped=Xp,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),e}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uh=Tt(Hs),To=xe({},Hs,{view:0,detail:0}),$w=Tt(To),Ku,qu,gi,Bl=xe({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ch,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gi&&(gi&&t.type==="mousemove"?(Ku=t.screenX-gi.screenX,qu=t.screenY-gi.screenY):qu=Ku=0,gi=t),Ku)},movementY:function(t){return"movementY"in t?t.movementY:qu}}),Zp=Tt(Bl),Hw=xe({},Bl,{dataTransfer:0}),Ww=Tt(Hw),Gw=xe({},To,{relatedTarget:0}),Qu=Tt(Gw),Kw=xe({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),qw=Tt(Kw),Qw=xe({},Hs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Yw=Tt(Qw),Xw=xe({},Hs,{data:0}),Jp=Tt(Xw),Zw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eE[t])?!!e[t]:!1}function ch(){return tE}var nE=xe({},To,{key:function(t){if(t.key){var e=Zw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=La(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Jw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ch,charCode:function(t){return t.type==="keypress"?La(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?La(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rE=Tt(nE),sE=xe({},Bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),em=Tt(sE),iE=xe({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ch}),oE=Tt(iE),aE=xe({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),lE=Tt(aE),uE=xe({},Bl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cE=Tt(uE),dE=[9,13,27,32],dh=wn&&"CompositionEvent"in window,Pi=null;wn&&"documentMode"in document&&(Pi=document.documentMode);var hE=wn&&"TextEvent"in window&&!Pi,ay=wn&&(!dh||Pi&&8<Pi&&11>=Pi),tm=" ",nm=!1;function ly(t,e){switch(t){case"keyup":return dE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ls=!1;function fE(t,e){switch(t){case"compositionend":return uy(e);case"keypress":return e.which!==32?null:(nm=!0,tm);case"textInput":return t=e.data,t===tm&&nm?null:t;default:return null}}function pE(t,e){if(ls)return t==="compositionend"||!dh&&ly(t,e)?(t=oy(),ja=lh=Hn=null,ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ay&&e.locale!=="ko"?null:e.data;default:return null}}var mE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mE[t.type]:e==="textarea"}function cy(t,e,n,r){B0(r),e=rl(e,"onChange"),0<e.length&&(n=new uh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ji=null,Yi=null;function gE(t){wy(t,0)}function zl(t){var e=ds(t);if(L0(e))return t}function yE(t,e){if(t==="change")return e}var dy=!1;if(wn){var Yu;if(wn){var Xu="oninput"in document;if(!Xu){var sm=document.createElement("div");sm.setAttribute("oninput","return;"),Xu=typeof sm.oninput=="function"}Yu=Xu}else Yu=!1;dy=Yu&&(!document.documentMode||9<document.documentMode)}function im(){ji&&(ji.detachEvent("onpropertychange",hy),Yi=ji=null)}function hy(t){if(t.propertyName==="value"&&zl(Yi)){var e=[];cy(e,Yi,t,rh(t)),W0(gE,e)}}function vE(t,e,n){t==="focusin"?(im(),ji=e,Yi=n,ji.attachEvent("onpropertychange",hy)):t==="focusout"&&im()}function _E(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zl(Yi)}function xE(t,e){if(t==="click")return zl(e)}function wE(t,e){if(t==="input"||t==="change")return zl(e)}function EE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zt=typeof Object.is=="function"?Object.is:EE;function Xi(t,e){if(zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Nc.call(e,s)||!zt(t[s],e[s]))return!1}return!0}function om(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function am(t,e){var n=om(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=om(n)}}function fy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function py(){for(var t=window,e=Ya();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ya(t.document)}return e}function hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TE(t){var e=py(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fy(n.ownerDocument.documentElement,n)){if(r!==null&&hh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=am(n,i);var o=am(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IE=wn&&"documentMode"in document&&11>=document.documentMode,us=null,qc=null,Li=null,Qc=!1;function lm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qc||us==null||us!==Ya(r)||(r=us,"selectionStart"in r&&hh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Li&&Xi(Li,r)||(Li=r,r=rl(qc,"onSelect"),0<r.length&&(e=new uh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=us)))}function pa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cs={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionend:pa("Transition","TransitionEnd")},Zu={},my={};wn&&(my=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function $l(t){if(Zu[t])return Zu[t];if(!cs[t])return t;var e=cs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in my)return Zu[t]=e[n];return t}var gy=$l("animationend"),yy=$l("animationiteration"),vy=$l("animationstart"),_y=$l("transitionend"),xy=new Map,um="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(t,e){xy.set(t,e),Wr(e,[t])}for(var Ju=0;Ju<um.length;Ju++){var ec=um[Ju],kE=ec.toLowerCase(),AE=ec[0].toUpperCase()+ec.slice(1);hr(kE,"on"+AE)}hr(gy,"onAnimationEnd");hr(yy,"onAnimationIteration");hr(vy,"onAnimationStart");hr("dblclick","onDoubleClick");hr("focusin","onFocus");hr("focusout","onBlur");hr(_y,"onTransitionEnd");Ns("onMouseEnter",["mouseout","mouseover"]);Ns("onMouseLeave",["mouseout","mouseover"]);Ns("onPointerEnter",["pointerout","pointerover"]);Ns("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function cm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kw(r,e,void 0,t),t.currentTarget=null}function wy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;cm(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;cm(s,l,d),i=u}}}if(Za)throw t=Hc,Za=!1,Hc=null,t}function fe(t,e){var n=e[ed];n===void 0&&(n=e[ed]=new Set);var r=t+"__bubble";n.has(r)||(Ey(e,t,2,!1),n.add(r))}function tc(t,e,n){var r=0;e&&(r|=4),Ey(n,t,r,e)}var ma="_reactListening"+Math.random().toString(36).slice(2);function Zi(t){if(!t[ma]){t[ma]=!0,N0.forEach(function(n){n!=="selectionchange"&&(SE.has(n)||tc(n,!1,t),tc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ma]||(e[ma]=!0,tc("selectionchange",!1,e))}}function Ey(t,e,n,r){switch(iy(e)){case 1:var s=Bw;break;case 4:s=zw;break;default:s=ah}n=s.bind(null,e,n,t),s=void 0,!$c||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function nc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ar(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}W0(function(){var d=i,p=rh(n),m=[];e:{var g=xy.get(t);if(g!==void 0){var S=uh,N=t;switch(t){case"keypress":if(La(n)===0)break e;case"keydown":case"keyup":S=rE;break;case"focusin":N="focus",S=Qu;break;case"focusout":N="blur",S=Qu;break;case"beforeblur":case"afterblur":S=Qu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Ww;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=oE;break;case gy:case yy:case vy:S=qw;break;case _y:S=lE;break;case"scroll":S=$w;break;case"wheel":S=cE;break;case"copy":case"cut":case"paste":S=Yw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=em}var P=(e&4)!==0,j=!P&&t==="scroll",E=P?g!==null?g+"Capture":null:g;P=[];for(var _=d,I;_!==null;){I=_;var w=I.stateNode;if(I.tag===5&&w!==null&&(I=w,E!==null&&(w=Gi(_,E),w!=null&&P.push(Ji(_,w,I)))),j)break;_=_.return}0<P.length&&(g=new S(g,N,null,n,p),m.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==Bc&&(N=n.relatedTarget||n.fromElement)&&(Ar(N)||N[En]))break e;if((S||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,S?(N=n.relatedTarget||n.toElement,S=d,N=N?Ar(N):null,N!==null&&(j=Gr(N),N!==j||N.tag!==5&&N.tag!==6)&&(N=null)):(S=null,N=d),S!==N)){if(P=Zp,w="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=em,w="onPointerLeave",E="onPointerEnter",_="pointer"),j=S==null?g:ds(S),I=N==null?g:ds(N),g=new P(w,_+"leave",S,n,p),g.target=j,g.relatedTarget=I,w=null,Ar(p)===d&&(P=new P(E,_+"enter",N,n,p),P.target=I,P.relatedTarget=j,w=P),j=w,S&&N)t:{for(P=S,E=N,_=0,I=P;I;I=ns(I))_++;for(I=0,w=E;w;w=ns(w))I++;for(;0<_-I;)P=ns(P),_--;for(;0<I-_;)E=ns(E),I--;for(;_--;){if(P===E||E!==null&&P===E.alternate)break t;P=ns(P),E=ns(E)}P=null}else P=null;S!==null&&dm(m,g,S,P,!1),N!==null&&j!==null&&dm(m,j,N,P,!0)}}e:{if(g=d?ds(d):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var U=yE;else if(rm(g))if(dy)U=wE;else{U=_E;var B=vE}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=xE);if(U&&(U=U(t,d))){cy(m,U,n,p);break e}B&&B(t,g,d),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&Oc(g,"number",g.value)}switch(B=d?ds(d):window,t){case"focusin":(rm(B)||B.contentEditable==="true")&&(us=B,qc=d,Li=null);break;case"focusout":Li=qc=us=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,lm(m,n,p);break;case"selectionchange":if(IE)break;case"keydown":case"keyup":lm(m,n,p)}var x;if(dh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ls?ly(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(ay&&n.locale!=="ko"&&(ls||v!=="onCompositionStart"?v==="onCompositionEnd"&&ls&&(x=oy()):(Hn=p,lh="value"in Hn?Hn.value:Hn.textContent,ls=!0)),B=rl(d,v),0<B.length&&(v=new Jp(v,t,null,n,p),m.push({event:v,listeners:B}),x?v.data=x:(x=uy(n),x!==null&&(v.data=x)))),(x=hE?fE(t,n):pE(t,n))&&(d=rl(d,"onBeforeInput"),0<d.length&&(p=new Jp("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:d}),p.data=x))}wy(m,e)})}function Ji(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gi(t,n),i!=null&&r.unshift(Ji(t,i,s)),i=Gi(t,e),i!=null&&r.push(Ji(t,i,s))),t=t.return}return r}function ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Gi(n,i),u!=null&&o.unshift(Ji(n,u,l))):s||(u=Gi(n,i),u!=null&&o.push(Ji(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var RE=/\r\n?/g,NE=/\u0000|\uFFFD/g;function hm(t){return(typeof t=="string"?t:""+t).replace(RE,`
`).replace(NE,"")}function ga(t,e,n){if(e=hm(e),hm(t)!==e&&n)throw Error(F(425))}function sl(){}var Yc=null,Xc=null;function Zc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jc=typeof setTimeout=="function"?setTimeout:void 0,bE=typeof clearTimeout=="function"?clearTimeout:void 0,fm=typeof Promise=="function"?Promise:void 0,CE=typeof queueMicrotask=="function"?queueMicrotask:typeof fm<"u"?function(t){return fm.resolve(null).then(t).catch(PE)}:Jc;function PE(t){setTimeout(function(){throw t})}function rc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Qi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Qi(e)}function Xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Ws,eo="__reactProps$"+Ws,En="__reactContainer$"+Ws,ed="__reactEvents$"+Ws,jE="__reactListeners$"+Ws,LE="__reactHandles$"+Ws;function Ar(t){var e=t[Kt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[En]||n[Kt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pm(t);t!==null;){if(n=t[Kt])return n;t=pm(t)}return e}t=n,n=t.parentNode}return null}function Io(t){return t=t[Kt]||t[En],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Hl(t){return t[eo]||null}var td=[],hs=-1;function fr(t){return{current:t}}function pe(t){0>hs||(t.current=td[hs],td[hs]=null,hs--)}function de(t,e){hs++,td[hs]=t.current,t.current=e}var lr={},tt=fr(lr),ft=fr(!1),Lr=lr;function bs(t,e){var n=t.type.contextTypes;if(!n)return lr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pt(t){return t=t.childContextTypes,t!=null}function il(){pe(ft),pe(tt)}function mm(t,e,n){if(tt.current!==lr)throw Error(F(168));de(tt,e),de(ft,n)}function Ty(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,vw(t)||"Unknown",s));return xe({},n,r)}function ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lr,Lr=tt.current,de(tt,t),de(ft,ft.current),!0}function gm(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=Ty(t,e,Lr),r.__reactInternalMemoizedMergedChildContext=t,pe(ft),pe(tt),de(tt,t)):pe(ft),de(ft,n)}var hn=null,Wl=!1,sc=!1;function Iy(t){hn===null?hn=[t]:hn.push(t)}function DE(t){Wl=!0,Iy(t)}function pr(){if(!sc&&hn!==null){sc=!0;var t=0,e=ae;try{var n=hn;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hn=null,Wl=!1}catch(s){throw hn!==null&&(hn=hn.slice(t+1)),Q0(sh,pr),s}finally{ae=e,sc=!1}}return null}var fs=[],ps=0,al=null,ll=0,It=[],kt=0,Dr=null,fn=1,pn="";function Tr(t,e){fs[ps++]=ll,fs[ps++]=al,al=t,ll=e}function ky(t,e,n){It[kt++]=fn,It[kt++]=pn,It[kt++]=Dr,Dr=t;var r=fn;t=pn;var s=32-Ut(r)-1;r&=~(1<<s),n+=1;var i=32-Ut(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,fn=1<<32-Ut(e)+s|n<<s|r,pn=i+t}else fn=1<<i|n<<s|r,pn=t}function fh(t){t.return!==null&&(Tr(t,1),ky(t,1,0))}function ph(t){for(;t===al;)al=fs[--ps],fs[ps]=null,ll=fs[--ps],fs[ps]=null;for(;t===Dr;)Dr=It[--kt],It[kt]=null,pn=It[--kt],It[kt]=null,fn=It[--kt],It[kt]=null}var _t=null,vt=null,me=!1,Vt=null;function Ay(t,e){var n=St(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ym(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_t=t,vt=Xn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_t=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dr!==null?{id:fn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=St(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_t=t,vt=null,!0):!1;default:return!1}}function nd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rd(t){if(me){var e=vt;if(e){var n=e;if(!ym(t,e)){if(nd(t))throw Error(F(418));e=Xn(n.nextSibling);var r=_t;e&&ym(t,e)?Ay(r,n):(t.flags=t.flags&-4097|2,me=!1,_t=t)}}else{if(nd(t))throw Error(F(418));t.flags=t.flags&-4097|2,me=!1,_t=t}}}function vm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_t=t}function ya(t){if(t!==_t)return!1;if(!me)return vm(t),me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zc(t.type,t.memoizedProps)),e&&(e=vt)){if(nd(t))throw Sy(),Error(F(418));for(;e;)Ay(t,e),e=Xn(e.nextSibling)}if(vm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=Xn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=_t?Xn(t.stateNode.nextSibling):null;return!0}function Sy(){for(var t=vt;t;)t=Xn(t.nextSibling)}function Cs(){vt=_t=null,me=!1}function mh(t){Vt===null?Vt=[t]:Vt.push(t)}var OE=Nn.ReactCurrentBatchConfig;function yi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function va(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _m(t){var e=t._init;return e(t._payload)}function Ry(t){function e(E,_){if(t){var I=E.deletions;I===null?(E.deletions=[_],E.flags|=16):I.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=tr(E,_),E.index=0,E.sibling=null,E}function i(E,_,I){return E.index=I,t?(I=E.alternate,I!==null?(I=I.index,I<_?(E.flags|=2,_):I):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,I,w){return _===null||_.tag!==6?(_=dc(I,E.mode,w),_.return=E,_):(_=s(_,I),_.return=E,_)}function u(E,_,I,w){var U=I.type;return U===as?p(E,_,I.props.children,w,I.key):_!==null&&(_.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===On&&_m(U)===_.type)?(w=s(_,I.props),w.ref=yi(E,_,I),w.return=E,w):(w=Ba(I.type,I.key,I.props,null,E.mode,w),w.ref=yi(E,_,I),w.return=E,w)}function d(E,_,I,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=hc(I,E.mode,w),_.return=E,_):(_=s(_,I.children||[]),_.return=E,_)}function p(E,_,I,w,U){return _===null||_.tag!==7?(_=Cr(I,E.mode,w,U),_.return=E,_):(_=s(_,I),_.return=E,_)}function m(E,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=dc(""+_,E.mode,I),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case aa:return I=Ba(_.type,_.key,_.props,null,E.mode,I),I.ref=yi(E,null,_),I.return=E,I;case os:return _=hc(_,E.mode,I),_.return=E,_;case On:var w=_._init;return m(E,w(_._payload),I)}if(Ei(_)||hi(_))return _=Cr(_,E.mode,I,null),_.return=E,_;va(E,_)}return null}function g(E,_,I,w){var U=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return U!==null?null:l(E,_,""+I,w);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case aa:return I.key===U?u(E,_,I,w):null;case os:return I.key===U?d(E,_,I,w):null;case On:return U=I._init,g(E,_,U(I._payload),w)}if(Ei(I)||hi(I))return U!==null?null:p(E,_,I,w,null);va(E,I)}return null}function S(E,_,I,w,U){if(typeof w=="string"&&w!==""||typeof w=="number")return E=E.get(I)||null,l(_,E,""+w,U);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case aa:return E=E.get(w.key===null?I:w.key)||null,u(_,E,w,U);case os:return E=E.get(w.key===null?I:w.key)||null,d(_,E,w,U);case On:var B=w._init;return S(E,_,I,B(w._payload),U)}if(Ei(w)||hi(w))return E=E.get(I)||null,p(_,E,w,U,null);va(_,w)}return null}function N(E,_,I,w){for(var U=null,B=null,x=_,v=_=0,T=null;x!==null&&v<I.length;v++){x.index>v?(T=x,x=null):T=x.sibling;var k=g(E,x,I[v],w);if(k===null){x===null&&(x=T);break}t&&x&&k.alternate===null&&e(E,x),_=i(k,_,v),B===null?U=k:B.sibling=k,B=k,x=T}if(v===I.length)return n(E,x),me&&Tr(E,v),U;if(x===null){for(;v<I.length;v++)x=m(E,I[v],w),x!==null&&(_=i(x,_,v),B===null?U=x:B.sibling=x,B=x);return me&&Tr(E,v),U}for(x=r(E,x);v<I.length;v++)T=S(x,E,v,I[v],w),T!==null&&(t&&T.alternate!==null&&x.delete(T.key===null?v:T.key),_=i(T,_,v),B===null?U=T:B.sibling=T,B=T);return t&&x.forEach(function(R){return e(E,R)}),me&&Tr(E,v),U}function P(E,_,I,w){var U=hi(I);if(typeof U!="function")throw Error(F(150));if(I=U.call(I),I==null)throw Error(F(151));for(var B=U=null,x=_,v=_=0,T=null,k=I.next();x!==null&&!k.done;v++,k=I.next()){x.index>v?(T=x,x=null):T=x.sibling;var R=g(E,x,k.value,w);if(R===null){x===null&&(x=T);break}t&&x&&R.alternate===null&&e(E,x),_=i(R,_,v),B===null?U=R:B.sibling=R,B=R,x=T}if(k.done)return n(E,x),me&&Tr(E,v),U;if(x===null){for(;!k.done;v++,k=I.next())k=m(E,k.value,w),k!==null&&(_=i(k,_,v),B===null?U=k:B.sibling=k,B=k);return me&&Tr(E,v),U}for(x=r(E,x);!k.done;v++,k=I.next())k=S(x,E,v,k.value,w),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?v:k.key),_=i(k,_,v),B===null?U=k:B.sibling=k,B=k);return t&&x.forEach(function(b){return e(E,b)}),me&&Tr(E,v),U}function j(E,_,I,w){if(typeof I=="object"&&I!==null&&I.type===as&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case aa:e:{for(var U=I.key,B=_;B!==null;){if(B.key===U){if(U=I.type,U===as){if(B.tag===7){n(E,B.sibling),_=s(B,I.props.children),_.return=E,E=_;break e}}else if(B.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===On&&_m(U)===B.type){n(E,B.sibling),_=s(B,I.props),_.ref=yi(E,B,I),_.return=E,E=_;break e}n(E,B);break}else e(E,B);B=B.sibling}I.type===as?(_=Cr(I.props.children,E.mode,w,I.key),_.return=E,E=_):(w=Ba(I.type,I.key,I.props,null,E.mode,w),w.ref=yi(E,_,I),w.return=E,E=w)}return o(E);case os:e:{for(B=I.key;_!==null;){if(_.key===B)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(E,_.sibling),_=s(_,I.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=hc(I,E.mode,w),_.return=E,E=_}return o(E);case On:return B=I._init,j(E,_,B(I._payload),w)}if(Ei(I))return N(E,_,I,w);if(hi(I))return P(E,_,I,w);va(E,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,I),_.return=E,E=_):(n(E,_),_=dc(I,E.mode,w),_.return=E,E=_),o(E)):n(E,_)}return j}var Ps=Ry(!0),Ny=Ry(!1),ul=fr(null),cl=null,ms=null,gh=null;function yh(){gh=ms=cl=null}function vh(t){var e=ul.current;pe(ul),t._currentValue=e}function sd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ts(t,e){cl=t,gh=ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ht=!0),t.firstContext=null)}function bt(t){var e=t._currentValue;if(gh!==t)if(t={context:t,memoizedValue:e,next:null},ms===null){if(cl===null)throw Error(F(308));ms=t,cl.dependencies={lanes:0,firstContext:t}}else ms=ms.next=t;return e}var Sr=null;function _h(t){Sr===null?Sr=[t]:Sr.push(t)}function by(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_h(e)):(n.next=s.next,s.next=n),e.interleaved=n,Tn(t,r)}function Tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mn=!1;function xh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Tn(t,n)}return s=r.interleaved,s===null?(e.next=e,_h(r)):(e.next=s.next,s.next=e),r.interleaved=e,Tn(t,n)}function Da(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}function xm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dl(t,e,n,r){var s=t.updateQueue;Mn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=d=u=null,l=i;do{var g=l.lane,S=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,P=l;switch(g=e,S=n,P.tag){case 1:if(N=P.payload,typeof N=="function"){m=N.call(S,m,g);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=P.payload,g=typeof N=="function"?N.call(S,m,g):N,g==null)break e;m=xe({},m,g);break e;case 2:Mn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=S,u=m):p=p.next=S,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Mr|=o,t.lanes=o,t.memoizedState=m}}function wm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var ko={},Yt=fr(ko),to=fr(ko),no=fr(ko);function Rr(t){if(t===ko)throw Error(F(174));return t}function wh(t,e){switch(de(no,e),de(to,t),de(Yt,ko),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vc(e,t)}pe(Yt),de(Yt,e)}function js(){pe(Yt),pe(to),pe(no)}function Py(t){Rr(no.current);var e=Rr(Yt.current),n=Vc(e,t.type);e!==n&&(de(to,t),de(Yt,n))}function Eh(t){to.current===t&&(pe(Yt),pe(to))}var ye=fr(0);function hl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ic=[];function Th(){for(var t=0;t<ic.length;t++)ic[t]._workInProgressVersionPrimary=null;ic.length=0}var Oa=Nn.ReactCurrentDispatcher,oc=Nn.ReactCurrentBatchConfig,Or=0,_e=null,Pe=null,Me=null,fl=!1,Di=!1,ro=0,ME=0;function Ye(){throw Error(F(321))}function Ih(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zt(t[n],e[n]))return!1;return!0}function kh(t,e,n,r,s,i){if(Or=i,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oa.current=t===null||t.memoizedState===null?BE:zE,t=n(r,s),Di){i=0;do{if(Di=!1,ro=0,25<=i)throw Error(F(301));i+=1,Me=Pe=null,e.updateQueue=null,Oa.current=$E,t=n(r,s)}while(Di)}if(Oa.current=pl,e=Pe!==null&&Pe.next!==null,Or=0,Me=Pe=_e=null,fl=!1,e)throw Error(F(300));return t}function Ah(){var t=ro!==0;return ro=0,t}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?_e.memoizedState=Me=t:Me=Me.next=t,Me}function Ct(){if(Pe===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=Me===null?_e.memoizedState:Me.next;if(e!==null)Me=e,Pe=t;else{if(t===null)throw Error(F(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Me===null?_e.memoizedState=Me=t:Me=Me.next=t}return Me}function so(t,e){return typeof e=="function"?e(t):e}function ac(t){var e=Ct(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Pe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var p=d.lane;if((Or&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,_e.lanes|=p,Mr|=p}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,zt(r,e.memoizedState)||(ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_e.lanes|=i,Mr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lc(t){var e=Ct(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);zt(i,e.memoizedState)||(ht=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jy(){}function Ly(t,e){var n=_e,r=Ct(),s=e(),i=!zt(r.memoizedState,s);if(i&&(r.memoizedState=s,ht=!0),r=r.queue,Sh(My.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Me!==null&&Me.memoizedState.tag&1){if(n.flags|=2048,io(9,Oy.bind(null,n,r,s,e),void 0,null),Ve===null)throw Error(F(349));Or&30||Dy(n,e,s)}return s}function Dy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Oy(t,e,n,r){e.value=n,e.getSnapshot=r,Vy(e)&&Fy(t)}function My(t,e,n){return n(function(){Vy(e)&&Fy(t)})}function Vy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zt(t,n)}catch{return!0}}function Fy(t){var e=Tn(t,1);e!==null&&Bt(e,t,1,-1)}function Em(t){var e=Gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:t},e.queue=t,t=t.dispatch=UE.bind(null,_e,t),[e.memoizedState,t]}function io(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Uy(){return Ct().memoizedState}function Ma(t,e,n,r){var s=Gt();_e.flags|=t,s.memoizedState=io(1|e,n,void 0,r===void 0?null:r)}function Gl(t,e,n,r){var s=Ct();r=r===void 0?null:r;var i=void 0;if(Pe!==null){var o=Pe.memoizedState;if(i=o.destroy,r!==null&&Ih(r,o.deps)){s.memoizedState=io(e,n,i,r);return}}_e.flags|=t,s.memoizedState=io(1|e,n,i,r)}function Tm(t,e){return Ma(8390656,8,t,e)}function Sh(t,e){return Gl(2048,8,t,e)}function By(t,e){return Gl(4,2,t,e)}function zy(t,e){return Gl(4,4,t,e)}function $y(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hy(t,e,n){return n=n!=null?n.concat([t]):null,Gl(4,4,$y.bind(null,e,t),n)}function Rh(){}function Wy(t,e){var n=Ct();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gy(t,e){var n=Ct();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ih(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ky(t,e,n){return Or&21?(zt(n,e)||(n=Z0(),_e.lanes|=n,Mr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ht=!0),t.memoizedState=n)}function VE(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=oc.transition;oc.transition={};try{t(!1),e()}finally{ae=n,oc.transition=r}}function qy(){return Ct().memoizedState}function FE(t,e,n){var r=er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qy(t))Yy(e,n);else if(n=by(t,e,n,r),n!==null){var s=ot();Bt(n,t,r,s),Xy(n,e,r)}}function UE(t,e,n){var r=er(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qy(t))Yy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,zt(l,o)){var u=e.interleaved;u===null?(s.next=s,_h(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=by(t,e,s,r),n!==null&&(s=ot(),Bt(n,t,r,s),Xy(n,e,r))}}function Qy(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function Yy(t,e){Di=fl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}var pl={readContext:bt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},BE={readContext:bt,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:bt,useEffect:Tm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ma(4194308,4,$y.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ma(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ma(4,2,t,e)},useMemo:function(t,e){var n=Gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FE.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:Em,useDebugValue:Rh,useDeferredValue:function(t){return Gt().memoizedState=t},useTransition:function(){var t=Em(!1),e=t[0];return t=VE.bind(null,t[1]),Gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,s=Gt();if(me){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ve===null)throw Error(F(349));Or&30||Dy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Tm(My.bind(null,r,i,t),[t]),r.flags|=2048,io(9,Oy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gt(),e=Ve.identifierPrefix;if(me){var n=pn,r=fn;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ro++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ME++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zE={readContext:bt,useCallback:Wy,useContext:bt,useEffect:Sh,useImperativeHandle:Hy,useInsertionEffect:By,useLayoutEffect:zy,useMemo:Gy,useReducer:ac,useRef:Uy,useState:function(){return ac(so)},useDebugValue:Rh,useDeferredValue:function(t){var e=Ct();return Ky(e,Pe.memoizedState,t)},useTransition:function(){var t=ac(so)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:jy,useSyncExternalStore:Ly,useId:qy,unstable_isNewReconciler:!1},$E={readContext:bt,useCallback:Wy,useContext:bt,useEffect:Sh,useImperativeHandle:Hy,useInsertionEffect:By,useLayoutEffect:zy,useMemo:Gy,useReducer:lc,useRef:Uy,useState:function(){return lc(so)},useDebugValue:Rh,useDeferredValue:function(t){var e=Ct();return Pe===null?e.memoizedState=t:Ky(e,Pe.memoizedState,t)},useTransition:function(){var t=lc(so)[0],e=Ct().memoizedState;return[t,e]},useMutableSource:jy,useSyncExternalStore:Ly,useId:qy,unstable_isNewReconciler:!1};function Ot(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function id(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Kl={isMounted:function(t){return(t=t._reactInternals)?Gr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ot(),s=er(t),i=vn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Zn(t,i,s),e!==null&&(Bt(e,t,s,r),Da(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ot(),s=er(t),i=vn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zn(t,i,s),e!==null&&(Bt(e,t,s,r),Da(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ot(),r=er(t),s=vn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Zn(t,s,r),e!==null&&(Bt(e,t,r,n),Da(e,t,r))}};function Im(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Xi(n,r)||!Xi(s,i):!0}function Zy(t,e,n){var r=!1,s=lr,i=e.contextType;return typeof i=="object"&&i!==null?i=bt(i):(s=pt(e)?Lr:tt.current,r=e.contextTypes,i=(r=r!=null)?bs(t,s):lr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function km(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Kl.enqueueReplaceState(e,e.state,null)}function od(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},xh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=bt(i):(i=pt(e)?Lr:tt.current,s.context=bs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(id(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Kl.enqueueReplaceState(s,s.state,null),dl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ls(t,e){try{var n="",r=e;do n+=yw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function uc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ad(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HE=typeof WeakMap=="function"?WeakMap:Map;function Jy(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gl||(gl=!0,yd=r),ad(t,e)},n}function ev(t,e,n){n=vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ad(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ad(t,e),typeof r!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Am(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=sT.bind(null,t,e,n),e.then(t,t))}function Sm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Rm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,Zn(n,e,1))),n.lanes|=1),t)}var WE=Nn.ReactCurrentOwner,ht=!1;function it(t,e,n,r){e.child=t===null?Ny(e,null,n,r):Ps(e,t.child,n,r)}function Nm(t,e,n,r,s){n=n.render;var i=e.ref;return Ts(e,s),r=kh(t,e,n,r,i,s),n=Ah(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(me&&n&&fh(e),e.flags|=1,it(t,e,r,s),e.child)}function bm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Oh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,tv(t,e,i,r,s)):(t=Ba(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xi,n(o,r)&&t.ref===e.ref)return In(t,e,s)}return e.flags|=1,t=tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function tv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Xi(i,r)&&t.ref===e.ref)if(ht=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ht=!0);else return e.lanes=t.lanes,In(t,e,s)}return ld(t,e,n,r,s)}function nv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(ys,yt),yt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,de(ys,yt),yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(ys,yt),yt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,de(ys,yt),yt|=r;return it(t,e,s,n),e.child}function rv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ld(t,e,n,r,s){var i=pt(n)?Lr:tt.current;return i=bs(e,i),Ts(e,s),n=kh(t,e,n,r,i,s),r=Ah(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,In(t,e,s)):(me&&r&&fh(e),e.flags|=1,it(t,e,n,s),e.child)}function Cm(t,e,n,r,s){if(pt(n)){var i=!0;ol(e)}else i=!1;if(Ts(e,s),e.stateNode===null)Va(t,e),Zy(e,n,r),od(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=bt(d):(d=pt(n)?Lr:tt.current,d=bs(e,d));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&km(e,o,r,d),Mn=!1;var g=e.memoizedState;o.state=g,dl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||ft.current||Mn?(typeof p=="function"&&(id(e,n,p,r),u=e.memoizedState),(l=Mn||Im(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Cy(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Ot(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=bt(u):(u=pt(n)?Lr:tt.current,u=bs(e,u));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&km(e,o,r,u),Mn=!1,g=e.memoizedState,o.state=g,dl(e,r,o,s);var N=e.memoizedState;l!==m||g!==N||ft.current||Mn?(typeof S=="function"&&(id(e,n,S,r),N=e.memoizedState),(d=Mn||Im(e,n,d,r,g,N,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return ud(t,e,n,r,i,s)}function ud(t,e,n,r,s,i){rv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&gm(e,n,!1),In(t,e,i);r=e.stateNode,WE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ps(e,t.child,null,i),e.child=Ps(e,null,l,i)):it(t,e,l,i),e.memoizedState=r.state,s&&gm(e,n,!0),e.child}function sv(t){var e=t.stateNode;e.pendingContext?mm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mm(t,e.context,!1),wh(t,e.containerInfo)}function Pm(t,e,n,r,s){return Cs(),mh(s),e.flags|=256,it(t,e,n,r),e.child}var cd={dehydrated:null,treeContext:null,retryLane:0};function dd(t){return{baseLanes:t,cachePool:null,transitions:null}}function iv(t,e,n){var r=e.pendingProps,s=ye.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),de(ye,s&1),t===null)return rd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Yl(o,r,0,null),t=Cr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=dd(n),e.memoizedState=cd,t):Nh(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return GE(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=tr(l,i):(i=Cr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?dd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cd,r}return i=t.child,t=i.sibling,r=tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Nh(t,e){return e=Yl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _a(t,e,n,r){return r!==null&&mh(r),Ps(e,t.child,null,n),t=Nh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GE(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=uc(Error(F(422))),_a(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Yl({mode:"visible",children:r.children},s,0,null),i=Cr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ps(e,t.child,null,o),e.child.memoizedState=dd(o),e.memoizedState=cd,i);if(!(e.mode&1))return _a(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=uc(i,r,void 0),_a(t,e,o,r)}if(l=(o&t.childLanes)!==0,ht||l){if(r=Ve,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Tn(t,s),Bt(r,t,s,-1))}return Dh(),r=uc(Error(F(421))),_a(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=iT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,vt=Xn(s.nextSibling),_t=e,me=!0,Vt=null,t!==null&&(It[kt++]=fn,It[kt++]=pn,It[kt++]=Dr,fn=t.id,pn=t.overflow,Dr=e),e=Nh(e,r.children),e.flags|=4096,e)}function jm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sd(t.return,e,n)}function cc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ov(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(it(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jm(t,n,e);else if(t.tag===19)jm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(de(ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&hl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),cc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&hl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}cc(e,!0,n,null,i);break;case"together":cc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Va(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function In(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Mr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KE(t,e,n){switch(e.tag){case 3:sv(e),Cs();break;case 5:Py(e);break;case 1:pt(e.type)&&ol(e);break;case 4:wh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;de(ul,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(de(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?iv(t,e,n):(de(ye,ye.current&1),t=In(t,e,n),t!==null?t.sibling:null);de(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ov(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,nv(t,e,n)}return In(t,e,n)}var av,hd,lv,uv;av=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hd=function(){};lv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Rr(Yt.current);var i=null;switch(n){case"input":s=Lc(t,s),r=Lc(t,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=Mc(t,s),r=Mc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sl)}Fc(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Hi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Hi.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&fe("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};uv=function(t,e,n,r){n!==r&&(e.flags|=4)};function vi(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qE(t,e,n){var r=e.pendingProps;switch(ph(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return pt(e.type)&&il(),Xe(e),null;case 3:return r=e.stateNode,js(),pe(ft),pe(tt),Th(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ya(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vt!==null&&(xd(Vt),Vt=null))),hd(t,e),Xe(e),null;case 5:Eh(e);var s=Rr(no.current);if(n=e.type,t!==null&&e.stateNode!=null)lv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return Xe(e),null}if(t=Rr(Yt.current),ya(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Kt]=e,r[eo]=i,t=(e.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(s=0;s<Ii.length;s++)fe(Ii[s],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":zp(r,i),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},fe("invalid",r);break;case"textarea":Hp(r,i),fe("invalid",r)}Fc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ga(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ga(r.textContent,l,t),s=["children",""+l]):Hi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&fe("scroll",r)}switch(n){case"input":la(r),$p(r,i,!0);break;case"textarea":la(r),Wp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=sl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=M0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Kt]=e,t[eo]=r,av(t,e,!1,!1),e.stateNode=t;e:{switch(o=Uc(n,r),n){case"dialog":fe("cancel",t),fe("close",t),s=r;break;case"iframe":case"object":case"embed":fe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ii.length;s++)fe(Ii[s],t);s=r;break;case"source":fe("error",t),s=r;break;case"img":case"image":case"link":fe("error",t),fe("load",t),s=r;break;case"details":fe("toggle",t),s=r;break;case"input":zp(t,r),s=Lc(t,r),fe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),fe("invalid",t);break;case"textarea":Hp(t,r),s=Mc(t,r),fe("invalid",t);break;default:s=r}Fc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?U0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&V0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Wi(t,u):typeof u=="number"&&Wi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&fe("scroll",t):u!=null&&Jd(t,i,u,o))}switch(n){case"input":la(t),$p(t,r,!1);break;case"textarea":la(t),Wp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ar(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_s(t,!!r.multiple,i,!1):r.defaultValue!=null&&_s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=sl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xe(e),null;case 6:if(t&&e.stateNode!=null)uv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Rr(no.current),Rr(Yt.current),ya(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kt]=e,(i=r.nodeValue!==n)&&(t=_t,t!==null))switch(t.tag){case 3:ga(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ga(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kt]=e,e.stateNode=r}return Xe(e),null;case 13:if(pe(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(me&&vt!==null&&e.mode&1&&!(e.flags&128))Sy(),Cs(),e.flags|=98560,i=!1;else if(i=ya(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Kt]=e}else Cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),i=!1}else Vt!==null&&(xd(Vt),Vt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?Le===0&&(Le=3):Dh())),e.updateQueue!==null&&(e.flags|=4),Xe(e),null);case 4:return js(),hd(t,e),t===null&&Zi(e.stateNode.containerInfo),Xe(e),null;case 10:return vh(e.type._context),Xe(e),null;case 17:return pt(e.type)&&il(),Xe(e),null;case 19:if(pe(ye),i=e.memoizedState,i===null)return Xe(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)vi(i,!1);else{if(Le!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hl(t),o!==null){for(e.flags|=128,vi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return de(ye,ye.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>Ds&&(e.flags|=128,r=!0,vi(i,!1),e.lanes=4194304)}else{if(!r)if(t=hl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!me)return Xe(e),null}else 2*Re()-i.renderingStartTime>Ds&&n!==1073741824&&(e.flags|=128,r=!0,vi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=ye.current,de(ye,r?n&1|2:n&1),e):(Xe(e),null);case 22:case 23:return Lh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yt&1073741824&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function QE(t,e){switch(ph(e),e.tag){case 1:return pt(e.type)&&il(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return js(),pe(ft),pe(tt),Th(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Eh(e),null;case 13:if(pe(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(ye),null;case 4:return js(),null;case 10:return vh(e.type._context),null;case 22:case 23:return Lh(),null;case 24:return null;default:return null}}var xa=!1,Je=!1,YE=typeof WeakSet=="function"?WeakSet:Set,H=null;function gs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function fd(t,e,n){try{n()}catch(r){Te(t,e,r)}}var Lm=!1;function XE(t,e){if(Yc=tl,t=py(),hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,p=0,m=t,g=null;t:for(;;){for(var S;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)g=m,m=S;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++p===r&&(u=o),(S=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xc={focusedElem:t,selectionRange:n},tl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var P=N.memoizedProps,j=N.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?P:Ot(e.type,P),j);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(w){Te(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return N=Lm,Lm=!1,N}function Oi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&fd(e,n,i)}s=s.next}while(s!==r)}}function ql(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cv(t){var e=t.alternate;e!==null&&(t.alternate=null,cv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kt],delete e[eo],delete e[ed],delete e[jE],delete e[LE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dv(t){return t.tag===5||t.tag===3||t.tag===4}function Dm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sl));else if(r!==4&&(t=t.child,t!==null))for(md(t,e,n),t=t.sibling;t!==null;)md(t,e,n),t=t.sibling}function gd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gd(t,e,n),t=t.sibling;t!==null;)gd(t,e,n),t=t.sibling}var Ue=null,Mt=!1;function Ln(t,e,n){for(n=n.child;n!==null;)hv(t,e,n),n=n.sibling}function hv(t,e,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Ul,n)}catch{}switch(n.tag){case 5:Je||gs(n,e);case 6:var r=Ue,s=Mt;Ue=null,Ln(t,e,n),Ue=r,Mt=s,Ue!==null&&(Mt?(t=Ue,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(Mt?(t=Ue,n=n.stateNode,t.nodeType===8?rc(t.parentNode,n):t.nodeType===1&&rc(t,n),Qi(t)):rc(Ue,n.stateNode));break;case 4:r=Ue,s=Mt,Ue=n.stateNode.containerInfo,Mt=!0,Ln(t,e,n),Ue=r,Mt=s;break;case 0:case 11:case 14:case 15:if(!Je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fd(n,e,o),s=s.next}while(s!==r)}Ln(t,e,n);break;case 1:if(!Je&&(gs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Te(n,e,l)}Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:n.mode&1?(Je=(r=Je)||n.memoizedState!==null,Ln(t,e,n),Je=r):Ln(t,e,n);break;default:Ln(t,e,n)}}function Om(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YE),e.forEach(function(r){var s=oT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,Mt=!1;break e;case 3:Ue=l.stateNode.containerInfo,Mt=!0;break e;case 4:Ue=l.stateNode.containerInfo,Mt=!0;break e}l=l.return}if(Ue===null)throw Error(F(160));hv(i,o,s),Ue=null,Mt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Te(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fv(e,t),e=e.sibling}function fv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),Ht(t),r&4){try{Oi(3,t,t.return),ql(3,t)}catch(P){Te(t,t.return,P)}try{Oi(5,t,t.return)}catch(P){Te(t,t.return,P)}}break;case 1:Lt(e,t),Ht(t),r&512&&n!==null&&gs(n,n.return);break;case 5:if(Lt(e,t),Ht(t),r&512&&n!==null&&gs(n,n.return),t.flags&32){var s=t.stateNode;try{Wi(s,"")}catch(P){Te(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&D0(s,i),Uc(l,o);var d=Uc(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?U0(s,m):p==="dangerouslySetInnerHTML"?V0(s,m):p==="children"?Wi(s,m):Jd(s,p,m,d)}switch(l){case"input":Dc(s,i);break;case"textarea":O0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?_s(s,!!i.multiple,S,!1):g!==!!i.multiple&&(i.defaultValue!=null?_s(s,!!i.multiple,i.defaultValue,!0):_s(s,!!i.multiple,i.multiple?[]:"",!1))}s[eo]=i}catch(P){Te(t,t.return,P)}}break;case 6:if(Lt(e,t),Ht(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){Te(t,t.return,P)}}break;case 3:if(Lt(e,t),Ht(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qi(e.containerInfo)}catch(P){Te(t,t.return,P)}break;case 4:Lt(e,t),Ht(t);break;case 13:Lt(e,t),Ht(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ph=Re())),r&4&&Om(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Je=(d=Je)||p,Lt(e,t),Je=d):Lt(e,t),Ht(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(H=t,p=t.child;p!==null;){for(m=H=p;H!==null;){switch(g=H,S=g.child,g.tag){case 0:case 11:case 14:case 15:Oi(4,g,g.return);break;case 1:gs(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(P){Te(r,n,P)}}break;case 5:gs(g,g.return);break;case 22:if(g.memoizedState!==null){Vm(m);continue}}S!==null?(S.return=g,H=S):Vm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=F0("display",o))}catch(P){Te(t,t.return,P)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(P){Te(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Lt(e,t),Ht(t),r&4&&Om(t);break;case 21:break;default:Lt(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dv(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wi(s,""),r.flags&=-33);var i=Dm(t);gd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Dm(t);md(t,l,o);break;default:throw Error(F(161))}}catch(u){Te(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ZE(t,e,n){H=t,pv(t)}function pv(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||xa;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Je;l=xa;var d=Je;if(xa=o,(Je=u)&&!d)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Fm(s):u!==null?(u.return=o,H=u):Fm(s);for(;i!==null;)H=i,pv(i),i=i.sibling;H=s,xa=l,Je=d}Mm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Mm(t)}}function Mm(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Je||ql(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Je)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ot(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&wm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}wm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Qi(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Je||e.flags&512&&pd(e)}catch(g){Te(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Vm(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Fm(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ql(4,e)}catch(u){Te(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Te(e,s,u)}}var i=e.return;try{pd(e)}catch(u){Te(e,i,u)}break;case 5:var o=e.return;try{pd(e)}catch(u){Te(e,o,u)}}}catch(u){Te(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var JE=Math.ceil,ml=Nn.ReactCurrentDispatcher,bh=Nn.ReactCurrentOwner,Rt=Nn.ReactCurrentBatchConfig,re=0,Ve=null,be=null,$e=0,yt=0,ys=fr(0),Le=0,oo=null,Mr=0,Ql=0,Ch=0,Mi=null,dt=null,Ph=0,Ds=1/0,dn=null,gl=!1,yd=null,Jn=null,wa=!1,Wn=null,yl=0,Vi=0,vd=null,Fa=-1,Ua=0;function ot(){return re&6?Re():Fa!==-1?Fa:Fa=Re()}function er(t){return t.mode&1?re&2&&$e!==0?$e&-$e:OE.transition!==null?(Ua===0&&(Ua=Z0()),Ua):(t=ae,t!==0||(t=window.event,t=t===void 0?16:iy(t.type)),t):1}function Bt(t,e,n,r){if(50<Vi)throw Vi=0,vd=null,Error(F(185));Eo(t,n,r),(!(re&2)||t!==Ve)&&(t===Ve&&(!(re&2)&&(Ql|=n),Le===4&&Fn(t,$e)),mt(t,r),n===1&&re===0&&!(e.mode&1)&&(Ds=Re()+500,Wl&&pr()))}function mt(t,e){var n=t.callbackNode;Ow(t,e);var r=el(t,t===Ve?$e:0);if(r===0)n!==null&&qp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qp(n),e===1)t.tag===0?DE(Um.bind(null,t)):Iy(Um.bind(null,t)),CE(function(){!(re&6)&&pr()}),n=null;else{switch(J0(r)){case 1:n=sh;break;case 4:n=Y0;break;case 16:n=Ja;break;case 536870912:n=X0;break;default:n=Ja}n=Ev(n,mv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mv(t,e){if(Fa=-1,Ua=0,re&6)throw Error(F(327));var n=t.callbackNode;if(Is()&&t.callbackNode!==n)return null;var r=el(t,t===Ve?$e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vl(t,r);else{e=r;var s=re;re|=2;var i=yv();(Ve!==t||$e!==e)&&(dn=null,Ds=Re()+500,br(t,e));do try{nT();break}catch(l){gv(t,l)}while(!0);yh(),ml.current=i,re=s,be!==null?e=0:(Ve=null,$e=0,e=Le)}if(e!==0){if(e===2&&(s=Wc(t),s!==0&&(r=s,e=_d(t,s))),e===1)throw n=oo,br(t,0),Fn(t,r),mt(t,Re()),n;if(e===6)Fn(t,r);else{if(s=t.current.alternate,!(r&30)&&!eT(s)&&(e=vl(t,r),e===2&&(i=Wc(t),i!==0&&(r=i,e=_d(t,i))),e===1))throw n=oo,br(t,0),Fn(t,r),mt(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Ir(t,dt,dn);break;case 3:if(Fn(t,r),(r&130023424)===r&&(e=Ph+500-Re(),10<e)){if(el(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ot(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Jc(Ir.bind(null,t,dt,dn),e);break}Ir(t,dt,dn);break;case 4:if(Fn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ut(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JE(r/1960))-r,10<r){t.timeoutHandle=Jc(Ir.bind(null,t,dt,dn),r);break}Ir(t,dt,dn);break;case 5:Ir(t,dt,dn);break;default:throw Error(F(329))}}}return mt(t,Re()),t.callbackNode===n?mv.bind(null,t):null}function _d(t,e){var n=Mi;return t.current.memoizedState.isDehydrated&&(br(t,e).flags|=256),t=vl(t,e),t!==2&&(e=dt,dt=n,e!==null&&xd(e)),t}function xd(t){dt===null?dt=t:dt.push.apply(dt,t)}function eT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!zt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fn(t,e){for(e&=~Ch,e&=~Ql,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function Um(t){if(re&6)throw Error(F(327));Is();var e=el(t,0);if(!(e&1))return mt(t,Re()),null;var n=vl(t,e);if(t.tag!==0&&n===2){var r=Wc(t);r!==0&&(e=r,n=_d(t,r))}if(n===1)throw n=oo,br(t,0),Fn(t,e),mt(t,Re()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ir(t,dt,dn),mt(t,Re()),null}function jh(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Ds=Re()+500,Wl&&pr())}}function Vr(t){Wn!==null&&Wn.tag===0&&!(re&6)&&Is();var e=re;re|=1;var n=Rt.transition,r=ae;try{if(Rt.transition=null,ae=1,t)return t()}finally{ae=r,Rt.transition=n,re=e,!(re&6)&&pr()}}function Lh(){yt=ys.current,pe(ys)}function br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bE(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(ph(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&il();break;case 3:js(),pe(ft),pe(tt),Th();break;case 5:Eh(r);break;case 4:js();break;case 13:pe(ye);break;case 19:pe(ye);break;case 10:vh(r.type._context);break;case 22:case 23:Lh()}n=n.return}if(Ve=t,be=t=tr(t.current,null),$e=yt=e,Le=0,oo=null,Ch=Ql=Mr=0,dt=Mi=null,Sr!==null){for(e=0;e<Sr.length;e++)if(n=Sr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Sr=null}return t}function gv(t,e){do{var n=be;try{if(yh(),Oa.current=pl,fl){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}fl=!1}if(Or=0,Me=Pe=_e=null,Di=!1,ro=0,bh.current=null,n===null||n.return===null){Le=1,oo=e,be=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=$e,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=Sm(o);if(S!==null){S.flags&=-257,Rm(S,o,l,i,e),S.mode&1&&Am(i,d,e),e=S,u=d;var N=e.updateQueue;if(N===null){var P=new Set;P.add(u),e.updateQueue=P}else N.add(u);break e}else{if(!(e&1)){Am(i,d,e),Dh();break e}u=Error(F(426))}}else if(me&&l.mode&1){var j=Sm(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Rm(j,o,l,i,e),mh(Ls(u,l));break e}}i=u=Ls(u,l),Le!==4&&(Le=2),Mi===null?Mi=[i]:Mi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=Jy(i,u,e);xm(i,E);break e;case 1:l=u;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Jn===null||!Jn.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=ev(i,l,e);xm(i,w);break e}}i=i.return}while(i!==null)}_v(n)}catch(U){e=U,be===n&&n!==null&&(be=n=n.return);continue}break}while(!0)}function yv(){var t=ml.current;return ml.current=pl,t===null?pl:t}function Dh(){(Le===0||Le===3||Le===2)&&(Le=4),Ve===null||!(Mr&268435455)&&!(Ql&268435455)||Fn(Ve,$e)}function vl(t,e){var n=re;re|=2;var r=yv();(Ve!==t||$e!==e)&&(dn=null,br(t,e));do try{tT();break}catch(s){gv(t,s)}while(!0);if(yh(),re=n,ml.current=r,be!==null)throw Error(F(261));return Ve=null,$e=0,Le}function tT(){for(;be!==null;)vv(be)}function nT(){for(;be!==null&&!Sw();)vv(be)}function vv(t){var e=wv(t.alternate,t,yt);t.memoizedProps=t.pendingProps,e===null?_v(t):be=e,bh.current=null}function _v(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QE(n,e),n!==null){n.flags&=32767,be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Le=6,be=null;return}}else if(n=qE(n,e,yt),n!==null){be=n;return}if(e=e.sibling,e!==null){be=e;return}be=e=t}while(e!==null);Le===0&&(Le=5)}function Ir(t,e,n){var r=ae,s=Rt.transition;try{Rt.transition=null,ae=1,rT(t,e,n,r)}finally{Rt.transition=s,ae=r}return null}function rT(t,e,n,r){do Is();while(Wn!==null);if(re&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Mw(t,i),t===Ve&&(be=Ve=null,$e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wa||(wa=!0,Ev(Ja,function(){return Is(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Rt.transition,Rt.transition=null;var o=ae;ae=1;var l=re;re|=4,bh.current=null,XE(t,n),fv(n,t),TE(Xc),tl=!!Yc,Xc=Yc=null,t.current=n,ZE(n),Rw(),re=l,ae=o,Rt.transition=i}else t.current=n;if(wa&&(wa=!1,Wn=t,yl=s),i=t.pendingLanes,i===0&&(Jn=null),Cw(n.stateNode),mt(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(gl)throw gl=!1,t=yd,yd=null,t;return yl&1&&t.tag!==0&&Is(),i=t.pendingLanes,i&1?t===vd?Vi++:(Vi=0,vd=t):Vi=0,pr(),null}function Is(){if(Wn!==null){var t=J0(yl),e=Rt.transition,n=ae;try{if(Rt.transition=null,ae=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,yl=0,re&6)throw Error(F(331));var s=re;for(re|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(H=d;H!==null;){var p=H;switch(p.tag){case 0:case 11:case 15:Oi(8,p,i)}var m=p.child;if(m!==null)m.return=p,H=m;else for(;H!==null;){p=H;var g=p.sibling,S=p.return;if(cv(p),p===d){H=null;break}if(g!==null){g.return=S,H=g;break}H=S}}}var N=i.alternate;if(N!==null){var P=N.child;if(P!==null){N.child=null;do{var j=P.sibling;P.sibling=null,P=j}while(P!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oi(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,H=E;break e}H=i.return}}var _=t.current;for(H=_;H!==null;){o=H;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,H=I;else e:for(o=_;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ql(9,l)}}catch(U){Te(l,l.return,U)}if(l===o){H=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,H=w;break e}H=l.return}}if(re=s,pr(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Ul,t)}catch{}r=!0}return r}finally{ae=n,Rt.transition=e}}return!1}function Bm(t,e,n){e=Ls(n,e),e=Jy(t,e,1),t=Zn(t,e,1),e=ot(),t!==null&&(Eo(t,1,e),mt(t,e))}function Te(t,e,n){if(t.tag===3)Bm(t,t,n);else for(;e!==null;){if(e.tag===3){Bm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jn===null||!Jn.has(r))){t=Ls(n,t),t=ev(e,t,1),e=Zn(e,t,1),t=ot(),e!==null&&(Eo(e,1,t),mt(e,t));break}}e=e.return}}function sT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ot(),t.pingedLanes|=t.suspendedLanes&n,Ve===t&&($e&n)===n&&(Le===4||Le===3&&($e&130023424)===$e&&500>Re()-Ph?br(t,0):Ch|=n),mt(t,e)}function xv(t,e){e===0&&(t.mode&1?(e=da,da<<=1,!(da&130023424)&&(da=4194304)):e=1);var n=ot();t=Tn(t,e),t!==null&&(Eo(t,e,n),mt(t,n))}function iT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xv(t,n)}function oT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),xv(t,n)}var wv;wv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ft.current)ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ht=!1,KE(t,e,n);ht=!!(t.flags&131072)}else ht=!1,me&&e.flags&1048576&&ky(e,ll,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Va(t,e),t=e.pendingProps;var s=bs(e,tt.current);Ts(e,n),s=kh(null,e,r,t,s,n);var i=Ah();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pt(r)?(i=!0,ol(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xh(e),s.updater=Kl,e.stateNode=s,s._reactInternals=e,od(e,r,t,n),e=ud(null,e,r,!0,i,n)):(e.tag=0,me&&i&&fh(e),it(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Va(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=lT(r),t=Ot(r,t),s){case 0:e=ld(null,e,r,t,n);break e;case 1:e=Cm(null,e,r,t,n);break e;case 11:e=Nm(null,e,r,t,n);break e;case 14:e=bm(null,e,r,Ot(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),ld(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Cm(t,e,r,s,n);case 3:e:{if(sv(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Cy(t,e),dl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ls(Error(F(423)),e),e=Pm(t,e,r,n,s);break e}else if(r!==s){s=Ls(Error(F(424)),e),e=Pm(t,e,r,n,s);break e}else for(vt=Xn(e.stateNode.containerInfo.firstChild),_t=e,me=!0,Vt=null,n=Ny(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cs(),r===s){e=In(t,e,n);break e}it(t,e,r,n)}e=e.child}return e;case 5:return Py(e),t===null&&rd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Zc(r,s)?o=null:i!==null&&Zc(r,i)&&(e.flags|=32),rv(t,e),it(t,e,o,n),e.child;case 6:return t===null&&rd(e),null;case 13:return iv(t,e,n);case 4:return wh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ps(e,null,r,n):it(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Nm(t,e,r,s,n);case 7:return it(t,e,e.pendingProps,n),e.child;case 8:return it(t,e,e.pendingProps.children,n),e.child;case 12:return it(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,de(ul,r._currentValue),r._currentValue=o,i!==null)if(zt(i.value,o)){if(i.children===s.children&&!ft.current){e=In(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=vn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),sd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),sd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}it(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ts(e,n),s=bt(s),r=r(s),e.flags|=1,it(t,e,r,n),e.child;case 14:return r=e.type,s=Ot(r,e.pendingProps),s=Ot(r.type,s),bm(t,e,r,s,n);case 15:return tv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ot(r,s),Va(t,e),e.tag=1,pt(r)?(t=!0,ol(e)):t=!1,Ts(e,n),Zy(e,r,s),od(e,r,s,n),ud(null,e,r,!0,t,n);case 19:return ov(t,e,n);case 22:return nv(t,e,n)}throw Error(F(156,e.tag))};function Ev(t,e){return Q0(t,e)}function aT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(t,e,n,r){return new aT(t,e,n,r)}function Oh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lT(t){if(typeof t=="function")return Oh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===th)return 11;if(t===nh)return 14}return 2}function tr(t,e){var n=t.alternate;return n===null?(n=St(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ba(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Oh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case as:return Cr(n.children,s,i,e);case eh:o=8,s|=8;break;case bc:return t=St(12,n,e,s|2),t.elementType=bc,t.lanes=i,t;case Cc:return t=St(13,n,e,s),t.elementType=Cc,t.lanes=i,t;case Pc:return t=St(19,n,e,s),t.elementType=Pc,t.lanes=i,t;case P0:return Yl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case b0:o=10;break e;case C0:o=9;break e;case th:o=11;break e;case nh:o=14;break e;case On:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=St(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Cr(t,e,n,r){return t=St(7,t,r,e),t.lanes=n,t}function Yl(t,e,n,r){return t=St(22,t,r,e),t.elementType=P0,t.lanes=n,t.stateNode={isHidden:!1},t}function dc(t,e,n){return t=St(6,t,null,e),t.lanes=n,t}function hc(t,e,n){return e=St(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gu(0),this.expirationTimes=Gu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mh(t,e,n,r,s,i,o,l,u){return t=new uT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=St(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xh(i),t}function cT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:os,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tv(t){if(!t)return lr;t=t._reactInternals;e:{if(Gr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(pt(n))return Ty(t,n,e)}return e}function Iv(t,e,n,r,s,i,o,l,u){return t=Mh(n,r,!0,t,s,i,o,l,u),t.context=Tv(null),n=t.current,r=ot(),s=er(n),i=vn(r,s),i.callback=e??null,Zn(n,i,s),t.current.lanes=s,Eo(t,s,r),mt(t,r),t}function Xl(t,e,n,r){var s=e.current,i=ot(),o=er(s);return n=Tv(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zn(s,e,o),t!==null&&(Bt(t,s,o,i),Da(t,s,o)),o}function _l(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vh(t,e){zm(t,e),(t=t.alternate)&&zm(t,e)}function dT(){return null}var kv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fh(t){this._internalRoot=t}Zl.prototype.render=Fh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Xl(t,e,null,null)};Zl.prototype.unmount=Fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vr(function(){Xl(null,t,null,null)}),e[En]=null}};function Zl(t){this._internalRoot=t}Zl.prototype.unstable_scheduleHydration=function(t){if(t){var e=ny();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vn.length&&e!==0&&e<Vn[n].priority;n++);Vn.splice(n,0,t),n===0&&sy(t)}};function Uh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $m(){}function hT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=_l(o);i.call(d)}}var o=Iv(e,r,t,0,null,!1,!1,"",$m);return t._reactRootContainer=o,t[En]=o.current,Zi(t.nodeType===8?t.parentNode:t),Vr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=_l(u);l.call(d)}}var u=Mh(t,0,!1,null,null,!1,!1,"",$m);return t._reactRootContainer=u,t[En]=u.current,Zi(t.nodeType===8?t.parentNode:t),Vr(function(){Xl(e,u,n,r)}),u}function eu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=_l(o);l.call(u)}}Xl(e,o,t,s)}else o=hT(n,e,t,s,r);return _l(o)}ey=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ti(e.pendingLanes);n!==0&&(ih(e,n|1),mt(e,Re()),!(re&6)&&(Ds=Re()+500,pr()))}break;case 13:Vr(function(){var r=Tn(t,1);if(r!==null){var s=ot();Bt(r,t,1,s)}}),Vh(t,1)}};oh=function(t){if(t.tag===13){var e=Tn(t,134217728);if(e!==null){var n=ot();Bt(e,t,134217728,n)}Vh(t,134217728)}};ty=function(t){if(t.tag===13){var e=er(t),n=Tn(t,e);if(n!==null){var r=ot();Bt(n,t,e,r)}Vh(t,e)}};ny=function(){return ae};ry=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};zc=function(t,e,n){switch(e){case"input":if(Dc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Hl(r);if(!s)throw Error(F(90));L0(r),Dc(r,s)}}}break;case"textarea":O0(t,n);break;case"select":e=n.value,e!=null&&_s(t,!!n.multiple,e,!1)}};$0=jh;H0=Vr;var fT={usingClientEntryPoint:!1,Events:[Io,ds,Hl,B0,z0,jh]},_i={findFiberByHostInstance:Ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pT={bundleType:_i.bundleType,version:_i.version,rendererPackageName:_i.rendererPackageName,rendererConfig:_i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=K0(t),t===null?null:t.stateNode},findFiberByHostInstance:_i.findFiberByHostInstance||dT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ea.isDisabled&&Ea.supportsFiber)try{Ul=Ea.inject(pT),Qt=Ea}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fT;Et.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uh(e))throw Error(F(200));return cT(t,e,null,n)};Et.createRoot=function(t,e){if(!Uh(t))throw Error(F(299));var n=!1,r="",s=kv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mh(t,1,!1,null,null,n,!1,r,s),t[En]=e.current,Zi(t.nodeType===8?t.parentNode:t),new Fh(e)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=K0(e),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return Vr(t)};Et.hydrate=function(t,e,n){if(!Jl(e))throw Error(F(200));return eu(null,t,e,!0,n)};Et.hydrateRoot=function(t,e,n){if(!Uh(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=kv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Iv(e,null,t,1,n??null,s,!1,i,o),t[En]=e.current,Zi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zl(e)};Et.render=function(t,e,n){if(!Jl(e))throw Error(F(200));return eu(null,t,e,!1,n)};Et.unmountComponentAtNode=function(t){if(!Jl(t))throw Error(F(40));return t._reactRootContainer?(Vr(function(){eu(null,null,t,!1,function(){t._reactRootContainer=null,t[En]=null})}),!0):!1};Et.unstable_batchedUpdates=jh;Et.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jl(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return eu(t,e,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function Av(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Av)}catch(t){console.error(t)}}Av(),A0.exports=Et;var mT=A0.exports,Sv,Hm=mT;Sv=Hm.createRoot,Hm.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ao(){return ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ao.apply(this,arguments)}var Gn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gn||(Gn={}));const Wm="popstate";function gT(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:l="",hash:u=""}=Kr(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),wd("",{pathname:o,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof i=="string"?i:xl(i))}function r(s,i){Bh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return vT(e,n,r,t)}function Ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yT(){return Math.random().toString(36).substr(2,8)}function Gm(t,e){return{usr:t.state,key:t.key,idx:e}}function wd(t,e,n,r){return n===void 0&&(n=null),ao({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Kr(e):e,{state:n,key:e&&e.key||r||yT()})}function xl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Kr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vT(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Gn.Pop,u=null,d=p();d==null&&(d=0,o.replaceState(ao({},o.state,{idx:d}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=Gn.Pop;let j=p(),E=j==null?null:j-d;d=j,u&&u({action:l,location:P.location,delta:E})}function g(j,E){l=Gn.Push;let _=wd(P.location,j,E);n&&n(_,j),d=p()+1;let I=Gm(_,d),w=P.createHref(_);try{o.pushState(I,"",w)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(w)}i&&u&&u({action:l,location:P.location,delta:1})}function S(j,E){l=Gn.Replace;let _=wd(P.location,j,E);n&&n(_,j),d=p();let I=Gm(_,d),w=P.createHref(_);o.replaceState(I,"",w),i&&u&&u({action:l,location:P.location,delta:0})}function N(j){let E=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof j=="string"?j:xl(j);return _=_.replace(/ $/,"%20"),Ce(E,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,E)}let P={get action(){return l},get location(){return t(s,o)},listen(j){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Wm,m),u=j,()=>{s.removeEventListener(Wm,m),u=null}},createHref(j){return e(s,j)},createURL:N,encodeLocation(j){let E=N(j);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:S,go(j){return o.go(j)}};return P}var Km;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Km||(Km={}));function _T(t,e,n){return n===void 0&&(n="/"),xT(t,e,n,!1)}function xT(t,e,n,r){let s=typeof e=="string"?Kr(e):e,i=zh(s.pathname||"/",n);if(i==null)return null;let o=Rv(t);wT(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=PT(i);l=bT(o[u],d,r)}return l}function Rv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ce(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=nr([r,u.relativePath]),p=n.concat(u);i.children&&i.children.length>0&&(Ce(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Rv(i.children,e,p,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:RT(d,i.index),routesMeta:p})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of Nv(i.path))s(i,o,u)}),e}function Nv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Nv(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function wT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:NT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ET=/^:[\w-]+$/,TT=3,IT=2,kT=1,AT=10,ST=-2,qm=t=>t==="*";function RT(t,e){let n=t.split("/"),r=n.length;return n.some(qm)&&(r+=ST),e&&(r+=IT),n.filter(s=>!qm(s)).reduce((s,i)=>s+(ET.test(i)?TT:i===""?kT:AT),r)}function NT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function bT(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",m=Qm({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Qm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:nr([i,m.pathname]),pathnameBase:OT(nr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=nr([i,m.pathnameBase]))}return o}function Qm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,p,m)=>{let{paramName:g,isOptional:S}=p;if(g==="*"){let P=l[m]||"";o=i.slice(0,i.length-P.length).replace(/(.)\/+$/,"$1")}const N=l[m];return S&&!N?d[g]=void 0:d[g]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function CT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Bh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function PT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function zh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function jT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Kr(t):t;return{pathname:n?n.startsWith("/")?n:LT(n,e):e,search:MT(r),hash:VT(s)}}function LT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function fc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bv(t,e){let n=DT(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Cv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Kr(t):(s=ao({},t),Ce(!s.pathname||!s.pathname.includes("?"),fc("?","pathname","search",s)),Ce(!s.pathname||!s.pathname.includes("#"),fc("#","pathname","hash",s)),Ce(!s.search||!s.search.includes("#"),fc("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=jT(s,l),d=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}const nr=t=>t.join("/").replace(/\/\/+/g,"/"),OT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Pv=["post","put","patch","delete"];new Set(Pv);const UT=["get",...Pv];new Set(UT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lo.apply(this,arguments)}const $h=L.createContext(null),BT=L.createContext(null),qr=L.createContext(null),tu=L.createContext(null),mr=L.createContext({outlet:null,matches:[],isDataRoute:!1}),jv=L.createContext(null);function zT(t,e){let{relative:n}=e===void 0?{}:e;Ao()||Ce(!1);let{basename:r,navigator:s}=L.useContext(qr),{hash:i,pathname:o,search:l}=Ov(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:nr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function Ao(){return L.useContext(tu)!=null}function So(){return Ao()||Ce(!1),L.useContext(tu).location}function Lv(t){L.useContext(qr).static||L.useLayoutEffect(t)}function $T(){let{isDataRoute:t}=L.useContext(mr);return t?nI():HT()}function HT(){Ao()||Ce(!1);let t=L.useContext($h),{basename:e,future:n,navigator:r}=L.useContext(qr),{matches:s}=L.useContext(mr),{pathname:i}=So(),o=JSON.stringify(bv(s,n.v7_relativeSplatPath)),l=L.useRef(!1);return Lv(()=>{l.current=!0}),L.useCallback(function(d,p){if(p===void 0&&(p={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=Cv(d,JSON.parse(o),i,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:nr([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,i,t])}function Dv(){let{matches:t}=L.useContext(mr),e=t[t.length-1];return e?e.params:{}}function Ov(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(qr),{matches:s}=L.useContext(mr),{pathname:i}=So(),o=JSON.stringify(bv(s,r.v7_relativeSplatPath));return L.useMemo(()=>Cv(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function WT(t,e){return GT(t,e)}function GT(t,e,n,r){Ao()||Ce(!1);let{navigator:s}=L.useContext(qr),{matches:i}=L.useContext(mr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=So(),p;if(e){var m;let j=typeof e=="string"?Kr(e):e;u==="/"||(m=j.pathname)!=null&&m.startsWith(u)||Ce(!1),p=j}else p=d;let g=p.pathname||"/",S=g;if(u!=="/"){let j=u.replace(/^\//,"").split("/");S="/"+g.replace(/^\//,"").split("/").slice(j.length).join("/")}let N=_T(t,{pathname:S}),P=XT(N&&N.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:nr([u,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?u:nr([u,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,n,r);return e&&P?L.createElement(tu.Provider,{value:{location:lo({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Gn.Pop}},P):P}function KT(){let t=tI(),e=FT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const qT=L.createElement(KT,null);class QT extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(mr.Provider,{value:this.props.routeContext},L.createElement(jv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YT(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext($h);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(mr.Provider,{value:e},r)}function XT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Ce(!1),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:g,errors:S}=n,N=m.route.loader&&g[m.route.id]===void 0&&(!S||S[m.route.id]===void 0);if(m.route.lazy||N){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,m,g)=>{let S,N=!1,P=null,j=null;n&&(S=l&&m.route.id?l[m.route.id]:void 0,P=m.route.errorElement||qT,u&&(d<0&&g===0?(N=!0,j=null):d===g&&(N=!0,j=m.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),_=()=>{let I;return S?I=P:N?I=j:m.route.Component?I=L.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=p,L.createElement(YT,{match:m,routeContext:{outlet:p,matches:E,isDataRoute:n!=null},children:I})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?L.createElement(QT,{location:n.location,revalidation:n.revalidation,component:P,error:S,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}var Mv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Mv||{}),wl=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wl||{});function ZT(t){let e=L.useContext($h);return e||Ce(!1),e}function JT(t){let e=L.useContext(BT);return e||Ce(!1),e}function eI(t){let e=L.useContext(mr);return e||Ce(!1),e}function Vv(t){let e=eI(),n=e.matches[e.matches.length-1];return n.route.id||Ce(!1),n.route.id}function tI(){var t;let e=L.useContext(jv),n=JT(wl.UseRouteError),r=Vv(wl.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nI(){let{router:t}=ZT(Mv.UseNavigateStable),e=Vv(wl.UseNavigateStable),n=L.useRef(!1);return Lv(()=>{n.current=!0}),L.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,lo({fromRouteId:e},i)))},[t,e])}function rI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Wt(t){Ce(!1)}function sI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Gn.Pop,navigator:i,static:o=!1,future:l}=t;Ao()&&Ce(!1);let u=e.replace(/^\/*/,"/"),d=L.useMemo(()=>({basename:u,navigator:i,static:o,future:lo({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=Kr(r));let{pathname:p="/",search:m="",hash:g="",state:S=null,key:N="default"}=r,P=L.useMemo(()=>{let j=zh(p,u);return j==null?null:{location:{pathname:j,search:m,hash:g,state:S,key:N},navigationType:s}},[u,p,m,g,S,N,s]);return P==null?null:L.createElement(qr.Provider,{value:d},L.createElement(tu.Provider,{children:n,value:P}))}function iI(t){let{children:e,location:n}=t;return WT(Ed(e),n)}new Promise(()=>{});function Ed(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,Ed(r.props.children,i));return}r.type!==Wt&&Ce(!1),!r.props.index||!r.props.children||Ce(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ed(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Td(){return Td=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Td.apply(this,arguments)}function oI(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function aI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lI(t,e){return t.button===0&&(!e||e==="_self")&&!aI(t)}const uI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cI="6";try{window.__reactRouterVersion=cI}catch{}const dI="startTransition",Ym=sw[dI];function hI(t){let{basename:e,children:n,future:r,window:s}=t,i=L.useRef();i.current==null&&(i.current=gT({window:s,v5Compat:!0}));let o=i.current,[l,u]=L.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},p=L.useCallback(m=>{d&&Ym?Ym(()=>u(m)):u(m)},[u,d]);return L.useLayoutEffect(()=>o.listen(p),[o,p]),L.useEffect(()=>rI(r),[r]),L.createElement(sI,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const fI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=L.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:p,viewTransition:m}=e,g=oI(e,uI),{basename:S}=L.useContext(qr),N,P=!1;if(typeof d=="string"&&pI.test(d)&&(N=d,fI))try{let I=new URL(window.location.href),w=d.startsWith("//")?new URL(I.protocol+d):new URL(d),U=zh(w.pathname,S);w.origin===I.origin&&U!=null?d=U+w.search+w.hash:P=!0}catch{}let j=zT(d,{relative:s}),E=mI(d,{replace:o,state:l,target:u,preventScrollReset:p,relative:s,viewTransition:m});function _(I){r&&r(I),I.defaultPrevented||E(I)}return L.createElement("a",Td({},g,{href:N||j,onClick:P||i?r:_,ref:n,target:u}))});var Xm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Xm||(Xm={}));var Zm;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Zm||(Zm={}));function mI(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=$T(),d=So(),p=Ov(t,{relative:o});return L.useCallback(m=>{if(lI(m,n)){m.preventDefault();let g=r!==void 0?r:xl(d)===xl(p);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,p,r,s,n,t,i,o,l])}const Fv=L.createContext(void 0),Ro=()=>{const t=L.useContext(Fv);if(!t)throw new Error("useApp must be used within AppProvider");return t},gI=({children:t})=>{const[e,n]=L.useState(!1),[r,s]=L.useState(!1),[i,o]=L.useState("1234566789"),[l,u]=L.useState("1234566789"),[d,p]=L.useState("1234566789");L.useState("https://api.raceresult.com/345604/y"),L.useEffect(()=>{const g=window.matchMedia("(display-mode: standalone)").matches;s(g);const S=window.matchMedia("(prefers-color-scheme: dark)").matches;n(S),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js")},[]),L.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const m=()=>{n(!e)};return c.jsx(Fv.Provider,{value:{darkMode:e,toggleDarkMode:m,isPWA:r,liveApiKey:i,setLiveApiKey:o,historyApiKey:d,setHistoryApiKey:p,eventApiKey:l,setEventApiKey:u},children:t})};var Jm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Bv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,S=d&63;u||(S=64,o||(g=64)),r.push(n[p],n[m],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Uv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new vI;const g=i<<2|l>>4;if(r.push(g),d!==64){const S=l<<4&240|d>>2;if(r.push(S),m!==64){const N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _I=function(t){const e=Uv(t);return Bv.encodeByteArray(e,!0)},zv=function(t){return _I(t).replace(/\./g,"")},$v=function(t){try{return Bv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=()=>xI().__FIREBASE_DEFAULTS__,EI=()=>{if(typeof process>"u"||typeof Jm>"u")return;const t=Jm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$v(t[1]);return e&&JSON.parse(e)},nu=()=>{try{return wI()||EI()||TI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},II=t=>{var e,n;return(n=(e=nu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Hv=()=>{var t;return(t=nu())===null||t===void 0?void 0:t.config},Wv=t=>{var e;return(e=nu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function SI(){var t;const e=(t=nu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CI(){const t=nt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PI(){return!SI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jI(){try{return typeof indexedDB=="object"}catch{return!1}}function LI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="FirebaseError";class bn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DI,Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,No.prototype.create)}}class No{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?OI(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new bn(s,l,r)}}function OI(t,e){return t.replace(MI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const MI=/\{\$([^}]+)}/g;function VI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function El(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(eg(i)&&eg(o)){if(!El(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function eg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ki(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ai(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FI(t,e){const n=new UI(t,e);return n.subscribe.bind(n)}class UI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=pc),s.error===void 0&&(s.error=pc),s.complete===void 0&&(s.complete=pc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class Fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HI(e))try{this.getOrInitializeService({instanceIdentifier:kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kr){return this.instances.has(e)}getOptions(e=kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$I(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kr){return this.component?this.component.multipleInstances?e:kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $I(t){return t===kr?void 0:t}function HI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(te||(te={}));const GI={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},KI=te.INFO,qI={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},QI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=qI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hh{constructor(e){this.name=e,this._logLevel=KI,this._logHandler=QI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?GI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const YI=(t,e)=>e.some(n=>t instanceof n);let tg,ng;function XI(){return tg||(tg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZI(){return ng||(ng=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gv=new WeakMap,Id=new WeakMap,Kv=new WeakMap,mc=new WeakMap,Wh=new WeakMap;function JI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(rr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gv.set(n,t)}).catch(()=>{}),Wh.set(e,t),e}function e2(t){if(Id.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Id.set(t,e)}let kd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Id.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function t2(t){kd=t(kd)}function n2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gc(this),e,...n);return Kv.set(r,e.sort?e.sort():[e]),rr(r)}:ZI().includes(t)?function(...e){return t.apply(gc(this),e),rr(Gv.get(this))}:function(...e){return rr(t.apply(gc(this),e))}}function r2(t){return typeof t=="function"?n2(t):(t instanceof IDBTransaction&&e2(t),YI(t,XI())?new Proxy(t,kd):t)}function rr(t){if(t instanceof IDBRequest)return JI(t);if(mc.has(t))return mc.get(t);const e=r2(t);return e!==t&&(mc.set(t,e),Wh.set(e,t)),e}const gc=t=>Wh.get(t);function s2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=rr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(rr(o.result),u.oldVersion,u.newVersion,rr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const i2=["get","getKey","getAll","getAllKeys","count"],o2=["put","add","delete","clear"],yc=new Map;function rg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yc.get(e))return yc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=o2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||i2.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return yc.set(e,i),i}t2(t=>({...t,get:(e,n,r)=>rg(e,n)||t.get(e,n,r),has:(e,n)=>!!rg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(l2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function l2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ad="@firebase/app",sg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn=new Hh("@firebase/app"),u2="@firebase/app-compat",c2="@firebase/analytics-compat",d2="@firebase/analytics",h2="@firebase/app-check-compat",f2="@firebase/app-check",p2="@firebase/auth",m2="@firebase/auth-compat",g2="@firebase/database",y2="@firebase/data-connect",v2="@firebase/database-compat",_2="@firebase/functions",x2="@firebase/functions-compat",w2="@firebase/installations",E2="@firebase/installations-compat",T2="@firebase/messaging",I2="@firebase/messaging-compat",k2="@firebase/performance",A2="@firebase/performance-compat",S2="@firebase/remote-config",R2="@firebase/remote-config-compat",N2="@firebase/storage",b2="@firebase/storage-compat",C2="@firebase/firestore",P2="@firebase/vertexai-preview",j2="@firebase/firestore-compat",L2="firebase",D2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="[DEFAULT]",O2={[Ad]:"fire-core",[u2]:"fire-core-compat",[d2]:"fire-analytics",[c2]:"fire-analytics-compat",[f2]:"fire-app-check",[h2]:"fire-app-check-compat",[p2]:"fire-auth",[m2]:"fire-auth-compat",[g2]:"fire-rtdb",[y2]:"fire-data-connect",[v2]:"fire-rtdb-compat",[_2]:"fire-fn",[x2]:"fire-fn-compat",[w2]:"fire-iid",[E2]:"fire-iid-compat",[T2]:"fire-fcm",[I2]:"fire-fcm-compat",[k2]:"fire-perf",[A2]:"fire-perf-compat",[S2]:"fire-rc",[R2]:"fire-rc-compat",[N2]:"fire-gcs",[b2]:"fire-gcs-compat",[C2]:"fire-fst",[j2]:"fire-fst-compat",[P2]:"fire-vertex","fire-js":"fire-js",[L2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=new Map,M2=new Map,Rd=new Map;function ig(t,e){try{t.container.addComponent(e)}catch(n){kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Os(t){const e=t.name;if(Rd.has(e))return kn.debug(`There were multiple attempts to register component ${e}.`),!1;Rd.set(e,t);for(const n of Tl.values())ig(n,t);for(const n of M2.values())ig(n,t);return!0}function qv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new No("app","Firebase",V2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=D2;function Qv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw sr.create("bad-app-name",{appName:String(s)});if(n||(n=Hv()),!n)throw sr.create("no-options");const i=Tl.get(s);if(i){if(El(n,i.options)&&El(r,i.config))return i;throw sr.create("duplicate-app",{appName:s})}const o=new WI(s);for(const u of Rd.values())o.addComponent(u);const l=new F2(n,r,o);return Tl.set(s,l),l}function U2(t=Sd){const e=Tl.get(t);if(!e&&t===Sd&&Hv())return Qv();if(!e)throw sr.create("no-app",{appName:t});return e}function ir(t,e,n){var r;let s=(r=O2[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kn.warn(l.join(" "));return}Os(new Fr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="firebase-heartbeat-database",z2=1,uo="firebase-heartbeat-store";let vc=null;function Yv(){return vc||(vc=s2(B2,z2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uo)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),vc}async function $2(t){try{const n=(await Yv()).transaction(uo),r=await n.objectStore(uo).get(Xv(t));return await n.done,r}catch(e){if(e instanceof bn)kn.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kn.warn(n.message)}}}async function og(t,e){try{const r=(await Yv()).transaction(uo,"readwrite");await r.objectStore(uo).put(e,Xv(t)),await r.done}catch(n){if(n instanceof bn)kn.warn(n.message);else{const r=sr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kn.warn(r.message)}}}function Xv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=1024,W2=30*24*60*60*1e3;class G2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ag();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=W2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ag(),{heartbeatsToSend:r,unsentEntries:s}=K2(this._heartbeatsCache.heartbeats),i=zv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return kn.warn(n),""}}}function ag(){return new Date().toISOString().substring(0,10)}function K2(t,e=H2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),lg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),lg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class q2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jI()?LI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return og(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return og(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lg(t){return zv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){Os(new Fr("platform-logger",e=>new a2(e),"PRIVATE")),Os(new Fr("heartbeat",e=>new G2(e),"PRIVATE")),ir(Ad,sg,t),ir(Ad,sg,"esm2017"),ir("fire-js","")}Q2("");function Gh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Zv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y2=Zv,Jv=new No("auth","Firebase",Zv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new Hh("@firebase/auth");function X2(t,...e){Il.logLevel<=te.WARN&&Il.warn(`Auth (${Gs}): ${t}`,...e)}function za(t,...e){Il.logLevel<=te.ERROR&&Il.error(`Auth (${Gs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t,...e){throw Kh(t,...e)}function Xt(t,...e){return Kh(t,...e)}function e1(t,e,n){const r=Object.assign(Object.assign({},Y2()),{[e]:n});return new No("auth","Firebase",r).create(e,{appName:t.name})}function _n(t){return e1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Jv.create(t,...e)}function q(t,e,...n){if(!t)throw Kh(e,...n)}function mn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw za(e),new Error(e)}function An(t,e){t||mn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Z2(){return ug()==="http:"||ug()==="https:"}function ug(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z2()||NI()||"connection"in navigator)?navigator.onLine:!0}function ek(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.shortDelay=e,this.longDelay=n,An(n>e,"Short delay should be less than long delay!"),this.isMobile=AI()||bI()}get(){return J2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(t,e){An(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new Co(3e4,6e4);function gr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yr(t,e,n,r,s={}){return n1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=bo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return RI()||(d.referrerPolicy="no-referrer"),t1.fetch()(r1(t,t.config.apiHost,n,l),d)})}async function n1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tk),e);try{const s=new sk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ta(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ta(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ta(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ta(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw e1(t,p,d);$t(t,p)}}catch(s){if(s instanceof bn)throw s;$t(t,"network-request-failed",{message:String(s)})}}async function Po(t,e,n,r,s={}){const i=await yr(t,e,n,r,s);return"mfaPendingCredential"in i&&$t(t,"multi-factor-auth-required",{_serverResponse:i}),i}function r1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?qh(t.config,s):`${t.config.apiScheme}://${s}`}function rk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xt(this.auth,"network-request-failed")),nk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ta(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Xt(t,e,r);return s.customData._tokenResponse=n,s}function cg(t){return t!==void 0&&t.enterprise!==void 0}class ik{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ok(t,e){return yr(t,"GET","/v2/recaptchaConfig",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,e){return yr(t,"POST","/v1/accounts:delete",e)}async function s1(t,e){return yr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lk(t,e=!1){const n=wt(t),r=await n.getIdToken(e),s=Qh(r);q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Fi(_c(s.auth_time)),issuedAtTime:Fi(_c(s.iat)),expirationTime:Fi(_c(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function _c(t){return Number(t)*1e3}function Qh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return za("JWT malformed, contained fewer than 3 sections"),null;try{const s=$v(n);return s?JSON.parse(s):(za("Failed to decode base64 JWT payload"),null)}catch(s){return za("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function dg(t){const e=Qh(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bn&&uk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function uk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fi(this.lastLoginAt),this.creationTime=Fi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await co(t,s1(n,{idToken:r}));q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?i1(i.providerUserInfo):[],l=hk(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new bd(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function dk(t){const e=wt(t);await kl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function i1(t){return t.map(e=>{var{providerId:n}=e,r=Gh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){const n=await n1(t,{},async()=>{const r=bo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=r1(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",t1.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pk(t,e){return yr(t,"POST","/v2/accounts:revokeToken",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");const n=dg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ks;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ks,this.toJSON())}_performRefresh(){return mn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class gn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Gh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ck(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new bd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await co(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lk(this,e)}reload(){return dk(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qt(this.auth.app))return Promise.reject(_n(this.auth));const e=await this.getIdToken();return await co(this,ak(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,S=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(l=n.tenantId)!==null&&l!==void 0?l:void 0,j=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:I,emailVerified:w,isAnonymous:U,providerData:B,stsTokenManager:x}=n;q(I&&x,e,"internal-error");const v=ks.fromJSON(this.name,x);q(typeof I=="string",e,"internal-error"),Dn(m,e.name),Dn(g,e.name),q(typeof w=="boolean",e,"internal-error"),q(typeof U=="boolean",e,"internal-error"),Dn(S,e.name),Dn(N,e.name),Dn(P,e.name),Dn(j,e.name),Dn(E,e.name),Dn(_,e.name);const T=new gn({uid:I,auth:e,email:g,emailVerified:w,displayName:m,isAnonymous:U,photoURL:N,phoneNumber:S,tenantId:P,stsTokenManager:v,createdAt:E,lastLoginAt:_});return B&&Array.isArray(B)&&(T.providerData=B.map(k=>Object.assign({},k))),j&&(T._redirectEventId=j),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new ks;s.updateFromServerResponse(n);const i=new gn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?i1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ks;l.updateFromIdToken(r);const u=new gn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new bd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=new Map;function yn(t){An(t instanceof Function,"Expected a class definition");let e=hg.get(t);return e?(An(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,hg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o1.type="NONE";const fg=o1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e,n){return`firebase:${t}:${e}:${n}`}class As{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=$a(this.userKey,s.apiKey,i),this.fullPersistenceKey=$a("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?gn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new As(yn(fg),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||yn(fg);const o=$a(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const p=await d._get(o);if(p){const m=gn._fromJSON(e,p);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new As(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new As(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h1(e))return"Blackberry";if(f1(e))return"Webos";if(l1(e))return"Safari";if((e.includes("chrome/")||u1(e))&&!e.includes("edge/"))return"Chrome";if(d1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function a1(t=nt()){return/firefox\//i.test(t)}function l1(t=nt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u1(t=nt()){return/crios\//i.test(t)}function c1(t=nt()){return/iemobile/i.test(t)}function d1(t=nt()){return/android/i.test(t)}function h1(t=nt()){return/blackberry/i.test(t)}function f1(t=nt()){return/webos/i.test(t)}function Yh(t=nt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mk(t=nt()){var e;return Yh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gk(){return CI()&&document.documentMode===10}function p1(t=nt()){return Yh(t)||d1(t)||f1(t)||h1(t)||/windows phone/i.test(t)||c1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t,e=[]){let n;switch(t){case"Browser":n=pg(nt());break;case"Worker":n=`${pg(nt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e={}){return yr(t,"GET","/v2/passwordPolicy",gr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=6;class xk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_k,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mg(this),this.idTokenSubscription=new mg(this),this.beforeStateQueue=new yk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await As.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await s1(this,{idToken:e}),r=await gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ek()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qt(this.app))return Promise.reject(_n(this));const n=e?wt(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qt(this.app)?Promise.reject(_n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qt(this.app)?Promise.reject(_n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vk(this),n=new xk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new No("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yn(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await As.create(this,[yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&X2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Qr(t){return wt(t)}class mg{constructor(e){this.auth=e,this.observer=null,this.addObserver=FI(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ek(t){ru=t}function g1(t){return ru.loadJS(t)}function Tk(){return ru.recaptchaEnterpriseScript}function Ik(){return ru.gapiScript}function kk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Ak="recaptcha-enterprise",Sk="NO_RECAPTCHA";class Rk{constructor(e){this.type=Ak,this.auth=Qr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{ok(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new ik(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;cg(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Sk)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&cg(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Tk();u.length!==0&&(u+=l),g1(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function gg(t,e,n,r=!1){const s=new Rk(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Cd(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await gg(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await gg(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t,e){const n=qv(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(El(i,e??{}))return s;$t(s,"already-initialized")}return n.initialize({options:e})}function bk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ck(t,e,n){const r=Qr(t);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=y1(e),{host:o,port:l}=Pk(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),jk()}function y1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Pk(t){const e=y1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:yg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:yg(o)}}}function yg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mn("not implemented")}_getIdTokenResponse(e){return mn("not implemented")}_linkToIdToken(e,n){return mn("not implemented")}_getReauthenticationResolver(e){return mn("not implemented")}}async function Lk(t,e){return yr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(t,e){return Po(t,"POST","/v1/accounts:signInWithPassword",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(t,e){return Po(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,e))}async function Mk(t,e){return Po(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends Xh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ho(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ho(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,n,"signInWithPassword",Dk);case"emailLink":return Ok(e,{email:this._email,oobCode:this._password});default:$t(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,r,"signUpPassword",Lk);case"emailLink":return Mk(e,{idToken:n,email:this._email,oobCode:this._password});default:$t(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ss(t,e){return Po(t,"POST","/v1/accounts:signInWithIdp",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="http://localhost";class Ur extends Xh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ur(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$t("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Gh(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ur(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ss(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ss(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ss(e,n)}buildRequest(){const e={requestUri:Vk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Uk(t){const e=ki(Ai(t)).link,n=e?ki(Ai(e)).deep_link_id:null,r=ki(Ai(t)).deep_link_id;return(r?ki(Ai(r)).link:null)||r||n||e||t}class Zh{constructor(e){var n,r,s,i,o,l;const u=ki(Ai(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,m=Fk((s=u.mode)!==null&&s!==void 0?s:null);q(d&&p&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=p,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=Uk(e);try{return new Zh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.providerId=Ks.PROVIDER_ID}static credential(e,n){return ho._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zh.parseLink(n);return q(r,"argument-error"),ho._fromEmailAndCode(e,r.code,r.tenantId)}}Ks.PROVIDER_ID="password";Ks.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ks.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends v1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends jo{constructor(){super("facebook.com")}static credential(e){return Ur._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Un.credential(e.oauthAccessToken)}catch{return null}}}Un.FACEBOOK_SIGN_IN_METHOD="facebook.com";Un.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends jo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ur._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bn.credential(n,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends jo{constructor(){super("github.com")}static credential(e){return Ur._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zn.credential(e.oauthAccessToken)}catch{return null}}}zn.GITHUB_SIGN_IN_METHOD="github.com";zn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends jo{constructor(){super("twitter.com")}static credential(e,n){return Ur._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $n.credential(n,r)}catch{return null}}}$n.TWITTER_SIGN_IN_METHOD="twitter.com";$n.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(t,e){return Po(t,"POST","/v1/accounts:signUp",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await gn._fromIdTokenResponse(e,r,s),o=vg(r);return new Br({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=vg(r);return new Br({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function vg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends bn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Al.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Al(e,n,r,s)}}function _1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Al._fromErrorAndOperation(t,i,e,r):i})}async function zk(t,e,n=!1){const r=await co(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Br._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k(t,e,n=!1){const{auth:r}=t;if(qt(r.app))return Promise.reject(_n(r));const s="reauthenticate";try{const i=await co(t,_1(r,s,e,t),n);q(i.idToken,r,"internal-error");const o=Qh(i.idToken);q(o,r,"internal-error");const{sub:l}=o;return q(t.uid===l,r,"user-mismatch"),Br._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$t(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(t,e,n=!1){if(qt(t.app))return Promise.reject(_n(t));const r="signIn",s=await _1(t,r,e),i=await Br._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Hk(t,e){return x1(Qr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(t){const e=Qr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wk(t,e,n){if(qt(t.app))return Promise.reject(_n(t));const r=Qr(t),o=await Cd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bk).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&w1(t),u}),l=await Br._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Gk(t,e,n){return qt(t.app)?Promise.reject(_n(t)):Hk(wt(t),Ks.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&w1(t),r})}function Kk(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function qk(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function Qk(t,e,n,r){return wt(t).onAuthStateChanged(e,n,r)}function Yk(t){return wt(t).signOut()}const Sl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sl,"1"),this.storage.removeItem(Sl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=1e3,Zk=10;class T1 extends E1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);gk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Zk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Xk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}T1.type="LOCAL";const Jk=T1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1 extends E1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}I1.type="SESSION";const k1=I1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new su(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await eA(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}su.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=Jh("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return window}function nA(t){Zt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(){return typeof Zt().WorkerGlobalScope<"u"&&typeof Zt().importScripts=="function"}async function rA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function iA(){return A1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="firebaseLocalStorageDb",oA=1,Rl="firebaseLocalStorage",R1="fbase_key";class Lo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function iu(t,e){return t.transaction([Rl],e?"readwrite":"readonly").objectStore(Rl)}function aA(){const t=indexedDB.deleteDatabase(S1);return new Lo(t).toPromise()}function Pd(){const t=indexedDB.open(S1,oA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Rl,{keyPath:R1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Rl)?e(r):(r.close(),await aA(),e(await Pd()))})})}async function _g(t,e,n){const r=iu(t,!0).put({[R1]:e,value:n});return new Lo(r).toPromise()}async function lA(t,e){const n=iu(t,!1).get(e),r=await new Lo(n).toPromise();return r===void 0?null:r.value}function xg(t,e){const n=iu(t,!0).delete(e);return new Lo(n).toPromise()}const uA=800,cA=3;class N1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>cA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=su._getInstance(iA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await rA(),!this.activeServiceWorker)return;this.sender=new tA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pd();return await _g(e,Sl,"1"),await xg(e,Sl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_g(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=iu(s,!1).getAll();return new Lo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N1.type="LOCAL";const dA=N1;new Co(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t,e){return e?yn(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Xh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ss(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ss(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ss(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fA(t){return x1(t.auth,new ef(t),t.bypassAuthState)}function pA(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),$k(n,new ef(t),t.bypassAuthState)}async function mA(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),zk(n,new ef(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fA;case"linkViaPopup":case"linkViaRedirect":return mA;case"reauthViaPopup":case"reauthViaRedirect":return pA;default:$t(this.auth,"internal-error")}}resolve(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){An(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=new Co(2e3,1e4);class vs extends b1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,vs.currentPopupAction&&vs.currentPopupAction.cancel(),vs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){An(this.filter.length===1,"Popup operations only handle one event");const e=Jh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gA.get())};e()}}vs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="pendingRedirect",Ha=new Map;class vA extends b1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ha.get(this.auth._key());if(!e){try{const r=await _A(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ha.set(this.auth._key(),e)}return this.bypassAuthState||Ha.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _A(t,e){const n=EA(e),r=wA(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function xA(t,e){Ha.set(t._key(),e)}function wA(t){return yn(t._redirectPersistence)}function EA(t){return $a(yA,t.config.apiKey,t.name)}async function TA(t,e,n=!1){if(qt(t.app))return Promise.reject(_n(t));const r=Qr(t),s=hA(r,e),o=await new vA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=10*60*1e3;class kA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!C1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IA&&this.cachedEventUids.clear(),this.cachedEventUids.has(wg(e))}saveEventToCache(e){this.cachedEventUids.add(wg(e)),this.lastProcessedEventTime=Date.now()}}function wg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function C1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return C1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e={}){return yr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NA=/^https?/;async function bA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SA(t);for(const n of e)try{if(CA(n))return}catch{}$t(t,"unauthorized-domain")}function CA(t){const e=Nd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!NA.test(n))return!1;if(RA.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=new Co(3e4,6e4);function Eg(){const t=Zt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jA(t){return new Promise((e,n)=>{var r,s,i;function o(){Eg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Eg(),n(Xt(t,"network-request-failed"))},timeout:PA.get()})}if(!((s=(r=Zt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Zt().gapi)===null||i===void 0)&&i.load)o();else{const l=kk("iframefcb");return Zt()[l]=()=>{gapi.load?o():n(Xt(t,"network-request-failed"))},g1(`${Ik()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Wa=null,e})}let Wa=null;function LA(t){return Wa=Wa||jA(t),Wa}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=new Co(5e3,15e3),OA="__/auth/iframe",MA="emulator/auth/iframe",VA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UA(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qh(e,MA):`https://${t.config.authDomain}/${OA}`,r={apiKey:e.apiKey,appName:t.name,v:Gs},s=FA.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${bo(r).slice(1)}`}async function BA(t){const e=await LA(t),n=Zt().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:UA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VA,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Xt(t,"network-request-failed"),l=Zt().setTimeout(()=>{i(o)},DA.get());function u(){Zt().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$A=500,HA=600,WA="_blank",GA="http://localhost";class Tg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KA(t,e,n,r=$A,s=HA){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},zA),{width:r.toString(),height:s.toString(),top:i,left:o}),d=nt().toLowerCase();n&&(l=u1(d)?WA:n),a1(d)&&(e=e||GA,u.scrollbars="yes");const p=Object.entries(u).reduce((g,[S,N])=>`${g}${S}=${N},`,"");if(mk(d)&&l!=="_self")return qA(e||"",l),new Tg(null);const m=window.open(e||"",l,p);q(m,t,"popup-blocked");try{m.focus()}catch{}return new Tg(m)}function qA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="__/auth/handler",YA="emulator/auth/handler",XA=encodeURIComponent("fac");async function Ig(t,e,n,r,s,i){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Gs,eventId:s};if(e instanceof v1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",VI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof jo){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const u=await t._getAppCheckToken(),d=u?`#${XA}=${encodeURIComponent(u)}`:"";return`${ZA(t)}?${bo(l).slice(1)}${d}`}function ZA({config:t}){return t.emulator?qh(t,YA):`https://${t.authDomain}/${QA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc="webStorageSupport";class JA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k1,this._completeRedirectFn=TA,this._overrideRedirectResult=xA}async _openPopup(e,n,r,s){var i;An((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Ig(e,n,r,Nd(),s);return KA(e,o,Jh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Ig(e,n,r,Nd(),s);return nA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(An(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await BA(e),r=new kA(e);return n.register("authEvent",s=>(q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xc,{type:xc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[xc];o!==void 0&&n(!!o),$t(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return p1()||l1()||Yh()}}const eS=JA;var kg="@firebase/auth",Ag="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rS(t){Os(new Fr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m1(t)},d=new wk(r,s,i,u);return bk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Os(new Fr("auth-internal",e=>{const n=Qr(e.getProvider("auth").getImmediate());return(r=>new tS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(kg,Ag,nS(t)),ir(kg,Ag,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=5*60,iS=Wv("authIdTokenMaxAge")||sS;let Sg=null;const oS=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iS)return;const s=n==null?void 0:n.token;Sg!==s&&(Sg=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function aS(t=U2()){const e=qv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Nk(t,{popupRedirectResolver:eS,persistence:[dA,Jk,k1]}),r=Wv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=oS(i.toString());qk(n,o,()=>o(n.currentUser)),Kk(n,l=>o(l))}}const s=II("auth");return s&&Ck(n,`http://${s}`),n}function lS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ek({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Xt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",lS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rS("Browser");var Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pr,P1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function T(){}T.prototype=v.prototype,x.D=v.prototype,x.prototype=new T,x.prototype.constructor=x,x.C=function(k,R,b){for(var A=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)A[ut-2]=arguments[ut];return v.prototype[R].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,v,T){T||(T=0);var k=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)k[R]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(R=0;16>R;++R)k[R]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=x.g[0],T=x.g[1],R=x.g[2];var b=x.g[3],A=v+(b^T&(R^b))+k[0]+3614090360&4294967295;v=T+(A<<7&4294967295|A>>>25),A=b+(R^v&(T^R))+k[1]+3905402710&4294967295,b=v+(A<<12&4294967295|A>>>20),A=R+(T^b&(v^T))+k[2]+606105819&4294967295,R=b+(A<<17&4294967295|A>>>15),A=T+(v^R&(b^v))+k[3]+3250441966&4294967295,T=R+(A<<22&4294967295|A>>>10),A=v+(b^T&(R^b))+k[4]+4118548399&4294967295,v=T+(A<<7&4294967295|A>>>25),A=b+(R^v&(T^R))+k[5]+1200080426&4294967295,b=v+(A<<12&4294967295|A>>>20),A=R+(T^b&(v^T))+k[6]+2821735955&4294967295,R=b+(A<<17&4294967295|A>>>15),A=T+(v^R&(b^v))+k[7]+4249261313&4294967295,T=R+(A<<22&4294967295|A>>>10),A=v+(b^T&(R^b))+k[8]+1770035416&4294967295,v=T+(A<<7&4294967295|A>>>25),A=b+(R^v&(T^R))+k[9]+2336552879&4294967295,b=v+(A<<12&4294967295|A>>>20),A=R+(T^b&(v^T))+k[10]+4294925233&4294967295,R=b+(A<<17&4294967295|A>>>15),A=T+(v^R&(b^v))+k[11]+2304563134&4294967295,T=R+(A<<22&4294967295|A>>>10),A=v+(b^T&(R^b))+k[12]+1804603682&4294967295,v=T+(A<<7&4294967295|A>>>25),A=b+(R^v&(T^R))+k[13]+4254626195&4294967295,b=v+(A<<12&4294967295|A>>>20),A=R+(T^b&(v^T))+k[14]+2792965006&4294967295,R=b+(A<<17&4294967295|A>>>15),A=T+(v^R&(b^v))+k[15]+1236535329&4294967295,T=R+(A<<22&4294967295|A>>>10),A=v+(R^b&(T^R))+k[1]+4129170786&4294967295,v=T+(A<<5&4294967295|A>>>27),A=b+(T^R&(v^T))+k[6]+3225465664&4294967295,b=v+(A<<9&4294967295|A>>>23),A=R+(v^T&(b^v))+k[11]+643717713&4294967295,R=b+(A<<14&4294967295|A>>>18),A=T+(b^v&(R^b))+k[0]+3921069994&4294967295,T=R+(A<<20&4294967295|A>>>12),A=v+(R^b&(T^R))+k[5]+3593408605&4294967295,v=T+(A<<5&4294967295|A>>>27),A=b+(T^R&(v^T))+k[10]+38016083&4294967295,b=v+(A<<9&4294967295|A>>>23),A=R+(v^T&(b^v))+k[15]+3634488961&4294967295,R=b+(A<<14&4294967295|A>>>18),A=T+(b^v&(R^b))+k[4]+3889429448&4294967295,T=R+(A<<20&4294967295|A>>>12),A=v+(R^b&(T^R))+k[9]+568446438&4294967295,v=T+(A<<5&4294967295|A>>>27),A=b+(T^R&(v^T))+k[14]+3275163606&4294967295,b=v+(A<<9&4294967295|A>>>23),A=R+(v^T&(b^v))+k[3]+4107603335&4294967295,R=b+(A<<14&4294967295|A>>>18),A=T+(b^v&(R^b))+k[8]+1163531501&4294967295,T=R+(A<<20&4294967295|A>>>12),A=v+(R^b&(T^R))+k[13]+2850285829&4294967295,v=T+(A<<5&4294967295|A>>>27),A=b+(T^R&(v^T))+k[2]+4243563512&4294967295,b=v+(A<<9&4294967295|A>>>23),A=R+(v^T&(b^v))+k[7]+1735328473&4294967295,R=b+(A<<14&4294967295|A>>>18),A=T+(b^v&(R^b))+k[12]+2368359562&4294967295,T=R+(A<<20&4294967295|A>>>12),A=v+(T^R^b)+k[5]+4294588738&4294967295,v=T+(A<<4&4294967295|A>>>28),A=b+(v^T^R)+k[8]+2272392833&4294967295,b=v+(A<<11&4294967295|A>>>21),A=R+(b^v^T)+k[11]+1839030562&4294967295,R=b+(A<<16&4294967295|A>>>16),A=T+(R^b^v)+k[14]+4259657740&4294967295,T=R+(A<<23&4294967295|A>>>9),A=v+(T^R^b)+k[1]+2763975236&4294967295,v=T+(A<<4&4294967295|A>>>28),A=b+(v^T^R)+k[4]+1272893353&4294967295,b=v+(A<<11&4294967295|A>>>21),A=R+(b^v^T)+k[7]+4139469664&4294967295,R=b+(A<<16&4294967295|A>>>16),A=T+(R^b^v)+k[10]+3200236656&4294967295,T=R+(A<<23&4294967295|A>>>9),A=v+(T^R^b)+k[13]+681279174&4294967295,v=T+(A<<4&4294967295|A>>>28),A=b+(v^T^R)+k[0]+3936430074&4294967295,b=v+(A<<11&4294967295|A>>>21),A=R+(b^v^T)+k[3]+3572445317&4294967295,R=b+(A<<16&4294967295|A>>>16),A=T+(R^b^v)+k[6]+76029189&4294967295,T=R+(A<<23&4294967295|A>>>9),A=v+(T^R^b)+k[9]+3654602809&4294967295,v=T+(A<<4&4294967295|A>>>28),A=b+(v^T^R)+k[12]+3873151461&4294967295,b=v+(A<<11&4294967295|A>>>21),A=R+(b^v^T)+k[15]+530742520&4294967295,R=b+(A<<16&4294967295|A>>>16),A=T+(R^b^v)+k[2]+3299628645&4294967295,T=R+(A<<23&4294967295|A>>>9),A=v+(R^(T|~b))+k[0]+4096336452&4294967295,v=T+(A<<6&4294967295|A>>>26),A=b+(T^(v|~R))+k[7]+1126891415&4294967295,b=v+(A<<10&4294967295|A>>>22),A=R+(v^(b|~T))+k[14]+2878612391&4294967295,R=b+(A<<15&4294967295|A>>>17),A=T+(b^(R|~v))+k[5]+4237533241&4294967295,T=R+(A<<21&4294967295|A>>>11),A=v+(R^(T|~b))+k[12]+1700485571&4294967295,v=T+(A<<6&4294967295|A>>>26),A=b+(T^(v|~R))+k[3]+2399980690&4294967295,b=v+(A<<10&4294967295|A>>>22),A=R+(v^(b|~T))+k[10]+4293915773&4294967295,R=b+(A<<15&4294967295|A>>>17),A=T+(b^(R|~v))+k[1]+2240044497&4294967295,T=R+(A<<21&4294967295|A>>>11),A=v+(R^(T|~b))+k[8]+1873313359&4294967295,v=T+(A<<6&4294967295|A>>>26),A=b+(T^(v|~R))+k[15]+4264355552&4294967295,b=v+(A<<10&4294967295|A>>>22),A=R+(v^(b|~T))+k[6]+2734768916&4294967295,R=b+(A<<15&4294967295|A>>>17),A=T+(b^(R|~v))+k[13]+1309151649&4294967295,T=R+(A<<21&4294967295|A>>>11),A=v+(R^(T|~b))+k[4]+4149444226&4294967295,v=T+(A<<6&4294967295|A>>>26),A=b+(T^(v|~R))+k[11]+3174756917&4294967295,b=v+(A<<10&4294967295|A>>>22),A=R+(v^(b|~T))+k[2]+718787259&4294967295,R=b+(A<<15&4294967295|A>>>17),A=T+(b^(R|~v))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+b&4294967295}r.prototype.u=function(x,v){v===void 0&&(v=x.length);for(var T=v-this.blockSize,k=this.B,R=this.h,b=0;b<v;){if(R==0)for(;b<=T;)s(this,x,b),b+=this.blockSize;if(typeof x=="string"){for(;b<v;)if(k[R++]=x.charCodeAt(b++),R==this.blockSize){s(this,k),R=0;break}}else for(;b<v;)if(k[R++]=x[b++],R==this.blockSize){s(this,k),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;var T=8*this.o;for(v=x.length-8;v<x.length;++v)x[v]=T&255,T/=256;for(this.u(x),x=Array(16),v=T=0;4>v;++v)for(var k=0;32>k;k+=8)x[T++]=this.g[v]>>>k&255;return x};function i(x,v){var T=l;return Object.prototype.hasOwnProperty.call(T,x)?T[x]:T[x]=v(x)}function o(x,v){this.h=v;for(var T=[],k=!0,R=x.length-1;0<=R;R--){var b=x[R]|0;k&&b==v||(T[R]=b,k=!1)}this.g=T}var l={};function u(x){return-128<=x&&128>x?i(x,function(v){return new o([v|0],0>v?-1:0)}):new o([x|0],0>x?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return m;if(0>x)return j(d(-x));for(var v=[],T=1,k=0;x>=T;k++)v[k]=x/T|0,T*=4294967296;return new o(v,0)}function p(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return j(p(x.substring(1),v));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(v,8)),k=m,R=0;R<x.length;R+=8){var b=Math.min(8,x.length-R),A=parseInt(x.substring(R,R+b),v);8>b?(b=d(Math.pow(v,b)),k=k.j(b).add(d(A))):(k=k.j(T),k=k.add(d(A)))}return k}var m=u(0),g=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-j(this).m();for(var x=0,v=1,T=0;T<this.g.length;T++){var k=this.i(T);x+=(0<=k?k:4294967296+k)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N(this))return"0";if(P(this))return"-"+j(this).toString(x);for(var v=d(Math.pow(x,6)),T=this,k="";;){var R=w(T,v).g;T=E(T,R.j(v));var b=((0<T.g.length?T.g[0]:T.h)>>>0).toString(x);if(T=R,N(T))return b+k;for(;6>b.length;)b="0"+b;k=b+k}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function N(x){if(x.h!=0)return!1;for(var v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function P(x){return x.h==-1}t.l=function(x){return x=E(this,x),P(x)?-1:N(x)?0:1};function j(x){for(var v=x.g.length,T=[],k=0;k<v;k++)T[k]=~x.g[k];return new o(T,~x.h).add(g)}t.abs=function(){return P(this)?j(this):this},t.add=function(x){for(var v=Math.max(this.g.length,x.g.length),T=[],k=0,R=0;R<=v;R++){var b=k+(this.i(R)&65535)+(x.i(R)&65535),A=(b>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);k=A>>>16,b&=65535,A&=65535,T[R]=A<<16|b}return new o(T,T[T.length-1]&-2147483648?-1:0)};function E(x,v){return x.add(j(v))}t.j=function(x){if(N(this)||N(x))return m;if(P(this))return P(x)?j(this).j(j(x)):j(j(this).j(x));if(P(x))return j(this.j(j(x)));if(0>this.l(S)&&0>x.l(S))return d(this.m()*x.m());for(var v=this.g.length+x.g.length,T=[],k=0;k<2*v;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<x.g.length;R++){var b=this.i(k)>>>16,A=this.i(k)&65535,ut=x.i(R)>>>16,rn=x.i(R)&65535;T[2*k+2*R]+=A*rn,_(T,2*k+2*R),T[2*k+2*R+1]+=b*rn,_(T,2*k+2*R+1),T[2*k+2*R+1]+=A*ut,_(T,2*k+2*R+1),T[2*k+2*R+2]+=b*ut,_(T,2*k+2*R+2)}for(k=0;k<v;k++)T[k]=T[2*k+1]<<16|T[2*k];for(k=v;k<2*v;k++)T[k]=0;return new o(T,0)};function _(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function I(x,v){this.g=x,this.h=v}function w(x,v){if(N(v))throw Error("division by zero");if(N(x))return new I(m,m);if(P(x))return v=w(j(x),v),new I(j(v.g),j(v.h));if(P(v))return v=w(x,j(v)),new I(j(v.g),v.h);if(30<x.g.length){if(P(x)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,k=v;0>=k.l(x);)T=U(T),k=U(k);var R=B(T,1),b=B(k,1);for(k=B(k,2),T=B(T,2);!N(k);){var A=b.add(k);0>=A.l(x)&&(R=R.add(T),b=A),k=B(k,1),T=B(T,1)}return v=E(x,R.j(v)),new I(R,v)}for(R=m;0<=x.l(v);){for(T=Math.max(1,Math.floor(x.m()/v.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),b=d(T),A=b.j(v);P(A)||0<A.l(x);)T-=k,b=d(T),A=b.j(v);N(b)&&(b=g),R=R.add(b),x=E(x,A)}return new I(R,x)}t.A=function(x){return w(this,x).h},t.and=function(x){for(var v=Math.max(this.g.length,x.g.length),T=[],k=0;k<v;k++)T[k]=this.i(k)&x.i(k);return new o(T,this.h&x.h)},t.or=function(x){for(var v=Math.max(this.g.length,x.g.length),T=[],k=0;k<v;k++)T[k]=this.i(k)|x.i(k);return new o(T,this.h|x.h)},t.xor=function(x){for(var v=Math.max(this.g.length,x.g.length),T=[],k=0;k<v;k++)T[k]=this.i(k)^x.i(k);return new o(T,this.h^x.h)};function U(x){for(var v=x.g.length+1,T=[],k=0;k<v;k++)T[k]=x.i(k)<<1|x.i(k-1)>>>31;return new o(T,x.h)}function B(x,v){var T=v>>5;v%=32;for(var k=x.g.length-T,R=[],b=0;b<k;b++)R[b]=0<v?x.i(b+T)>>>v|x.i(b+T+1)<<32-v:x.i(b+T);return new o(R,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,P1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=p,Pr=o}).apply(typeof Rg<"u"?Rg:typeof self<"u"?self:typeof window<"u"?window:{});var Ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j1,Si,L1,Ga,jd,D1,O1,M1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ia=="object"&&Ia];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var C=a[y];if(!(C in f))break e;f=f[C]}a=a[a.length-1],y=f[a],h=h(y),h!=y&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,y=!1,C={next:function(){if(!y&&f<a.length){var D=f++;return{value:h(D,a[D]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function p(a,h,f){return a.call.apply(a.bind,arguments)}function m(a,h,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),a.apply(h,C)}}return function(){return a.apply(h,arguments)}}function g(a,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function S(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function N(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,C,D){for(var z=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)z[ce-2]=arguments[ce];return h.prototype[C].apply(y,z)}}function P(a){const h=a.length;if(0<h){const f=Array(h);for(let y=0;y<h;y++)f[y]=a[y];return f}return[]}function j(a,h){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(u(y)){const C=a.length||0,D=y.length||0;a.length=C+D;for(let z=0;z<D;z++)a[C+z]=y[z]}else a.push(y)}}class E{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function w(a){return w[" "](a),a}w[" "]=function(){};var U=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function B(a,h,f){for(const y in a)h.call(f,a[y],y,a)}function x(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function v(a){const h={};for(const f in a)h[f]=a[f];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,h){let f,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(f in y)a[f]=y[f];for(let D=0;D<T.length;D++)f=T[D],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function R(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function b(a){l.setTimeout(()=>{throw a},0)}function A(){var a=O;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class ut{constructor(){this.h=this.g=null}add(h,f){const y=rn.get();y.set(h,f),this.h?this.h.next=y:this.g=y,this.h=y}}var rn=new E(()=>new vr,a=>a.reset());class vr{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Pt,$=!1,O=new ut,Q=()=>{const a=l.Promise.resolve(void 0);Pt=()=>{a.then(ge)}};var ge=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(f){b(f)}var h=rn;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var sn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return a}();function on(a,h){if(ke.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(U){e:{try{w(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:an[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&on.aa.h.call(this)}}N(on,ke);var an={2:"touch",3:"pen",4:"mouse"};on.prototype.h=function(){on.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ln="closure_listenable_"+(1e6*Math.random()|0),cx=0;function dx(a,h,f,y,C){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!y,this.ha=C,this.key=++cx,this.da=this.fa=!1}function zo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function $o(a){this.src=a,this.g={},this.h=0}$o.prototype.add=function(a,h,f,y,C){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var z=_u(a,h,y,C);return-1<z?(h=a[z],f||(h.fa=!1)):(h=new dx(h,this.src,D,!!y,C),h.fa=f,a.push(h)),h};function vu(a,h){var f=h.type;if(f in a.g){var y=a.g[f],C=Array.prototype.indexOf.call(y,h,void 0),D;(D=0<=C)&&Array.prototype.splice.call(y,C,1),D&&(zo(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function _u(a,h,f,y){for(var C=0;C<a.length;++C){var D=a[C];if(!D.da&&D.listener==h&&D.capture==!!f&&D.ha==y)return C}return-1}var xu="closure_lm_"+(1e6*Math.random()|0),wu={};function Mf(a,h,f,y,C){if(Array.isArray(h)){for(var D=0;D<h.length;D++)Mf(a,h[D],f,y,C);return null}return f=Uf(f),a&&a[ln]?a.K(h,f,d(y)?!!y.capture:!!y,C):hx(a,h,f,!1,y,C)}function hx(a,h,f,y,C,D){if(!h)throw Error("Invalid event type");var z=d(C)?!!C.capture:!!C,ce=Tu(a);if(ce||(a[xu]=ce=new $o(a)),f=ce.add(h,f,y,z,D),f.proxy)return f;if(y=fx(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)sn||(C=z),C===void 0&&(C=!1),a.addEventListener(h.toString(),y,C);else if(a.attachEvent)a.attachEvent(Ff(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function fx(){function a(f){return h.call(a.src,a.listener,f)}const h=px;return a}function Vf(a,h,f,y,C){if(Array.isArray(h))for(var D=0;D<h.length;D++)Vf(a,h[D],f,y,C);else y=d(y)?!!y.capture:!!y,f=Uf(f),a&&a[ln]?(a=a.i,h=String(h).toString(),h in a.g&&(D=a.g[h],f=_u(D,f,y,C),-1<f&&(zo(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete a.g[h],a.h--)))):a&&(a=Tu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=_u(h,f,y,C)),(f=-1<a?h[a]:null)&&Eu(f))}function Eu(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[ln])vu(h.i,a);else{var f=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(f,y,a.capture):h.detachEvent?h.detachEvent(Ff(f),y):h.addListener&&h.removeListener&&h.removeListener(y),(f=Tu(h))?(vu(f,a),f.h==0&&(f.src=null,h[xu]=null)):zo(a)}}}function Ff(a){return a in wu?wu[a]:wu[a]="on"+a}function px(a,h){if(a.da)a=!0;else{h=new on(h,this);var f=a.listener,y=a.ha||a.src;a.fa&&Eu(a),a=f.call(y,h)}return a}function Tu(a){return a=a[xu],a instanceof $o?a:null}var Iu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uf(a){return typeof a=="function"?a:(a[Iu]||(a[Iu]=function(h){return a.handleEvent(h)}),a[Iu])}function Ke(){ue.call(this),this.i=new $o(this),this.M=this,this.F=null}N(Ke,ue),Ke.prototype[ln]=!0,Ke.prototype.removeEventListener=function(a,h,f,y){Vf(this,a,h,f,y)};function rt(a,h){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new ke(h,a);else if(h instanceof ke)h.target=h.target||a;else{var C=h;h=new ke(y,a),k(h,C)}if(C=!0,f)for(var D=f.length-1;0<=D;D--){var z=h.g=f[D];C=Ho(z,y,!0,h)&&C}if(z=h.g=a,C=Ho(z,y,!0,h)&&C,C=Ho(z,y,!1,h)&&C,f)for(D=0;D<f.length;D++)z=h.g=f[D],C=Ho(z,y,!1,h)&&C}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],y=0;y<f.length;y++)zo(f[y]);delete a.g[h],a.h--}}this.F=null},Ke.prototype.K=function(a,h,f,y){return this.i.add(String(a),h,!1,f,y)},Ke.prototype.L=function(a,h,f,y){return this.i.add(String(a),h,!0,f,y)};function Ho(a,h,f,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,D=0;D<h.length;++D){var z=h[D];if(z&&!z.da&&z.capture==f){var ce=z.listener,Fe=z.ha||z.src;z.fa&&vu(a.i,z),C=ce.call(Fe,y)!==!1&&C}}return C&&!y.defaultPrevented}function Bf(a,h,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function zf(a){a.g=Bf(()=>{a.g=null,a.i&&(a.i=!1,zf(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class mx extends ue{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:zf(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Js(a){ue.call(this),this.h=a,this.g={}}N(Js,ue);var $f=[];function Hf(a){B(a.g,function(h,f){this.g.hasOwnProperty(f)&&Eu(h)},a),a.g={}}Js.prototype.N=function(){Js.aa.N.call(this),Hf(this)},Js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ku=l.JSON.stringify,gx=l.JSON.parse,yx=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Au(){}Au.prototype.h=null;function Wf(a){return a.h||(a.h=a.i())}function Gf(){}var ei={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Su(){ke.call(this,"d")}N(Su,ke);function Ru(){ke.call(this,"c")}N(Ru,ke);var _r={},Kf=null;function Wo(){return Kf=Kf||new Ke}_r.La="serverreachability";function qf(a){ke.call(this,_r.La,a)}N(qf,ke);function ti(a){const h=Wo();rt(h,new qf(h))}_r.STAT_EVENT="statevent";function Qf(a,h){ke.call(this,_r.STAT_EVENT,a),this.stat=h}N(Qf,ke);function st(a){const h=Wo();rt(h,new Qf(h,a))}_r.Ma="timingevent";function Yf(a,h){ke.call(this,_r.Ma,a),this.size=h}N(Yf,ke);function ni(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function ri(){this.g=!0}ri.prototype.xa=function(){this.g=!1};function vx(a,h,f,y,C,D){a.info(function(){if(a.g)if(D)for(var z="",ce=D.split("&"),Fe=0;Fe<ce.length;Fe++){var ie=ce[Fe].split("=");if(1<ie.length){var qe=ie[0];ie=ie[1];var Qe=qe.split("_");z=2<=Qe.length&&Qe[1]=="type"?z+(qe+"="+ie+"&"):z+(qe+"=redacted&")}}else z=null;else z=D;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+h+`
`+f+`
`+z})}function _x(a,h,f,y,C,D,z){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+h+`
`+f+`
`+D+" "+z})}function Zr(a,h,f,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+wx(a,f)+(y?" "+y:"")})}function xx(a,h){a.info(function(){return"TIMEOUT: "+h})}ri.prototype.info=function(){};function wx(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var D=C[0];if(D!="noop"&&D!="stop"&&D!="close")for(var z=1;z<C.length;z++)C[z]=""}}}}return ku(f)}catch{return h}}var Go={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nu;function Ko(){}N(Ko,Au),Ko.prototype.g=function(){return new XMLHttpRequest},Ko.prototype.i=function(){return{}},Nu=new Ko;function Cn(a,h,f,y){this.j=a,this.i=h,this.l=f,this.R=y||1,this.U=new Js(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zf}function Zf(){this.i=null,this.g="",this.h=!1}var Jf={},bu={};function Cu(a,h,f){a.L=1,a.v=Xo(un(h)),a.m=f,a.P=!0,ep(a,null)}function ep(a,h){a.F=Date.now(),qo(a),a.A=un(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),pp(f.i,"t",y),a.C=0,f=a.j.J,a.h=new Zf,a.g=Pp(a.j,f?h:null,!a.m),0<a.O&&(a.M=new mx(g(a.Y,a,a.g),a.O)),h=a.U,f=a.g,y=a.ca;var C="readystatechange";Array.isArray(C)||(C&&($f[0]=C.toString()),C=$f);for(var D=0;D<C.length;D++){var z=Mf(f,C[D],y||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),ti(),vx(a.i,a.u,a.A,a.l,a.R,a.m)}Cn.prototype.ca=function(a){a=a.target;const h=this.M;h&&cn(a)==3?h.j():this.Y(a)},Cn.prototype.Y=function(a){try{if(a==this.g)e:{const Qe=cn(this.g);var h=this.g.Ba();const ts=this.g.Z();if(!(3>Qe)&&(Qe!=3||this.g&&(this.h.h||this.g.oa()||wp(this.g)))){this.J||Qe!=4||h==7||(h==8||0>=ts?ti(3):ti(2)),Pu(this);var f=this.g.Z();this.X=f;t:if(tp(this)){var y=wp(this.g);a="";var C=y.length,D=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xr(this),si(this);var z="";break t}this.h.i=new l.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(D&&h==C-1)});y.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,_x(this.i,this.u,this.A,this.l,this.R,Qe,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,Fe=this.g;if((ce=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ce)){var ie=ce;break t}}ie=null}if(f=ie)Zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ju(this,f);else{this.o=!1,this.s=3,st(12),xr(this),si(this);break e}}if(this.P){f=!0;let jt;for(;!this.J&&this.C<z.length;)if(jt=Ex(this,z),jt==bu){Qe==4&&(this.s=4,st(14),f=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Jf){this.s=4,st(15),Zr(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Zr(this.i,this.l,jt,null),ju(this,jt);if(tp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||z.length!=0||this.h.h||(this.s=1,st(16),f=!1),this.o=this.o&&f,!f)Zr(this.i,this.l,z,"[Invalid Chunked Response]"),xr(this),si(this);else if(0<z.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Fu(qe),qe.M=!0,st(11))}}else Zr(this.i,this.l,z,null),ju(this,z);Qe==4&&xr(this),this.o&&!this.J&&(Qe==4?Rp(this.j,this):(this.o=!1,qo(this)))}else Fx(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),xr(this),si(this)}}}catch{}finally{}};function tp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Ex(a,h){var f=a.C,y=h.indexOf(`
`,f);return y==-1?bu:(f=Number(h.substring(f,y)),isNaN(f)?Jf:(y+=1,y+f>h.length?bu:(h=h.slice(y,y+f),a.C=y+f,h)))}Cn.prototype.cancel=function(){this.J=!0,xr(this)};function qo(a){a.S=Date.now()+a.I,np(a,a.I)}function np(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ni(g(a.ba,a),h)}function Pu(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Cn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(xx(this.i,this.A),this.L!=2&&(ti(),st(17)),xr(this),this.s=2,si(this)):np(this,this.S-a)};function si(a){a.j.G==0||a.J||Rp(a.j,a)}function xr(a){Pu(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Hf(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function ju(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||Lu(f.h,a))){if(!a.K&&Lu(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)ra(f),ta(f);else break e;Vu(f),st(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ni(g(f.Za,f),6e3));if(1>=ip(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Er(f,11)}else if((a.K||f.g==a)&&ra(f),!_(h))for(C=f.Da.g.parse(h),h=0;h<C.length;h++){let ie=C[h];if(f.T=ie[0],ie=ie[1],f.G==2)if(ie[0]=="c"){f.K=ie[1],f.ia=ie[2];const qe=ie[3];qe!=null&&(f.la=qe,f.j.info("VER="+f.la));const Qe=ie[4];Qe!=null&&(f.Aa=Qe,f.j.info("SVER="+f.Aa));const ts=ie[5];ts!=null&&typeof ts=="number"&&0<ts&&(y=1.5*ts,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const jt=a.g;if(jt){const ia=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ia){var D=y.h;D.g||ia.indexOf("spdy")==-1&&ia.indexOf("quic")==-1&&ia.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Du(D,D.h),D.h=null))}if(y.D){const Uu=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Uu&&(y.ya=Uu,he(y.I,y.D,Uu))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var z=a;if(y.qa=Cp(y,y.J?y.ia:null,y.W),z.K){op(y.h,z);var ce=z,Fe=y.L;Fe&&(ce.I=Fe),ce.B&&(Pu(ce),qo(ce)),y.g=z}else Ap(y);0<f.i.length&&na(f)}else ie[0]!="stop"&&ie[0]!="close"||Er(f,7);else f.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?Er(f,7):Mu(f):ie[0]!="noop"&&f.l&&f.l.ta(ie),f.v=0)}}ti(4)}catch{}}var Tx=class{constructor(a,h){this.g=a,this.map=h}};function rp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ip(a){return a.h?1:a.g?a.g.size:0}function Lu(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Du(a,h){a.g?a.g.add(h):a.h=h}function op(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}rp.prototype.cancel=function(){if(this.i=ap(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ap(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return P(a.i)}function Ix(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],f=a.length,y=0;y<f;y++)h.push(a[y]);return h}h=[],f=0;for(y in a)h[f++]=a[y];return h}function kx(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const y in a)h[f++]=y;return h}}}function lp(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=kx(a),y=Ix(a),C=y.length,D=0;D<C;D++)h.call(void 0,y[D],f&&f[D],a)}var up=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ax(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),C=null;if(0<=y){var D=a[f].substring(0,y);C=a[f].substring(y+1)}else D=a[f];h(D,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function wr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof wr){this.h=a.h,Qo(this,a.j),this.o=a.o,this.g=a.g,Yo(this,a.s),this.l=a.l;var h=a.i,f=new ai;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),cp(this,f),this.m=a.m}else a&&(h=String(a).match(up))?(this.h=!1,Qo(this,h[1]||"",!0),this.o=ii(h[2]||""),this.g=ii(h[3]||"",!0),Yo(this,h[4]),this.l=ii(h[5]||"",!0),cp(this,h[6]||"",!0),this.m=ii(h[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}wr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(oi(h,dp,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(oi(h,dp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(oi(f,f.charAt(0)=="/"?Nx:Rx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",oi(f,Cx)),a.join("")};function un(a){return new wr(a)}function Qo(a,h,f){a.j=f?ii(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Yo(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function cp(a,h,f){h instanceof ai?(a.i=h,Px(a.i,a.h)):(f||(h=oi(h,bx)),a.i=new ai(h,a.h))}function he(a,h,f){a.i.set(h,f)}function Xo(a){return he(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ii(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function oi(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,Sx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Sx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var dp=/[#\/\?@]/g,Rx=/[#\?:]/g,Nx=/[#\?]/g,bx=/[#\?@]/g,Cx=/#/g;function ai(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Pn(a){a.g||(a.g=new Map,a.h=0,a.i&&Ax(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=ai.prototype,t.add=function(a,h){Pn(this),this.i=null,a=Jr(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function hp(a,h){Pn(a),h=Jr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function fp(a,h){return Pn(a),h=Jr(a,h),a.g.has(h)}t.forEach=function(a,h){Pn(this),this.g.forEach(function(f,y){f.forEach(function(C){a.call(h,C,y,this)},this)},this)},t.na=function(){Pn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let y=0;y<h.length;y++){const C=a[y];for(let D=0;D<C.length;D++)f.push(h[y])}return f},t.V=function(a){Pn(this);let h=[];if(typeof a=="string")fp(this,a)&&(h=h.concat(this.g.get(Jr(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return Pn(this),this.i=null,a=Jr(this,a),fp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function pp(a,h,f){hp(a,h),0<f.length&&(a.i=null,a.g.set(Jr(a,h),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var y=h[f];const D=encodeURIComponent(String(y)),z=this.V(y);for(y=0;y<z.length;y++){var C=D;z[y]!==""&&(C+="="+encodeURIComponent(String(z[y]))),a.push(C)}}return this.i=a.join("&")};function Jr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function Px(a,h){h&&!a.j&&(Pn(a),a.i=null,a.g.forEach(function(f,y){var C=y.toLowerCase();y!=C&&(hp(this,y),pp(this,C,f))},a)),a.j=h}function jx(a,h){const f=new ri;if(l.Image){const y=new Image;y.onload=S(jn,f,"TestLoadImage: loaded",!0,h,y),y.onerror=S(jn,f,"TestLoadImage: error",!1,h,y),y.onabort=S(jn,f,"TestLoadImage: abort",!1,h,y),y.ontimeout=S(jn,f,"TestLoadImage: timeout",!1,h,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function Lx(a,h){const f=new ri,y=new AbortController,C=setTimeout(()=>{y.abort(),jn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(D=>{clearTimeout(C),D.ok?jn(f,"TestPingServer: ok",!0,h):jn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),jn(f,"TestPingServer: error",!1,h)})}function jn(a,h,f,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(f)}catch{}}function Dx(){this.g=new yx}function Ox(a,h,f){const y=f||"";try{lp(a,function(C,D){let z=C;d(C)&&(z=ku(C)),h.push(y+D+"="+encodeURIComponent(z))})}catch(C){throw h.push(y+"type="+encodeURIComponent("_badmap")),C}}function Zo(a){this.l=a.Ub||null,this.j=a.eb||!1}N(Zo,Au),Zo.prototype.g=function(){return new Jo(this.l,this.j)},Zo.prototype.i=function(a){return function(){return a}}({});function Jo(a,h){Ke.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Jo,Ke),t=Jo.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ui(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function mp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?li(this):ui(this),this.readyState==3&&mp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,li(this))},t.Qa=function(a){this.g&&(this.response=a,li(this))},t.ga=function(){this.g&&li(this)};function li(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ui(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function ui(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function gp(a){let h="";return B(a,function(f,y){h+=y,h+=":",h+=f,h+=`\r
`}),h}function Ou(a,h,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=gp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):he(a,h,f))}function Ee(a){Ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ee,Ke);var Mx=/^https?$/i,Vx=["POST","PUT"];t=Ee.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nu.g(),this.v=this.o?Wf(this.o):Wf(Nu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(D){yp(this,D);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)f.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const D of y.keys())f.set(D,y.get(D));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),C=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Vx,h,void 0))||y||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of f)this.g.setRequestHeader(D,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xp(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){yp(this,D)}};function yp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,vp(a),ea(a)}function vp(a){a.A||(a.A=!0,rt(a,"complete"),rt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,rt(this,"complete"),rt(this,"abort"),ea(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ea(this,!0)),Ee.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_p(this):this.bb())},t.bb=function(){_p(this)};function _p(a){if(a.h&&typeof o<"u"&&(!a.v[1]||cn(a)!=4||a.Z()!=2)){if(a.u&&cn(a)==4)Bf(a.Ea,0,a);else if(rt(a,"readystatechange"),cn(a)==4){a.h=!1;try{const z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var y;if(y=z===0){var C=String(a.D).match(up)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),y=!Mx.test(C?C.toLowerCase():"")}f=y}if(f)rt(a,"complete"),rt(a,"success");else{a.m=6;try{var D=2<cn(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",vp(a)}}finally{ea(a)}}}}function ea(a,h){if(a.g){xp(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||rt(a,"ready");try{f.onreadystatechange=y}catch{}}}function xp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function cn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),gx(h)}};function wp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Fx(a){const h={};a=(a.g&&2<=cn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var f=R(a[y]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=h[C]||[];h[C]=D,D.push(f)}x(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function Ep(a){this.Aa=0,this.i=[],this.j=new ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ci("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ci("baseRetryDelayMs",5e3,a),this.cb=ci("retryDelaySeedMs",1e4,a),this.Wa=ci("forwardChannelMaxRetries",2,a),this.wa=ci("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new rp(a&&a.concurrentRequestLimit),this.Da=new Dx,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ep.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,y){st(0),this.W=a,this.H=h||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=Cp(this,null,this.W),na(this)};function Mu(a){if(Tp(a),a.G==3){var h=a.U++,f=un(a.I);if(he(f,"SID",a.K),he(f,"RID",h),he(f,"TYPE","terminate"),di(a,f),h=new Cn(a,a.j,h),h.L=2,h.v=Xo(un(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=Pp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),qo(h)}bp(a)}function ta(a){a.g&&(Fu(a),a.g.cancel(),a.g=null)}function Tp(a){ta(a),a.u&&(l.clearTimeout(a.u),a.u=null),ra(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function na(a){if(!sp(a.h)&&!a.s){a.s=!0;var h=a.Ga;Pt||Q(),$||(Pt(),$=!0),O.add(h,a),a.B=0}}function Ux(a,h){return ip(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ni(g(a.Ga,a,h),Np(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const C=new Cn(this,this.j,a);let D=this.o;if(this.S&&(D?(D=v(D),k(D,this.S)):D=this.S),this.m!==null||this.O||(C.H=D,D=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=kp(this,C,h),f=un(this.I),he(f,"RID",a),he(f,"CVER",22),this.D&&he(f,"X-HTTP-Session-Id",this.D),di(this,f),D&&(this.O?h="headers="+encodeURIComponent(String(gp(D)))+"&"+h:this.m&&Ou(f,this.m,D)),Du(this.h,C),this.Ua&&he(f,"TYPE","init"),this.P?(he(f,"$req",h),he(f,"SID","null"),C.T=!0,Cu(C,f,null)):Cu(C,f,h),this.G=2}}else this.G==3&&(a?Ip(this,a):this.i.length==0||sp(this.h)||Ip(this))};function Ip(a,h){var f;h?f=h.l:f=a.U++;const y=un(a.I);he(y,"SID",a.K),he(y,"RID",f),he(y,"AID",a.T),di(a,y),a.m&&a.o&&Ou(y,a.m,a.o),f=new Cn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=kp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Du(a.h,f),Cu(f,y,h)}function di(a,h){a.H&&B(a.H,function(f,y){he(h,y,f)}),a.l&&lp({},function(f,y){he(h,y,f)})}function kp(a,h,f){f=Math.min(a.i.length,f);var y=a.l?g(a.l.Na,a.l,a):null;e:{var C=a.i;let D=-1;for(;;){const z=["count="+f];D==-1?0<f?(D=C[0].g,z.push("ofs="+D)):D=0:z.push("ofs="+D);let ce=!0;for(let Fe=0;Fe<f;Fe++){let ie=C[Fe].g;const qe=C[Fe].map;if(ie-=D,0>ie)D=Math.max(0,C[Fe].g-100),ce=!1;else try{Ox(qe,z,"req"+ie+"_")}catch{y&&y(qe)}}if(ce){y=z.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,y}function Ap(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Pt||Q(),$||(Pt(),$=!0),O.add(h,a),a.v=0}}function Vu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ni(g(a.Fa,a),Np(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Sp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ni(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),ta(this),Sp(this))};function Fu(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Sp(a){a.g=new Cn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=un(a.qa);he(h,"RID","rpc"),he(h,"SID",a.K),he(h,"AID",a.T),he(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&he(h,"TO",a.ja),he(h,"TYPE","xmlhttp"),di(a,h),a.m&&a.o&&Ou(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Xo(un(h)),f.m=null,f.P=!0,ep(f,a)}t.Za=function(){this.C!=null&&(this.C=null,ta(this),Vu(this),st(19))};function ra(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Rp(a,h){var f=null;if(a.g==h){ra(a),Fu(a),a.g=null;var y=2}else if(Lu(a.h,h))f=h.D,op(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var C=a.B;y=Wo(),rt(y,new Yf(y,f)),na(a)}else Ap(a);else if(C=h.s,C==3||C==0&&0<h.X||!(y==1&&Ux(a,h)||y==2&&Vu(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),C){case 1:Er(a,5);break;case 4:Er(a,10);break;case 3:Er(a,6);break;default:Er(a,2)}}}function Np(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Er(a,h){if(a.j.info("Error code "+h),h==2){var f=g(a.fb,a),y=a.Xa;const C=!y;y=new wr(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Qo(y,"https"),Xo(y),C?jx(y.toString(),f):Lx(y.toString(),f)}else st(2);a.G=0,a.l&&a.l.sa(h),bp(a),Tp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function bp(a){if(a.G=0,a.ka=[],a.l){const h=ap(a.h);(h.length!=0||a.i.length!=0)&&(j(a.ka,h),j(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Cp(a,h,f){var y=f instanceof wr?un(f):new wr(f);if(y.g!="")h&&(y.g=h+"."+y.g),Yo(y,y.s);else{var C=l.location;y=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var D=new wr(null);y&&Qo(D,y),h&&(D.g=h),C&&Yo(D,C),f&&(D.l=f),y=D}return f=a.D,h=a.ya,f&&h&&he(y,f,h),he(y,"VER",a.la),di(a,y),y}function Pp(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ee(new Zo({eb:f})):new Ee(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jp(){}t=jp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sa(){}sa.prototype.g=function(a,h){return new gt(a,h)};function gt(a,h){Ke.call(this),this.g=new Ep(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!_(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new es(this)}N(gt,Ke),gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gt.prototype.close=function(){Mu(this.g)},gt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=ku(a),a=f);h.i.push(new Tx(h.Ya++,a)),h.G==3&&na(h)},gt.prototype.N=function(){this.g.l=null,delete this.j,Mu(this.g),delete this.g,gt.aa.N.call(this)};function Lp(a){Su.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}N(Lp,Su);function Dp(){Ru.call(this),this.status=1}N(Dp,Ru);function es(a){this.g=a}N(es,jp),es.prototype.ua=function(){rt(this.g,"a")},es.prototype.ta=function(a){rt(this.g,new Lp(a))},es.prototype.sa=function(a){rt(this.g,new Dp)},es.prototype.ra=function(){rt(this.g,"b")},sa.prototype.createWebChannel=sa.prototype.g,gt.prototype.send=gt.prototype.o,gt.prototype.open=gt.prototype.m,gt.prototype.close=gt.prototype.close,M1=function(){return new sa},O1=function(){return Wo()},D1=_r,jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Go.NO_ERROR=0,Go.TIMEOUT=8,Go.HTTP_ERROR=6,Ga=Go,Xf.COMPLETE="complete",L1=Xf,Gf.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,Si=Gf,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,j1=Ee}).apply(typeof Ia<"u"?Ia:typeof self<"u"?self:typeof window<"u"?window:{});const Ng="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Hh("@firebase/firestore");function xi(){return zr.logLevel}function W(t,...e){if(zr.logLevel<=te.DEBUG){const n=e.map(tf);zr.debug(`Firestore (${qs}): ${t}`,...n)}}function Sn(t,...e){if(zr.logLevel<=te.ERROR){const n=e.map(tf);zr.error(`Firestore (${qs}): ${t}`,...n)}}function fo(t,...e){if(zr.logLevel<=te.WARN){const n=e.map(tf);zr.warn(`Firestore (${qs}): ${t}`,...n)}}function tf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: `+t;throw Sn(e),new Error(e)}function le(t,e){t||Y()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends bn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class dS{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new or,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new uS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new ct(e)}}class hS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new hS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new pS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=gS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Ms(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new De(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new De(0,0))}static max(){return new X(new De(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return po.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof po?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ie extends po{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const yS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends po{construct(e,n,r){return new ze(e,n,r)}static isValidIdentifier(e){return yS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new K(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ie.fromString(e))}static fromName(e){return new G(Ie.fromString(e).popFirst(5))}static empty(){return new G(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ie(e.slice()))}}function vS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new ur(s,G.empty(),e)}function _S(t){return new ur(t.readTime,t.key,-1)}class ur{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ur(X.min(),G.empty(),-1)}static max(){return new ur(X.max(),G.empty(),-1)}}function xS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ES{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==wS)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(p=>{o[d]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function TS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Oo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}nf.oe=-1;function ou(t){return t==null}function Nl(t){return t===0&&1/t==-1/0}function IS(t){return typeof t=="number"&&Number.isInteger(t)&&!Nl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function F1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){this.comparator=e,this.root=n||Be.EMPTY}insert(e,n){return new we(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new we(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ka(this.root,e,this.comparator,!0)}}class ka{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Be.RED,this.left=s??Be.EMPTY,this.right=i??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Be(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Be.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Be(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cg(this.data.getIterator())}getIteratorFrom(e){return new Cg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class Cg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new He(ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ms(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new U1("Invalid base64 string: "+i):i}}(e);return new Ge(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ge(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const kS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(t){if(le(!!t),typeof t=="string"){let e=0;const n=kS.exec(t);if(le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $r(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sf(t){const e=t.mapValue.fields.__previous_value__;return rf(e)?sf(e):e}function mo(t){const e=cr(t.mapValue.fields.__local_write_time__.timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class go{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new go("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rf(t)?4:RS(t)?9007199254740991:SS(t)?10:11:Y()}function tn(t,e){if(t===e)return!0;const n=Hr(t);if(n!==Hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mo(t).isEqual(mo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=cr(s.timestampValue),l=cr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return $r(s.bytesValue).isEqual($r(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Se(s.geoPointValue.latitude)===Se(i.geoPointValue.latitude)&&Se(s.geoPointValue.longitude)===Se(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Se(s.integerValue)===Se(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Se(s.doubleValue),l=Se(i.doubleValue);return o===l?Nl(o)===Nl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ms(t.arrayValue.values||[],e.arrayValue.values||[],tn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(bg(o)!==bg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!tn(o[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function yo(t,e){return(t.values||[]).find(n=>tn(n,e))!==void 0}function Vs(t,e){if(t===e)return 0;const n=Hr(t),r=Hr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Se(i.integerValue||i.doubleValue),u=Se(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Pg(t.timestampValue,e.timestampValue);case 4:return Pg(mo(t),mo(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(i,o){const l=$r(i),u=$r(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const p=oe(l[d],u[d]);if(p!==0)return p}return oe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(Se(i.latitude),Se(o.latitude));return l!==0?l:oe(Se(i.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,p;const m=i.fields||{},g=o.fields||{},S=(l=m.value)===null||l===void 0?void 0:l.arrayValue,N=(u=g.value)===null||u===void 0?void 0:u.arrayValue,P=oe(((d=S==null?void 0:S.values)===null||d===void 0?void 0:d.length)||0,((p=N==null?void 0:N.values)===null||p===void 0?void 0:p.length)||0);return P!==0?P:jg(S,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Aa.mapValue&&o===Aa.mapValue)return 0;if(i===Aa.mapValue)return 1;if(o===Aa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},p=Object.keys(d);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=oe(u[m],p[m]);if(g!==0)return g;const S=Vs(l[u[m]],d[p[m]]);if(S!==0)return S}return oe(u.length,p.length)}(t.mapValue,e.mapValue);default:throw Y()}}function Pg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=cr(t),r=cr(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function jg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Vs(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Fs(t){return Ld(t)}function Ld(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=cr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ld(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ld(n.fields[o])}`;return s+"}"}(t.mapValue):Y()}function Dd(t){return!!t&&"integerValue"in t}function of(t){return!!t&&"arrayValue"in t}function Lg(t){return!!t&&"nullValue"in t}function Dg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ka(t){return!!t&&"mapValue"in t}function SS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ui(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ui(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ui(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ka(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ui(n)}setAll(e){let n=ze.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Ui(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ka(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ka(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Qs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(Ui(this.value))}}function B1(t){const e=[];return Qs(t.fields,(n,r)=>{const s=new ze([n]);if(Ka(r)){const i=B1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new et(e,0,X.min(),X.min(),X.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new et(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new et(e,2,n,X.min(),X.min(),At.empty(),0)}static newUnknownDocument(e,n){return new et(e,3,n,X.min(),X.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n){this.position=e,this.inclusive=n}}function Og(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Vs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!tn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n="asc"){this.field=e,this.dir=n}}function NS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z1=class{};class je extends z1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CS(e,n,r):n==="array-contains"?new LS(e,r):n==="in"?new DS(e,r):n==="not-in"?new OS(e,r):n==="array-contains-any"?new MS(e,r):new je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new PS(e,r):new jS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Vs(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(Vs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends z1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new nn(e,n)}matches(e){return $1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $1(t){return t.op==="and"}function H1(t){return bS(t)&&$1(t)}function bS(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function Od(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(H1(t))return t.filters.map(e=>Od(e)).join(",");{const e=t.filters.map(n=>Od(n)).join(",");return`${t.op}(${e})`}}function W1(t,e){return t instanceof je?function(r,s){return s instanceof je&&r.op===s.op&&r.field.isEqual(s.field)&&tn(r.value,s.value)}(t,e):t instanceof nn?function(r,s){return s instanceof nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&W1(o,s.filters[l]),!0):!1}(t,e):void Y()}function G1(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`}(t):t instanceof nn?function(n){return n.op.toString()+" {"+n.getFilters().map(G1).join(" ,")+"}"}(t):"Filter"}class CS extends je{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class PS extends je{constructor(e,n){super(e,"in",n),this.keys=K1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jS extends je{constructor(e,n){super(e,"not-in",n),this.keys=K1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function K1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class LS extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return of(n)&&yo(n.arrayValue,this.value)}}class DS extends je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yo(this.value.arrayValue,n)}}class OS extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!yo(this.value.arrayValue,n)}}class MS extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!of(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Vg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new VS(t,e,n,r,s,i,o)}function af(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Od(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ou(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fs(r)).join(",")),e.ue=n}return e.ue}function lf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!W1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mg(t.startAt,e.startAt)&&Mg(t.endAt,e.endAt)}function Md(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FS(t,e,n,r,s,i,o,l){return new au(t,e,n,r,s,i,o,l)}function uf(t){return new au(t)}function Fg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function US(t){return t.collectionGroup!==null}function Bi(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new He(ze.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Cl(i,r))}),n.has(ze.keyField().canonicalString())||e.ce.push(new Cl(ze.keyField(),r))}return e.ce}function Jt(t){const e=Z(t);return e.le||(e.le=BS(e,Bi(t))),e.le}function BS(t,e){if(t.limitType==="F")return Vg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Cl(s.field,i)});const n=t.endAt?new bl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bl(t.startAt.position,t.startAt.inclusive):null;return Vg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vd(t,e,n){return new au(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lu(t,e){return lf(Jt(t),Jt(e))&&t.limitType===e.limitType}function q1(t){return`${af(Jt(t))}|lt:${t.limitType}`}function rs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>G1(s)).join(", ")}]`),ou(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fs(s)).join(",")),`Target(${r})`}(Jt(t))}; limitType=${t.limitType})`}function uu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Bi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Og(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Bi(r),s)||r.endAt&&!function(o,l,u){const d=Og(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Bi(r),s))}(t,e)}function zS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Q1(t){return(e,n)=>{let r=!1;for(const s of Bi(t)){const i=$S(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function $S(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Vs(u,d):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return F1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new we(G.comparator);function Rn(){return HS}const Y1=new we(G.comparator);function Ri(...t){let e=Y1;for(const n of t)e=e.insert(n.key,n);return e}function X1(t){let e=Y1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Nr(){return zi()}function Z1(){return zi()}function zi(){return new Ys(t=>t.toString(),(t,e)=>t.isEqual(e))}const WS=new we(G.comparator),GS=new He(G.comparator);function ee(...t){let e=GS;for(const n of t)e=e.add(n);return e}const KS=new He(oe);function qS(){return KS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nl(e)?"-0":e}}function J1(t){return{integerValue:""+t}}function QS(t,e){return IS(e)?J1(e):cf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this._=void 0}}function YS(t,e,n){return t instanceof Pl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rf(i)&&(i=sf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof vo?t_(t,e):t instanceof _o?n_(t,e):function(s,i){const o=e_(s,i),l=Ug(o)+Ug(s.Pe);return Dd(o)&&Dd(s.Pe)?J1(l):cf(s.serializer,l)}(t,e)}function XS(t,e,n){return t instanceof vo?t_(t,e):t instanceof _o?n_(t,e):n}function e_(t,e){return t instanceof jl?function(r){return Dd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Pl extends cu{}class vo extends cu{constructor(e){super(),this.elements=e}}function t_(t,e){const n=r_(e);for(const r of t.elements)n.some(s=>tn(s,r))||n.push(r);return{arrayValue:{values:n}}}class _o extends cu{constructor(e){super(),this.elements=e}}function n_(t,e){let n=r_(e);for(const r of t.elements)n=n.filter(s=>!tn(s,r));return{arrayValue:{values:n}}}class jl extends cu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ug(t){return Se(t.integerValue||t.doubleValue)}function r_(t){return of(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ZS(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof vo&&s instanceof vo||r instanceof _o&&s instanceof _o?Ms(r.elements,s.elements,tn):r instanceof jl&&s instanceof jl?tn(r.Pe,s.Pe):r instanceof Pl&&s instanceof Pl}(t.transform,e.transform)}class JS{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class du{}function s_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new o_(t.key,xn.none()):new Mo(t.key,t.data,xn.none());{const n=t.data,r=At.empty();let s=new He(ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Yr(t.key,r,new Ft(s.toArray()),xn.none())}}function eR(t,e,n){t instanceof Mo?function(s,i,o){const l=s.value.clone(),u=zg(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Yr?function(s,i,o){if(!qa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=zg(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(i_(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $i(t,e,n,r){return t instanceof Mo?function(i,o,l,u){if(!qa(i.precondition,o))return l;const d=i.value.clone(),p=$g(i.fieldTransforms,u,o);return d.setAll(p),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yr?function(i,o,l,u){if(!qa(i.precondition,o))return l;const d=$g(i.fieldTransforms,u,o),p=o.data;return p.setAll(i_(i)),p.setAll(d),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return qa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function tR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=e_(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function Bg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ms(r,s,(i,o)=>ZS(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mo extends du{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends du{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function i_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zg(t,e,n){const r=new Map;le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,XS(o,l,n[s]))}return r}function $g(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,YS(i,o,e))}return r}class o_ extends du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nR extends du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&eR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$i(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$i(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Z1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=s_(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&Ms(this.mutations,e.mutations,(n,r)=>Bg(n,r))&&Ms(this.baseMutations,e.baseMutations,(n,r)=>Bg(n,r))}}class df{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length);let s=function(){return WS}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new df(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne,ne;function oR(t){switch(t){default:return Y();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function a_(t){if(t===void 0)return Sn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Ne.OK:return V.OK;case Ne.CANCELLED:return V.CANCELLED;case Ne.UNKNOWN:return V.UNKNOWN;case Ne.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Ne.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Ne.INTERNAL:return V.INTERNAL;case Ne.UNAVAILABLE:return V.UNAVAILABLE;case Ne.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Ne.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Ne.NOT_FOUND:return V.NOT_FOUND;case Ne.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Ne.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Ne.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Ne.ABORTED:return V.ABORTED;case Ne.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Ne.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Ne.DATA_LOSS:return V.DATA_LOSS;default:return Y()}}(ne=Ne||(Ne={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new Pr([4294967295,4294967295],0);function Hg(t){const e=aR().encode(t),n=new P1;return n.update(e),new Uint8Array(n.digest())}function Wg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Pr([n,r],0),new Pr([s,i],0)]}class hf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ni(`Invalid padding: ${n}`);if(r<0)throw new Ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ni(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Pr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Pr.fromNumber(r)));return s.compare(lR)===1&&(s=new Pr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Hg(e),[r,s]=Wg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Hg(e),[r,s]=Wg(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Vo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hu(X.min(),s,new we(oe),Rn(),ee())}}class Vo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vo(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class l_{constructor(e,n){this.targetId=e,this.me=n}}class u_{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Gg{constructor(){this.fe=0,this.ge=qg(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ee(),n=ee(),r=ee();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new Vo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=qg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rn(),this.qe=Kg(),this.Qe=new we(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Md(i))if(r===0){const o=new G(i.path);this.Ue(n,o,et.newNoDocument(o,X.min()))}else le(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=$r(r).toUint8Array()}catch(u){if(u instanceof U1)return fo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new hf(o,s,i)}catch(u){return fo(u instanceof Ni?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Md(l.target)){const u=new G(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,et.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ee();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new hu(e,n,this.Qe,this.ke,r);return this.ke=Rn(),this.qe=Kg(),this.Qe=new we(oe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Gg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new He(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Gg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Kg(){return new we(G.comparator)}function qg(){return new we(G.comparator)}const cR={asc:"ASCENDING",desc:"DESCENDING"},dR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hR={and:"AND",or:"OR"};class fR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fd(t,e){return t.useProto3Json||ou(e)?e:{value:e}}function Ll(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pR(t,e){return Ll(t,e.toTimestamp())}function en(t){return le(!!t),X.fromTimestamp(function(n){const r=cr(n);return new De(r.seconds,r.nanos)}(t))}function ff(t,e){return Ud(t,e).canonicalString()}function Ud(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function d_(t){const e=Ie.fromString(t);return le(g_(e)),e}function Bd(t,e){return ff(t.databaseId,e.path)}function wc(t,e){const n=d_(e);if(n.get(1)!==t.databaseId.projectId)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(f_(n))}function h_(t,e){return ff(t.databaseId,e)}function mR(t){const e=d_(t);return e.length===4?Ie.emptyPath():f_(e)}function zd(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function f_(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Qg(t,e,n){return{name:Bd(t,e),fields:n.value.mapValue.fields}}function gR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(le(p===void 0||typeof p=="string"),Ge.fromBase64String(p||"")):(le(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ge.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const p=d.code===void 0?V.UNKNOWN:a_(d.code);return new K(p,d.message||"")}(o);n=new u_(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wc(t,r.document.name),i=en(r.document.updateTime),o=r.document.createTime?en(r.document.createTime):X.min(),l=new At({mapValue:{fields:r.document.fields}}),u=et.newFoundDocument(s,i,o,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new Qa(d,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wc(t,r.document),i=r.readTime?en(r.readTime):X.min(),o=et.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Qa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wc(t,r.document),i=r.removedTargetIds||[];n=new Qa([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new iR(s,i),l=r.targetId;n=new l_(l,o)}}return n}function yR(t,e){let n;if(e instanceof Mo)n={update:Qg(t,e.key,e.value)};else if(e instanceof o_)n={delete:Bd(t,e.key)};else if(e instanceof Yr)n={update:Qg(t,e.key,e.data),updateMask:AR(e.fieldMask)};else{if(!(e instanceof nR))return Y();n={verify:Bd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Pl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof vo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:pR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function vR(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?en(s.updateTime):en(i);return o.isEqual(X.min())&&(o=en(i)),new JS(o,s.transformResults||[])}(n,e))):[]}function _R(t,e){return{documents:[h_(t,e.path)]}}function xR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=h_(t,s);const i=function(d){if(d.length!==0)return m_(nn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(p=>function(g){return{field:ss(g.field),direction:TR(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Fd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function wR(t){let e=mR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=p_(m);return g instanceof nn&&H1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(N){return new Cl(is(N.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,ou(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,S=m.values||[];return new bl(S,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,S=m.values||[];return new bl(S,g)}(n.endAt)),FS(e,s,o,i,l,"F",u,d)}function ER(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function p_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=is(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=is(n.unaryFilter.field);return je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=is(n.unaryFilter.field);return je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=is(n.unaryFilter.field);return je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return je.create(is(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nn.create(n.compositeFilter.filters.map(r=>p_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function TR(t){return cR[t]}function IR(t){return dR[t]}function kR(t){return hR[t]}function ss(t){return{fieldPath:t.canonicalString()}}function is(t){return ze.fromServerFormat(t.fieldPath)}function m_(t){return t instanceof je?function(n){if(n.op==="=="){if(Dg(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NAN"}};if(Lg(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dg(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NAN"}};if(Lg(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ss(n.field),op:IR(n.op),value:n.value}}}(t):t instanceof nn?function(n){const r=n.getFilters().map(s=>m_(s));return r.length===1?r[0]:{compositeFilter:{op:kR(n.op),filters:r}}}(t):Y()}function AR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function g_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r,s,i=X.min(),o=X.min(),l=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Kn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.ct=e}}function RR(t){const e=wR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.un=new bR}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(ur.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(ur.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class bR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new He(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Us(0)}static kn(){return new Us(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.changes=new Ys(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&$i(r.mutation,s,Ft.empty(),De.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const s=Nr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ri();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Nr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Rn();const o=zi(),l=function(){return zi()}();return n.forEach((u,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Yr)?i=i.insert(d.key,d):p!==void 0?(o.set(d.key,p.mutation.getFieldMask()),$i(p.mutation,d,p.mutation.getFieldMask(),De.now())):o.set(d.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,p)=>o.set(d,p)),n.forEach((d,p)=>{var m;return l.set(d,new PR(p,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=zi();let s=new we((o,l)=>o-l),i=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let p=r.get(u)||Ft.empty();p=l.applyToLocalView(d,p),r.set(u,p);const m=(s.get(l.batchId)||ee()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,p=u.value,m=Z1();p.forEach(g=>{if(!i.has(g)){const S=s_(n.get(g),r.get(g));S!==null&&m.set(g,S),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):US(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Nr());let l=-1,u=i;return o.next(d=>M.forEach(d,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?M.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ee())).next(p=>({batchId:l,changes:X1(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=Ri();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ri();return this.indexManager.getCollectionParents(e,i).next(l=>M.forEach(l,u=>{const d=function(m,g){return new au(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const p=d.getKey();o.get(p)===null&&(o=o.insert(p,et.newInvalidDocument(p)))});let l=Ri();return o.forEach((u,d)=>{const p=i.get(u);p!==void 0&&$i(p.mutation,d,Ft.empty(),De.now()),uu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:en(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:RR(s.bundledQuery),readTime:en(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.overlays=new we(G.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Nr();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Nr(),i=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new we((d,p)=>d-p);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=Nr(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=Nr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return M.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sR(n,r));let i=this.Ir.get(n);i===void 0&&(i=ee(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(){this.Tr=new He(Oe.Er),this.dr=new He(Oe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Oe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Oe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Ie([])),r=new Oe(n,e),s=new Oe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Ie([])),r=new Oe(n,e),s=new Oe(n,e+1);let i=ee();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Oe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Oe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new He(Oe.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Oe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Oe(n,0),s=new Oe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(oe);return n.forEach(s=>{const i=new Oe(s,0),o=new Oe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new Oe(new G(i),0);let l=new He(oe);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),M.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,s=>{const i=new Oe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Oe(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.Mr=e,this.docs=function(){return new we(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():et.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():et.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Rn();const o=n.path,l=new G(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||xS(_S(p),r)<=0||(s.has(p.key)||uu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FR(this)}getSize(e){return M.resolve(this.size)}}class FR extends CR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.persistence=e,this.Nr=new Ys(n=>af(n),lf),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pf,this.targetCount=0,this.kr=Us.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Us(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new nf(0),this.Kr=!1,this.Kr=!0,this.$r=new OR,this.referenceDelegate=e(this),this.Ur=new UR(this),this.indexManager=new NR,this.remoteDocumentCache=function(s){return new VR(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new SR(n),this.Gr=new LR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new MR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new zR(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class zR extends ES{constructor(e){super(),this.currentSequenceNumber=e}}class mf{constructor(e){this.persistence=e,this.Jr=new pf,this.Yr=null}static Zr(e){return new mf(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const s=G.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ee(),s=ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new gf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return PI()?8:TS(nt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $R;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(xi()<=te.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(xi()<=te.DEBUG&&W("QueryEngine","Query:",rs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(xi()<=te.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jt(n))):M.resolve())}Yi(e,n){if(Fg(n))return M.resolve(null);let r=Jt(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Vd(n,null,"F"),r=Jt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ee(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Vd(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Fg(n)||s.isEqual(X.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?M.resolve(null):(xi()<=te.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rs(n)),this.rs(e,o,n,vS(s,-1)).next(l=>l))})}ts(e,n){let r=new He(Q1(e));return n.forEach((s,i)=>{uu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return xi()<=te.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",rs(n)),this.Ji.getDocumentsMatchingQuery(e,n,ur.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new we(oe),this._s=new Ys(i=>af(i),lf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function GR(t,e,n,r){return new WR(t,e,n,r)}async function y_(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ee();for(const d of s){o.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function KR(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,p){const m=d.batch,g=m.keys();let S=M.resolve();return g.forEach(N=>{S=S.next(()=>p.getEntry(u,N)).next(P=>{const j=d.docVersions.get(N);le(j!==null),P.version.compareTo(j)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),p.addEntry(P)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ee();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function v_(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function qR(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let S=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(Ge.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(m,S),function(P,j,E){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,S,p)&&l.push(n.Ur.updateTargetData(i,S))});let u=Rn(),d=ee();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(QR(i,o,e.documentUpdates).next(p=>{u=p.Ps,d=p.Is})),!r.isEqual(X.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return M.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function QR(t,e,n){let r=ee(),s=ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Rn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function YR(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XR(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Kn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function $d(t,e,n){const r=Z(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Oo(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Yg(t,e,n){const r=Z(t);let s=X.min(),i=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,p){const m=Z(u),g=m._s.get(p);return g!==void 0?M.resolve(m.os.get(g)):m.Ur.getTargetData(d,p)}(r,o,Jt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:ee())).next(l=>(ZR(r,zS(e),l),{documents:l,Ts:i})))}function ZR(t,e,n){let r=t.us.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Xg{constructor(){this.activeTargetIds=qS()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JR{constructor(){this.so=new Xg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa=null;function Ec(){return Sa===null?Sa=function(){return 268435456+Math.round(2147483648*Math.random())}():Sa++,"0x"+Sa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class rN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Ec(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(p=>(W("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw fo("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=tN[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Ec();return new Promise((o,l)=>{const u=new j1;u.setWithCredentials(!0),u.listenOnce(L1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ga.NO_ERROR:const p=u.getResponseJson();W(Ze,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case Ga.TIMEOUT:W(Ze,`RPC '${e}' ${i} timed out`),l(new K(V.DEADLINE_EXCEEDED,"Request time out"));break;case Ga.HTTP_ERROR:const m=u.getStatus();if(W(Ze,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const S=g==null?void 0:g.error;if(S&&S.status&&S.message){const N=function(j){const E=j.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(E)>=0?E:V.UNKNOWN}(S.status);l(new K(N,S.message))}else l(new K(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K(V.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(Ze,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);W(Ze,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Ec(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=M1(),l=O1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");W(Ze,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);let g=!1,S=!1;const N=new nN({Io:j=>{S?W(Ze,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(g||(W(Ze,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),W(Ze,`RPC '${e}' stream ${s} sending:`,j),m.send(j))},To:()=>m.close()}),P=(j,E,_)=>{j.listen(E,I=>{try{_(I)}catch(w){setTimeout(()=>{throw w},0)}})};return P(m,Si.EventType.OPEN,()=>{S||(W(Ze,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),P(m,Si.EventType.CLOSE,()=>{S||(S=!0,W(Ze,`RPC '${e}' stream ${s} transport closed`),N.So())}),P(m,Si.EventType.ERROR,j=>{S||(S=!0,fo(Ze,`RPC '${e}' stream ${s} transport errored:`,j),N.So(new K(V.UNAVAILABLE,"The operation could not be completed")))}),P(m,Si.EventType.MESSAGE,j=>{var E;if(!S){const _=j.data[0];le(!!_);const I=_,w=I.error||((E=I[0])===null||E===void 0?void 0:E.error);if(w){W(Ze,`RPC '${e}' stream ${s} received error:`,w);const U=w.status;let B=function(T){const k=Ne[T];if(k!==void 0)return a_(k)}(U),x=w.message;B===void 0&&(B=V.INTERNAL,x="Unknown error status: "+U+" with message "+w.message),S=!0,N.So(new K(B,x)),m.close()}else W(Ze,`RPC '${e}' stream ${s} received:`,_),N.bo(_)}}),P(l,D1.STAT_EVENT,j=>{j.stat===jd.PROXY?W(Ze,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===jd.NOPROXY&&W(Ze,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Tc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){return new fR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new __(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Sn(n.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sN extends x_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gR(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?en(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=zd(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Md(u)?{documents:_R(i,u)}:{query:xR(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=c_(i,o.resumeToken);const d=Fd(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=Ll(i,o.snapshotVersion.toTimestamp());const d=Fd(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=ER(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=zd(this.serializer),n.removeTarget=e,this.a_(n)}}class iN extends x_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=vR(e.writeResults,e.commitTime),r=en(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=zd(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Ud(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Ud(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class aN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Sn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Xr(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Z(u);d.L_.add(4),await Fo(d),d.q_.set("Unknown"),d.L_.delete(4),await pu(d)}(this))})}),this.q_=new aN(r,s)}}async function pu(t){if(Xr(t))for(const e of t.B_)await e(!0)}async function Fo(t){for(const e of t.B_)await e(!1)}function w_(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xf(n)?_f(n):Xs(n).r_()&&vf(n,e))}function yf(t,e){const n=Z(t),r=Xs(n);n.N_.delete(e),r.r_()&&E_(n,e),n.N_.size===0&&(r.r_()?r.o_():Xr(n)&&n.q_.set("Unknown"))}function vf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xs(t).A_(e)}function E_(t,e){t.Q_.xe(e),Xs(t).R_(e)}function _f(t){t.Q_=new uR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Xs(t).start(),t.q_.v_()}function xf(t){return Xr(t)&&!Xs(t).n_()&&t.N_.size>0}function Xr(t){return Z(t).L_.size===0}function T_(t){t.Q_=void 0}async function uN(t){t.q_.set("Online")}async function cN(t){t.N_.forEach((e,n)=>{vf(t,e)})}async function dN(t,e){T_(t),xf(t)?(t.q_.M_(e),_f(t)):t.q_.set("Unknown")}async function hN(t,e,n){if(t.q_.set("Online"),e instanceof u_&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dl(t,r)}else if(e instanceof Qa?t.Q_.Ke(e):e instanceof l_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await v_(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(d);p&&i.N_.set(d,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(Ge.EMPTY_BYTE_STRING,p.snapshotVersion)),E_(i,u);const m=new Kn(p.target,u,d,p.sequenceNumber);vf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await Dl(t,r)}}async function Dl(t,e,n){if(!Oo(e))throw e;t.L_.add(1),await Fo(t),t.q_.set("Offline"),n||(n=()=>v_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await pu(t)})}function I_(t,e){return e().catch(n=>Dl(t,n,e))}async function mu(t){const e=Z(t),n=dr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fN(e);)try{const s=await YR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,pN(e,s)}catch(s){await Dl(e,s)}k_(e)&&A_(e)}function fN(t){return Xr(t)&&t.O_.length<10}function pN(t,e){t.O_.push(e);const n=dr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function k_(t){return Xr(t)&&!dr(t).n_()&&t.O_.length>0}function A_(t){dr(t).start()}async function mN(t){dr(t).p_()}async function gN(t){const e=dr(t);for(const n of t.O_)e.m_(n.mutations)}async function yN(t,e,n){const r=t.O_.shift(),s=df.from(r,e,n);await I_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await mu(t)}async function vN(t,e){e&&dr(t).V_&&await async function(r,s){if(function(o){return oR(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();dr(r).s_(),await I_(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await mu(r)}}(t,e),k_(t)&&A_(t)}async function Jg(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Xr(n);n.L_.add(3),await Fo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await pu(n)}async function _N(t,e){const n=Z(t);e?(n.L_.delete(2),await pu(n)):e||(n.L_.add(2),await Fo(n),n.q_.set("Unknown"))}function Xs(t){return t.K_||(t.K_=function(n,r,s){const i=Z(n);return i.w_(),new sN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:uN.bind(null,t),Ro:cN.bind(null,t),mo:dN.bind(null,t),d_:hN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xf(t)?_f(t):t.q_.set("Unknown")):(await t.K_.stop(),T_(t))})),t.K_}function dr(t){return t.U_||(t.U_=function(n,r,s){const i=Z(n);return i.w_(),new iN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mN.bind(null,t),mo:vN.bind(null,t),f_:gN.bind(null,t),g_:yN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await mu(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new wf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ef(t,e){if(Sn("AsyncQueue",`${e}: ${t}`),Oo(t))return new K(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Ri(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new Rs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Rs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){this.W_=new we(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bs{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Bs(e,n,Rs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class wN{constructor(){this.queries=t0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=t0(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new K(V.ABORTED,"Firestore shutting down"))}}function t0(){return new Ys(t=>q1(t),lu)}async function EN(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new xN,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Ef(o,`Initialization of query '${rs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Tf(n)}async function TN(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IN(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Tf(n)}function kN(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Tf(t){t.Y_.forEach(e=>{e.next()})}var Hd,n0;(n0=Hd||(Hd={})).ea="default",n0.Cache="cache";class AN{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e){this.key=e}}class R_{constructor(e){this.key=e}}class SN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ee(),this.mutatedKeys=ee(),this.Aa=Q1(e),this.Ra=new Rs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new e0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),S=uu(this.query,m)?m:null,N=!!g&&this.mutatedKeys.has(g.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let j=!1;g&&S?g.data.isEqual(S.data)?N!==P&&(r.track({type:3,doc:S}),j=!0):this.ga(g,S)||(r.track({type:2,doc:S}),j=!0,(u&&this.Aa(S,u)>0||d&&this.Aa(S,d)<0)&&(l=!0)):!g&&S?(r.track({type:0,doc:S}),j=!0):g&&!S&&(r.track({type:1,doc:g}),j=!0,(u||d)&&(l=!0)),j&&(S?(o=o.add(S),i=P?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(S,N){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return P(S)-P(N)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Bs(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new e0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new R_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new S_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Bs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class RN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NN{constructor(e){this.key=e,this.va=!1}}class bN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ys(l=>q1(l),lu),this.Ma=new Map,this.xa=new Set,this.Oa=new we(G.comparator),this.Na=new Map,this.La=new pf,this.Ba={},this.ka=new Map,this.qa=Us.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function CN(t,e,n=!0){const r=L_(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await N_(r,e,n,!0),s}async function PN(t,e){const n=L_(t);await N_(n,e,!0,!1)}async function N_(t,e,n,r){const s=await XR(t.localStore,Jt(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await jN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&w_(t.remoteStore,s),l}async function jN(t,e,n,r,s){t.Ka=(m,g,S)=>async function(P,j,E,_){let I=j.view.ma(E);I.ns&&(I=await Yg(P.localStore,j.query,!1).then(({documents:x})=>j.view.ma(x,I)));const w=_&&_.targetChanges.get(j.targetId),U=_&&_.targetMismatches.get(j.targetId)!=null,B=j.view.applyChanges(I,P.isPrimaryClient,w,U);return s0(P,j.targetId,B.wa),B.snapshot}(t,m,g,S);const i=await Yg(t.localStore,e,!0),o=new SN(e,i.Ts),l=o.ma(i.documents),u=Vo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);s0(t,n,d.wa);const p=new RN(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function LN(t,e,n){const r=Z(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!lu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $d(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yf(r.remoteStore,s.targetId),Wd(r,s.targetId)}).catch(Do)):(Wd(r,s.targetId),await $d(r.localStore,s.targetId,!0))}async function DN(t,e){const n=Z(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yf(n.remoteStore,r.targetId))}async function ON(t,e,n){const r=$N(t);try{const s=await function(o,l){const u=Z(o),d=De.now(),p=l.reduce((S,N)=>S.add(N.key),ee());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let N=Rn(),P=ee();return u.cs.getEntries(S,p).next(j=>{N=j,N.forEach((E,_)=>{_.isValidDocument()||(P=P.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,N)).next(j=>{m=j;const E=[];for(const _ of l){const I=tR(_,m.get(_.key).overlayedDocument);I!=null&&E.push(new Yr(_.key,I,B1(I.value.mapValue),xn.exists(!0)))}return u.mutationQueue.addMutationBatch(S,d,E,l)}).next(j=>{g=j;const E=j.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(S,j.batchId,E)})}).then(()=>({batchId:g.batchId,changes:X1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new we(oe)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Uo(r,s.changes),await mu(r.remoteStore)}catch(s){const i=Ef(s,"Failed to persist write");n.reject(i)}}async function b_(t,e){const n=Z(t);try{const r=await qR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?le(o.va):s.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await Uo(n,r,e)}catch(r){await Do(r)}}function r0(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Z(o);u.onlineState=l;let d=!1;u.queries.forEach((p,m)=>{for(const g of m.j_)g.Z_(l)&&(d=!0)}),d&&Tf(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MN(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new we(G.comparator);o=o.insert(i,et.newNoDocument(i,X.min()));const l=ee().add(i),u=new hu(X.min(),new Map,new we(oe),o,l);await b_(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),If(r)}else await $d(r.localStore,e,!1).then(()=>Wd(r,e,n)).catch(Do)}async function VN(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await KR(n.localStore,e);P_(n,r,null),C_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uo(n,s)}catch(s){await Do(s)}}async function FN(t,e,n){const r=Z(t);try{const s=await function(o,l){const u=Z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(le(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>u.localDocuments.getDocuments(d,p))})}(r.localStore,e);P_(r,e,n),C_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Uo(r,s)}catch(s){await Do(s)}}function C_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function P_(t,e,n){const r=Z(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Wd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||j_(t,r)})}function j_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(yf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),If(t))}function s0(t,e,n){for(const r of n)r instanceof S_?(t.La.addReference(r.key,e),UN(t,r)):r instanceof R_?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||j_(t,r.key)):Y()}function UN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),If(t))}function If(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Ie.fromString(e)),r=t.qa.next();t.Na.set(r,new NN(n)),t.Oa=t.Oa.insert(n,r),w_(t.remoteStore,new Kn(Jt(uf(n.path)),r,"TargetPurposeLimboResolution",nf.oe))}}async function Uo(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=gf.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const p=Z(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>M.forEach(d,g=>M.forEach(g.$i,S=>p.persistence.referenceDelegate.addReference(m,g.targetId,S)).next(()=>M.forEach(g.Ui,S=>p.persistence.referenceDelegate.removeReference(m,g.targetId,S)))))}catch(m){if(!Oo(m))throw m;W("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const S=p.os.get(g),N=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(N);p.os=p.os.insert(g,P)}}}(r.localStore,i))}async function BN(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await y_(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new K(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Uo(n,r.hs)}}function zN(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return ee().add(r.key);{let s=ee();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function L_(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=b_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MN.bind(null,e),e.Ca.d_=IN.bind(null,e.eventManager),e.Ca.$a=kN.bind(null,e.eventManager),e}function $N(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FN.bind(null,e),e}class Ol{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return GR(this.persistence,new HR,e.initialUser,this.serializer)}Ga(e){return new BR(mf.Zr,this.serializer)}Wa(e){return new JR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ol.provider={build:()=>new Ol};class Gd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>r0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BN.bind(null,this.syncEngine),await _N(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wN}()}createDatastore(e){const n=fu(e.databaseInfo.databaseId),r=function(i){return new rN(i)}(e.databaseInfo);return function(i,o,l,u){return new oN(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new lN(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>r0(this.syncEngine,n,0),function(){return Zg.D()?new Zg:new eN}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,p){const m=new bN(s,i,o,l,u,d);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Fo(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Gd.provider={build:()=>new Gd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Sn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=V1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ef(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ic(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await y_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function i0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GN(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Jg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Jg(e.remoteStore,s)),t._onlineComponents=e}async function GN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ic(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await Ic(t,new Ol)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Ic(t,new Ol);return t._offlineComponents}async function D_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await i0(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await i0(t,new Gd))),t._onlineComponents}function KN(t){return D_(t).then(e=>e.syncEngine)}async function qN(t){const e=await D_(t),n=e.eventManager;return n.onListen=CN.bind(null,e.syncEngine),n.onUnlisten=LN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DN.bind(null,e.syncEngine),n}function QN(t,e,n={}){const r=new or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const p=new HN({next:g=>{p.Za(),o.enqueueAndForget(()=>TN(i,m));const S=g.docs.has(l);!S&&g.fromCache?d.reject(new K(V.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&g.fromCache&&u&&u.source==="server"?d.reject(new K(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new AN(uf(l.path),p,{includeMetadataChanges:!0,_a:!0});return EN(i,m)}(await qN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t,e,n){if(!n)throw new K(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XN(t,e,n,r){if(e===!0&&r===!0)throw new K(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function a0(t){if(!G.isDocumentKey(t))throw new K(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Ml(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kf(t);throw new K(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=O_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class M_{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cS;switch(r.type){case"firstParty":return new fS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=o0.get(n);r&&(W("ComponentProvider","Removing Datastore"),o0.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Af(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class xo extends Af{constructor(e,n,r){super(e,n,uf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new G(e))}withConverter(e){return new xo(this.firestore,e,this._path)}}function kc(t,e,...n){if(t=wt(t),arguments.length===1&&(e=V1.newId()),YN("doc","path",e),t instanceof M_){const r=Ie.fromString(e,...n);return a0(r),new Nt(t,null,new G(r))}{if(!(t instanceof Nt||t instanceof xo))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return a0(r),new Nt(t.firestore,t instanceof xo?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new __(this,"async_queue_retry"),this.Vu=()=>{const r=Tc();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Tc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Tc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new or;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Oo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Sn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=wf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Sf extends M_{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new u0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u0(e),this._firestoreClient=void 0,await e}}}function V_(t){if(t._terminated)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZN(t),t._firestoreClient}function ZN(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,p){return new AS(l,u,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,O_(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new WN(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zs(Ge.fromBase64String(e))}catch(n){throw new K(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zs(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=/^__.*__$/;class eb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mo(e,this.data,n,this.fieldTransforms)}}function U_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Cf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(U_(this.Cu)&&JN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fu(e)}Qu(e,n,r,s=!1){return new Cf({Cu:e,methodName:n,qu:r,path:ze.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nb(t){const e=t._freezeSettings(),n=fu(t._databaseId);return new tb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rb(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);H_("Data must be an object, but it was:",o,r);const l=z_(r,o);let u,d;if(i.merge)u=new Ft(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=sb(e,m,n);if(!o.contains(g))throw new K(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);ob(p,g)||p.push(g)}u=new Ft(p),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new eb(new At(l),u,d)}function B_(t,e){if($_(t=wt(t)))return H_("Unsupported field value:",e,t),z_(t,e);if(t instanceof F_)return function(r,s){if(!U_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=B_(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=De.fromDate(r);return{timestampValue:Ll(s.serializer,i)}}if(r instanceof De){const i=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ll(s.serializer,i)}}if(r instanceof Nf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zs)return{bytesValue:c_(s.serializer,r._byteString)};if(r instanceof Nt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ff(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bf)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return cf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${kf(r)}`)}(t,e)}function z_(t,e){const n={};return F1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qs(t,(r,s)=>{const i=B_(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function $_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof Nf||t instanceof zs||t instanceof Nt||t instanceof F_||t instanceof bf)}function H_(t,e,n){if(!$_(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=kf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function sb(t,e,n){if((e=wt(e))instanceof Rf)return e._internalPath;if(typeof e=="string")return W_(t,e);throw Vl("Field path arguments must be of type string or ",t,!1,void 0,n)}const ib=new RegExp("[~\\*/\\[\\]]");function W_(t,e,n){if(e.search(ib)>=0)throw Vl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rf(...e.split("."))._internalPath}catch{throw Vl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new K(V.INVALID_ARGUMENT,l+t+u)}function ob(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ab(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(K_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ab extends G_{data(){return super.data()}}function K_(t,e){return typeof e=="string"?W_(t,e):e instanceof Rf?e._internalPath:e._delegate._internalPath}class lb{convertValue(e,n="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Se(o.doubleValue));return new bf(i)}convertGeoPoint(e){return new Nf(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mo(e));default:return null}}convertTimestamp(e){const n=cr(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);le(g_(r));const s=new go(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Sn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class q_ extends G_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new db(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(K_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class db extends q_{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t){t=Ml(t,Nt);const e=Ml(t.firestore,Sf);return QN(V_(e),t._key).then(n=>mb(e,t,n))}class fb extends lb{constructor(e){super(),this.firestore=e}convertBytes(e){return new zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function c0(t,e,n){t=Ml(t,Nt);const r=Ml(t.firestore,Sf),s=ub(t.converter,e);return pb(r,[rb(nb(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xn.none())])}function pb(t,e){return function(r,s){const i=new or;return r.asyncQueue.enqueueAndForget(async()=>ON(await KN(r),s,i)),i.promise}(V_(t),e)}function mb(t,e,n){const r=n.docs.get(e._key),s=new fb(t);return new q_(t,s,e._key,r,new cb(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){qs=s})(Gs),Os(new Fr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Sf(new dS(r.getProvider("auth-internal")),new mS(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new go(d.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ir(Ng,"4.7.3",e),ir(Ng,"4.7.3","esm2017")})();var gb="firebase",yb="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(gb,yb,"app");const vb={apiKey:"AIzaSyBWaYH6fnf6Etp8kWzjoO5FUejE5sE8ShA",authDomain:"t-track-demo.firebaseapp.com",projectId:"t-track-demo",storageBucket:"t-track-demo.firebasestorage.app",messagingSenderId:"303259648078",appId:"1:303259648078:web:0dd0b3887215d659d3431f",measurementId:"G-GTPLK2KLVQ"},_b=Qv(vb),Ra=aS(_b),Ac={},Q_=L.createContext(void 0),Pf=()=>{const t=L.useContext(Q_);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},xb=({children:t})=>{const[e,n]=L.useState(null),[r,s]=L.useState(null),[i,o]=L.useState(!0);L.useEffect(()=>Qk(Ra,async g=>{if(n(g),g)try{const S=await hb(kc(Ac,"users",g.uid));if(S.exists())s(S.data());else{const N={uid:g.uid,email:g.email||"",isAdmin:!1,displayName:g.displayName||void 0};await c0(kc(Ac,"users",g.uid),N),s(N)}}catch(S){console.error("Error fetching user profile:",S),s({uid:g.uid,email:g.email||"",isAdmin:g.email==="admin@t-track.com",displayName:g.displayName||void 0})}else s(null);o(!1)}),[]);const p={user:e,userProfile:r,loading:i,login:async(m,g)=>{await Gk(Ra,m,g)},register:async(m,g,S)=>{const N=await Wk(Ra,m,g),P={uid:N.user.uid,email:N.user.email||"",isAdmin:m==="admin@t-track.com",displayName:S};try{await c0(kc(Ac,"users",N.user.uid),P)}catch(j){console.error("Error creating user profile:",j)}},logout:async()=>{await Yk(Ra)},isAdmin:(r==null?void 0:r.isAdmin)||!1};return c.jsx(Q_.Provider,{value:p,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(t,e)=>{const n=L.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...d},p)=>L.createElement("svg",{ref:p,...wb,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Eb(t)}`,l].join(" "),...d},[...e.map(([m,g])=>L.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=se("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=se("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=se("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=se("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=se("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=se("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=se("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ix=({isOpen:t,onClose:e})=>{const[n,r]=L.useState(!0),[s,i]=L.useState(""),[o,l]=L.useState(""),[u,d]=L.useState(""),[p,m]=L.useState(!1),[g,S]=L.useState(""),{login:N,register:P}=Pf(),j=async E=>{E.preventDefault(),m(!0),S("");try{n?await N(s,o):await P(s,o,u),e(),i(""),l(""),d("")}catch(_){S(_.message||"An error occurred")}finally{m(!1)}};return t?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n?"Sign In":"Create Account"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-6 h-6"})})]}),c.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[g&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:c.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:g})}),!n&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Name"}),c.jsxs("div",{className:"relative",children:[c.jsx(Bo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",value:u,onChange:E=>d(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Your name"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),c.jsxs("div",{className:"relative",children:[c.jsx(Rb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"email",value:s,onChange:E=>i(E.target.value),required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"your@email.com"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(Sb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"password",value:o,onChange:E=>l(E.target.value),required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"••••••••"})]})]}),c.jsx("button",{type:"submit",disabled:p,className:"w-full bg-emerald-600 text-white py-2 px-4 rounded-lg hover:bg-emerald-700 focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Please wait...":n?"Sign In":"Create Account"}),c.jsx("div",{className:"text-center",children:c.jsx("button",{type:"button",onClick:()=>r(!n),className:"text-emerald-600 hover:text-emerald-700 dark:text-emerald-400 text-sm",children:n?"Don't have an account? Sign up":"Already have an account? Sign in"})}),n&&c.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:c.jsxs("p",{className:"text-blue-600 dark:text-blue-400 text-sm",children:[c.jsx("strong",{children:"Demo Accounts:"}),c.jsx("br",{}),"Admin: admin@t-track.com / password",c.jsx("br",{}),"User: user@t-track.com / password"]})})]})]})}):null},Ob=()=>{const{darkMode:t,toggleDarkMode:e,isPWA:n}=Ro(),{user:r,userProfile:s,logout:i}=Pf(),[o,l]=L.useState(!1),[u,d]=L.useState(!1);if(n)return null;const p=async()=>{try{await i(),l(!1)}catch(m){console.error("Error logging out:",m)}};return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-800",children:[c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsxs(Ae,{to:"/",className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"text-white font-bold text-lg",children:"T"})}),c.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"T-track"})]}),c.jsxs("nav",{className:"hidden md:flex space-x-8",children:[c.jsx(Ae,{to:"/",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:"Events"}),c.jsx(Ae,{to:"/riders",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:"Riders"}),c.jsx(Ae,{to:"/horses",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:"Horses"}),c.jsx(Ae,{to:"/history",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:"History"}),c.jsx(Ae,{to:"/settings",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:"Settings"})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("a",{href:"https://t-tracksystem.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:c.jsx(Lf,{className:"w-5 h-5"})}),r?c.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[c.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(s==null?void 0:s.displayName)||r.email,(s==null?void 0:s.isAdmin)&&c.jsx("span",{className:"text-emerald-600 ml-1",children:"(Admin)"})]}),c.jsx("button",{onClick:p,className:"text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:c.jsx(ex,{className:"w-5 h-5"})})]}):c.jsx("button",{onClick:()=>d(!0),className:"hidden md:flex text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:c.jsx(Bo,{className:"w-5 h-5"})}),c.jsx("button",{onClick:e,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",children:t?c.jsx(sx,{className:"w-5 h-5"}):c.jsx(nx,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>l(!o),className:"md:hidden text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",children:o?c.jsx(jr,{className:"w-6 h-6"}):c.jsx(Nb,{className:"w-6 h-6"})})]})]})}),o&&c.jsx("div",{className:"md:hidden bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800",children:c.jsxs("div",{className:"px-4 py-2 space-y-1",children:[c.jsx(Ae,{to:"/",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",onClick:()=>l(!1),children:"Events"}),c.jsx(Ae,{to:"/riders",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",onClick:()=>l(!1),children:"Riders"}),c.jsx(Ae,{to:"/horses",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",onClick:()=>l(!1),children:"Horses"}),c.jsx(Ae,{to:"/history",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",onClick:()=>l(!1),children:"History"}),c.jsx(Ae,{to:"/settings",className:"block px-3 py-2 text-gray-700 dark:text-gray-300 hover:text-emerald-600 dark:hover:text-emerald-400",onClick:()=>l(!1),children:"Settings"}),c.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-2",children:r?c.jsxs("div",{className:"px-3 py-2",children:[c.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:[(s==null?void 0:s.displayName)||r.email,(s==null?void 0:s.isAdmin)&&c.jsx("span",{className:"text-emerald-600 ml-1",children:"(Admin)"})]}),c.jsx("button",{onClick:p,className:"text-red-600 hover:text-red-700 text-sm",children:"Sign Out"})]}):c.jsx("button",{onClick:()=>{d(!0),l(!1)},className:"block px-3 py-2 text-emerald-600 hover:text-emerald-700",children:"Sign In"})})]})})]}),c.jsx(ix,{isOpen:u,onClose:()=>d(!1)})]})},Mb=()=>{const{isPWA:t}=Ro(),e=So();if(!t)return null;const n=[{path:"/",icon:Ab,label:"Events"},{path:"/riders",icon:Df,label:"Riders"},{path:"/horses",icon:Zs,label:"Horses"},{path:"/history",icon:kb,label:"History"},{path:"/settings",icon:jb,label:"Settings"}];return c.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 safe-area-padding-bottom",children:c.jsx("div",{className:"flex justify-around items-center py-2",children:n.map(({path:r,icon:s,label:i})=>{const o=e.pathname===r;return c.jsxs(Ae,{to:r,className:`flex flex-col items-center space-y-1 p-2 rounded-lg transition-colors ${o?"text-emerald-600 dark:text-emerald-400":"text-gray-600 dark:text-gray-400 hover:text-emerald-600 dark:hover:text-emerald-400"}`,children:[c.jsx(s,{className:"w-5 h-5"}),c.jsx("span",{className:"text-xs",children:i})]},r)})})})},Vb=({children:t})=>{const{isPWA:e}=Ro();return c.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[c.jsx(Ob,{}),c.jsx("main",{className:`${e?"pb-20":"pb-4"}`,children:t}),c.jsx(Mb,{})]})},Fb=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(!1),[s,i]=L.useState(!1);L.useEffect(()=>{const u=window.matchMedia("(display-mode: standalone)").matches;i(u);const d=m=>{m.preventDefault(),e(m),setTimeout(()=>{u||r(!0)},18e4)},p=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",d),window.addEventListener("appinstalled",p),()=>{window.removeEventListener("beforeinstallprompt",d),window.removeEventListener("appinstalled",p)}},[]);const o=async()=>{if(!t)return;t.prompt();const{outcome:u}=await t.userChoice;u==="accepted"&&(e(null),r(!1))},l=()=>{r(!1),sessionStorage.setItem("pwa-prompt-dismissed","true")};return s||!n||!t||sessionStorage.getItem("pwa-prompt-dismissed")?null:c.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 z-50 max-w-sm mx-auto",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center",children:c.jsx(rx,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Install T-track App"}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Get faster access and offline features by installing our app on your device."}),c.jsxs("div",{className:"flex space-x-2 mt-3",children:[c.jsxs("button",{onClick:o,className:"flex items-center space-x-1 bg-emerald-600 text-white px-3 py-1.5 rounded text-xs font-medium hover:bg-emerald-700 transition-colors",children:[c.jsx(Ib,{className:"w-3 h-3"}),c.jsx("span",{children:"Install"})]}),c.jsx("button",{onClick:l,className:"text-gray-500 dark:text-gray-400 px-3 py-1.5 rounded text-xs hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Not now"})]})]}),c.jsx("button",{onClick:l,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-4 h-4"})})]})})},ox=({event:t})=>{const e=r=>{switch(r){case"live":return"bg-red-500 animate-pulse";case"upcoming":return"bg-emerald-500";case"finished":return"bg-gray-500";default:return"bg-gray-500"}},n=r=>{switch(r){case"live":return"LIVE";case"upcoming":return"UPCOMING";case"finished":return"FINISHED";default:return"UNKNOWN"}};return c.jsx(Ae,{to:`/events/${t.id}`,className:"block",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[c.jsxs("div",{className:"h-48 bg-cover bg-center relative",style:{backgroundImage:`url(${t.backgroundImage})`},children:[c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),c.jsx("div",{className:"absolute top-4 left-4",children:c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold text-white ${e(t.status)}`,children:n(t.status)})}),c.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[c.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t.name}),c.jsxs("div",{className:"flex items-center text-white text-sm space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(tx,{className:"w-4 h-4"}),c.jsx("span",{children:t.location})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(gu,{className:"w-4 h-4"}),c.jsx("span",{children:new Date(t.startTime).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"})})]})]})]})]}),c.jsxs("div",{className:"p-4",children:[c.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-3",children:t.description}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400",children:[c.jsx(Df,{className:"w-4 h-4"}),c.jsxs("span",{className:"text-sm",children:[t.categories.length," categories"]})]}),c.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400",children:[c.jsx(jf,{className:"w-4 h-4"}),c.jsxs("span",{className:"text-sm",children:[" ",new Date(t.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]}),c.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:t.categories.map(r=>c.jsx("span",{className:"px-2 py-1 bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200 text-xs rounded-full",children:r},r))})]})]})})},Ub={ListName:"API T-Track|Live CEN B",BottomPicture:"",BottomPictureShow:0,ColumnHeadsFontName:"",ColumnHeadsFontSize:12,ColumnHeadsFontBold:!0,ColumnHeadsFontItalic:!1,ColumnHeadsFontUnderlined:!1,ColumnHeadsColor:"",ColumnHeadsShow:2,Columns:1,ColumnSpacing:5,CoverSheet:"",BackSheet:"",Design:"",DesignShow:2,EveryOtherLineGray:!1,FontName:"Arial",FontSize:10,FooterFontName:"",FooterFontSize:10,FooterFontBold:!1,FooterFontItalic:!1,FooterFontUnderlined:!1,FooterColor:"",GrayLine:!0,HeadLine1:" 28° Trofeo Les Grandes Montagnes (2)",HeadLine1FontName:"",HeadLine1FontSize:16,HeadLine1FontBold:!1,HeadLine1FontItalic:!1,HeadLine1FontUnderlined:!0,HeadLine2:"",HeadLine1Color:"",HeadLine1Show:2,HeadLine2FontName:"",HeadLine2FontSize:16,HeadLine2FontBold:!0,HeadLine2FontItalic:!1,HeadLine2FontUnderlined:!1,HeadLine2Color:"",HeadLine2Show:2,HeightBottomPicture:40,LineColor:"",LineBackColor:"",LineDynamicFormat:"",LineSpacing:1,MaxRecords:0,MultiplierField:"",PageFormat:0,PageMarginBottom:10,PageMarginLeft:10,PageMarginRight:10,PageMarginTop:10,PageSize:3,PageHeight:297,PageWidth:210,SepLine:!0,TopRightPicture:"",TopRightPictureShow:0,ListHeaderText:"",ListFooterText:"",ListHeaderFooterFontName:"",ListHeaderFooterFontSize:10,ListHeaderFooterFontBold:!1,ListHeaderFooterFontItalic:!1,ListHeaderFooterFontUnderlined:!1,ListHeaderFooterAlignment:1,Remarks:"",LastChange:"2025-07-08 20:45:44",FooterText1:"",FooterText2:"",FooterText3:"[Time]",Orders:[{Expression:"[Elimination_Gait_1]=0",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0},{Expression:"[Elimination_Gait_2]=0",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0},{Expression:"[Elimination_Gait_3]=0",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0},{Expression:"val(replace([AfterRide 3 anelli];-1;98))",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0},{Expression:"val(replace([AfterRide2];-1;98))",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0},{Expression:"val(replace([AfterRide1];-1;98))",Descending:!1,Grouping:0,GroupFilterDefault:1,GroupFilterLabel:"",PageBreak:0,FontName:"",FontSize:12,FontBold:!1,FontItalic:!1,FontUnderlined:!1,Color:"",BackgroundColor:"",Spacing:0}],Filters:[{OrConjunction:!1,Expression1:"CONTEST",Operator:"=",Expression2:"3"}],Fields:[{Expression:"DisplayName",Label:"RIDER NAME"},{Expression:"BIB",Label:"Bib"},{Expression:"[ID_FISE_CAVALIERE]",Label:"RIDER ID"},{Expression:"if([CLUB]>0;[CLUB];[NATION.IOCNAME])",Label:"FLAG"},{Expression:"[Horse]",Label:"HORSE NAME"},{Expression:"[ID_FISE_CAVALLO]",Label:"HORSE ID"},{Expression:"Switch([AfterRide 3 anelli]>0;[AfterRide 3 anelli];[AfterRide2]>0;[AfterRide2];[AfterRide1]>0;[AfterRide1])",Label:"Main rank"},{Expression:'"----------------------------------"',Label:"TIMING 1"},{Expression:'"1" & " - " & [_1_KM]',Label:"Phase Km"},{Expression:"Partenza 1",Label:"Start phase"},{Expression:"TIME3",Label:"Arrival"},{Expression:"TIME6",Label:"Loop Time"},{Expression:"Media arrivo 1",Label:"Loop Speed"},{Expression:"TIME4",Label:"In Time"},{Expression:"TIME5",Label:"Recovery Time"},{Expression:"Media in vet 1",Label:"Phase Speed"},{Expression:"TIME7",Label:"Ride Time"},{Expression:"TIME10",Label:"Ride Speed"},{Expression:'if([AfterRide1]>0;[AfterRide1]& "° ";"")',Label:"Rank"},{Expression:`Switch([Elimination_Gait_1]=1;[EC1];[T12]>0;[TIME12]) & if([Pass_1]=1;" ["& GapTimeTop(4;11;"-";"+HH:mm:ss''") &"]")`,Label:"Start"},{Expression:'if([Pass_1]=1;"yes")',Label:"Ready to next phase"},{Expression:"TIME16",Label:"Extimated time arrival"},{Expression:" ",Label:"Extimated loop time"},{Expression:'"----------------------------------"',Label:"TIMING 2"},{Expression:'"2" & " - " & [_2_KM]',Label:"Phase Km"},{Expression:"Partenza 2",Label:"Start phase"},{Expression:"Arrivo 2",Label:"Arrival"},{Expression:"TIME35",Label:"Loop Time"},{Expression:"TIME39",Label:"Loop Speed"},{Expression:"TIME33",Label:"In Time"},{Expression:"TIME34",Label:"Recovery Time"},{Expression:"TIME40",Label:"Phase Speed"},{Expression:"TIME37",Label:"Ride Time"},{Expression:"Average 2",Label:"Ride Speed"},{Expression:'if([AfterRide2]>0;[AfterRide2]& "° ";"")',Label:"Rank"},{Expression:`Switch([Elimination_Gait_2]=1;[EC2];[T42]>0;[TIME42]) & if([Pass_2]=1;" ["& GapTimeTop(33;12;"-";"+HH:mm:ss''") &"]")`,Label:"Start"},{Expression:'if([Pass_2]=1;"yes")',Label:"Ready to next phase"},{Expression:"TIME46",Label:"Extimated time arrival"},{Expression:"",Label:"Extimated loop time"},{Expression:'"----------------------------------"',Label:"TIMING 3"},{Expression:'"3" & " - " & [_3_KM]',Label:"Phase Km"},{Expression:"Partenza 3",Label:"Start phase"},{Expression:`Arrivo 3 & if([Pass_3]=1;" ["& GapTimeTop(52;1;"";"+HH:mm:ss''") &"]")`,Label:"Arrival"},{Expression:"Tempo arrivo 3",Label:"Loop Time"},{Expression:"Media arrivo 3",Label:"Loop Speed"},{Expression:"In vet 3",Label:"In Time"},{Expression:"Recovery 3",Label:"Recovery Time"},{Expression:"TIME59",Label:"Phase Speed"},{Expression:"Total time 3 anelli",Label:"Ride Time"},{Expression:"TIME65",Label:"Ride Speed"},{Expression:'if([AfterRide 3 anelli]>0 and [Pass_3]=1;[AfterRide 3 anelli]& "° ";"")',Label:"Rank"},{Expression:'Switch([Elimination_Gait_3]=1;[EC3];[T62]>0;[TIME62];[Pass_3]=1;"-")',Label:"Start"},{Expression:'if([Pass_3]=1;"yes")',Label:"Ready to next phase"},{Expression:"",Label:"Extimated time arrival"},{Expression:"",Label:"Extimated loop time"},{Expression:'"----------------------------------"',Label:"VET PRE"},{Expression:'"PRE"',Label:"Phase"},{Expression:'""',Label:"Recovery Time Vet"},{Expression:"Heart_Rate",Label:"Heart Rate"},{Expression:"",Label:"Rec. Index"},{Expression:"Respiro",Label:"Resp."},{Expression:"Mucous",Label:"Mucous"},{Expression:"Capillar_Refill",Label:"Cap. Refill"},{Expression:"Skin",Label:"Skin"},{Expression:"Gut_Sounds",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone",Label:"Muscle Tone"},{Expression:"Gait",Label:"Gait"},{Expression:"Vet",Label:"Veterinary"},{Expression:'"1"',Label:"R.I."},{Expression:'"----------------------------------"',Label:"VET 1"},{Expression:'"1"',Label:"Phase"},{Expression:"TIME5 ",Label:"Recovery Time Vet"},{Expression:"Heart_Rate_1",Label:"Heart Rate"},{Expression:'IF([T14]>0 ;"+"&[T14];[T14])',Label:"Rec. Index"},{Expression:"Respiro_1",Label:"Resp."},{Expression:"Mucous_1",Label:"Mucous"},{Expression:"Capillar_Refill_1",Label:"Cap. Refill"},{Expression:"Skin_1",Label:"Skin"},{Expression:"Gut_Sounds_1",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_1",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_1",Label:"Muscle Tone"},{Expression:"Gait_1",Label:"Gait"},{Expression:"Vet_1",Label:"Veterinary"},{Expression:'"1"',Label:"R.I."},{Expression:'"1 - Re Insp."',Label:"Phase"},{Expression:'""',Label:"Recovery Time Vet"},{Expression:"Heart_Rate_1_RI",Label:"Heart Rate"},{Expression:'IF([T14]>0 ;"+"&[T14];[T14])',Label:"Rec. Index"},{Expression:"Respiro_1_RI",Label:"Resp."},{Expression:"Mucous_1_RI",Label:"Mucous"},{Expression:"Capillar_Refill_1_RI",Label:"Cap. Refill"},{Expression:"Skin_1_RI",Label:"Skin"},{Expression:"Gut_Sounds_1_RI",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_1_RI",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_1_RI",Label:"Muscle Tone"},{Expression:"Gait_1_RI",Label:"Gait"},{Expression:"Vet_1_RI",Label:"Veterinary"},{Expression:"if([Riesame_1]=1;1;0)",Label:"R.I."},{Expression:'"----------------------------------"',Label:"VET 2"},{Expression:'"2"',Label:"Phase"},{Expression:"TIME34",Label:"Recovery Time Vet"},{Expression:"Heart_Rate_2",Label:"Heart Rate"},{Expression:'IF([T44]>0 ;"+"&[T44];[T44])',Label:"Rec. Index"},{Expression:"Respiro_2",Label:"Resp."},{Expression:"Mucous_2",Label:"Mucous"},{Expression:"Capillar_Refill_2",Label:"Cap. Refill"},{Expression:"Skin_2",Label:"Skin"},{Expression:"Gut_Sounds_2",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_2",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_2",Label:"Muscle Tone"},{Expression:"Gait_2",Label:"Gait"},{Expression:"Vet_2",Label:"Veterinary"},{Expression:'"1"',Label:"R.I."},{Expression:'"2 - Re Insp."',Label:"Phase"},{Expression:'""',Label:"Recovery Time Vet"},{Expression:"Heart_Rate_2_RI",Label:"Heart Rate"},{Expression:'IF([T47]>0 ;"+"&[T47];[T47])',Label:"Rec. Index"},{Expression:"Respiro_2_RI",Label:"Resp."},{Expression:"Mucous_2_RI",Label:"Mucous"},{Expression:"Capillar_Refill_2_RI",Label:"Cap. Refill"},{Expression:"Skin_2_RI",Label:"Skin"},{Expression:"Gut_Sounds_2_RI",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_2_RI",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_2_RI",Label:"Muscle Tone"},{Expression:"Gait_2_RI",Label:"Gait"},{Expression:"Vet_2_RI",Label:"Veterinary"},{Expression:"if([Riesame_2]=1;1;0)",Label:"R.I."},{Expression:'"----------------------------------"',Label:"VET 3"},{Expression:'"3"',Label:"Phase"},{Expression:"Recovery 3",Label:"Recovery Time Vet"},{Expression:"Heart_Rate_3",Label:"Heart Rate"},{Expression:'IF([T67]>0 ;"+"&[T67];[T67])',Label:"Rec. Index"},{Expression:"Respiro_3",Label:"Resp."},{Expression:"Mucous_3",Label:"Mucous"},{Expression:"Capillar_Refill_3",Label:"Cap. Refill"},{Expression:"Skin_3",Label:"Skin"},{Expression:"Gut_Sounds_3",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_3",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_3",Label:"Muscle Tone"},{Expression:"Gait_3",Label:"Gait"},{Expression:"Vet_3",Label:"Veterinary"},{Expression:'"1"',Label:"R.I."},{Expression:'"3 - Re Insp."',Label:"Phase"},{Expression:'""',Label:"Recovery Time Vet"},{Expression:"Heart_Rate_3_RI",Label:"Heart Rate"},{Expression:'IF([T67]>0 ;"+"&[T67];[T67])',Label:"Rec. Index"},{Expression:"Respiro_3_RI",Label:"Resp."},{Expression:"Mucous_3_RI",Label:"Mucous"},{Expression:"Capillar_Refill_3_RI",Label:"Cap. Refill"},{Expression:"Skin_3_RI",Label:"Skin"},{Expression:"Gut_Sounds_3_RI",Label:"Gut Sounds"},{Expression:"Girth_Back_Whiters_3_RI",Label:"Girth Back Whiters"},{Expression:"Muscle_Tone_3_RI",Label:"Muscle Tone"},{Expression:"Gait_3_RI",Label:"Gait"},{Expression:"Vet_3_RI",Label:"Veterinary"},{Expression:"if([Riesame_3]=1;1;0)",Label:"R.I."}],SelectorResults:[]},Bb=[["308","37","FRASSI MARCO","FISE40509/B","Veneto","CYRILLA","46159B","1","----------------------------------","1 - 0","07:00:19","8:50:23","1:50:22","15,220","8:52:38","2:14","14,917","1:52:38","14,917","1° ","9:32:37 [-]","yes","11:23:00","","2 - 0","09:32:52","11:08:57","1:36:19","17,442","11:12:17","3:20","16,858","03:32:17","15,828","1° ","11:52:16 [-]","yes","13:28:35","","3 - 0","11:52:32","13:36:12 []","1:43:55","16.165","13:45:59","9:46","16.165","05:16:13","15.93","1° ","-","yes","PRE","","36","Ok","A","1","1","A","A","A","A","","1","2:14","54","+4","Ok","B","1","1","A","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","63","+1","Ok","A","1","1","B","A","A","A","","2 - Re Insp.","60","0","Ok","A","1","1","B","A","A","A","","1","3","56","+4","Ok","B","2","2","B","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["311","40","TESTA MANUEL","FISE52669/B","Lombardia","KADEV AA","49368B","2","----------------------------------","1 - 0","07:00:23","8:56:01","1:56:00","14,483","9:01:19","5:19","13,849","2:01:19","13,849","8° ","9:41:18 [+08:41'']","yes","11:37:18","","2 - 0","09:41:36","11:31:39","1:50:19","15,228","11:36:22","4:43","14,603","03:56:22","14,216","6° ","12:16:21 [+24:05'']","yes","14:06:40","","3 - 0","12:16:37","13:55:09 [+18:57'']","1:38:47","17.005","14:04:50","9:41","17.005","05:35:09","15.03","2° ","-","yes","PRE","","44","Ok","A","1","1","A","A","A","A","","1","5:19","64","-4","Ok","A","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","62","0","Ok","B","2","1","A","A","A","A","","2 - Re Insp.","50","-2","Ok","B","1","1","A","A","A","A","","1","3","64","0","Ok","B","1","2","B","A","A","B","","3 - Re Insp.","","","","","","","","","","","0"],["312","41","AMERALDI ALICE","FISE124297/B","Lombardia","KAHIPAN","34600B/AN","3","----------------------------------","1 - 0","07:00:25","8:56:03","1:56:02","14,478","9:01:22","5:19","13,843","2:01:22","13,843","9° ","9:41:21 [+08:44'']","yes","11:37:24","","2 - 0","09:41:37","11:31:42","1:50:19","15,229","11:36:27","4:45","14,600","03:56:27","14,211","7° ","12:16:26 [+24:10'']","yes","14:06:45","","3 - 0","12:16:40","13:55:10 [+18:58'']","1:38:43","17.016","14:04:58","9:47","17.016","05:35:10","15.03","3° ","-","yes","PRE","","44","Ok","A","1","1","A","A","A","A","","1","5:19","60","0","Ok","B","1","1","A","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","62","-2","Ok","B","1","1","A","A","A","A","","2 - Re Insp.","50","+2","Ok","B","1","2","A","A","A","A","","1","3","55","+5","Ok","B","2","2","A","A","A","B","","3 - Re Insp.","","","","","","","","","","","0"],["313","42","GARBETTA COSTANZA","FISE4833/Y","Valle d'Aosta","TASHUNKA WITKA","17233A","4","----------------------------------","1 - 0","07:00:28","8:54:21","1:54:20","14,693","8:56:37","2:16","14,408","1:56:37","14,408","2° ","9:36:36 [+03:59'']","yes","11:30:56","","2 - 0","09:36:53","11:29:55","1:53:18","14,827","11:32:09","2:14","14,541","03:52:09","14,474","2° ","12:12:08 [+19:52'']","yes","14:05:26","","3 - 0","12:12:30","14:04:46 [+28:34'']","1:52:37","14.915","14:10:53","6:07","14.915","05:44:47","14.61","4° ","-","yes","PRE","","40","Ok","A","1","1","A","A","A","A","","1","2:16","56","-4","Ok","B","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","59","0","Ok","B","1","1","B","A","A","A","","2 - Re Insp.","51","-7","Ok","A","1","1","A","A","A","A","","1","3","52","+12","Ok","B","2","2","B","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["316","45","GALLI VALENTINA","FISE32947/B","Emilia Romagna","ZIRU DE ILOI","34782B/AN","5","----------------------------------","1 - 0","07:00:26","8:55:54","1:55:53","14,497","8:58:21","2:27","14,197","1:58:21","14,197","5° ","9:38:20 [+05:43'']","yes","11:34:13","","2 - 0","09:38:33","11:31:20","1:52:59","14,869","11:34:03","2:43","14,519","03:54:03","14,356","4° ","12:14:02 [+21:46'']","yes","14:07:01","","3 - 0","12:14:19","14:07:56 [+31:44'']","1:53:53","14.751","14:16:30","8:33","14.751","05:47:57","14.48","5° ","-","yes","PRE","","48","Ok","A","1","1","A","A","A","A","","1","2:27","53","-1","Ok","A","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","58","+4","Ok","B","1","1","A","A","A","A","","2 - Re Insp.","51","+1","Ok","A","1","1","B","A","A","A","","1","3","60","0","Ok","A","1","2","A","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["320","105","CAMPAGNONI GIACOMINO","50545196","LOMBARDIA","ANTO DI GALLURA","49022B","6","----------------------------------","1 - 0","07:00:21","8:56:05","1:56:04","14,473","8:58:12","2:07","14,214","1:58:12","14,214","4° ","9:38:11 [+05:34'']","yes","11:34:16","","2 - 0","09:38:27","11:31:34","1:53:22","14,819","11:33:47","2:12","14,536","03:53:47","14,373","3° ","12:13:46 [+21:30'']","yes","14:07:08","","3 - 0","12:14:01","14:10:37 [+34:25'']","1:56:50","14.378","14:12:45","2:08","14.378","05:50:37","14.37","6° ","-","yes","PRE","","40","Ok","A","1","1","A","A","A","A","","1","2:07","58","-2","Ok","A","2","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","61","-1","Ok","A","1","1","A","A","A","A","","2 - Re Insp.","51","-1","Ok","A","1","1","A","A","A","A","","1","3","59","-1","Ok","B","2","1","A","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["305","34","CASALENA GABRIELE","FISE63355/A","Valle d'Aosta","NIHAL TAOUY","24719A","7","----------------------------------","1 - 0","07:00:33","8:56:12","1:56:11","14,459","9:00:50","4:39","13,904","2:00:50","13,904","7° ","9:40:49 [+08:12'']","yes","11:37:01","","2 - 0","09:41:06","11:31:51","1:51:01","15,133","11:39:10","7:18","14,198","03:59:10","14,050","8° ","12:19:09 [+26:53'']","yes","14:10:10","","3 - 0","12:19:35","14:26:04 [+49:52'']","2:06:54","13.237","14:39:27","13:23","13.237","06:06:04","13.76","7° ","-","yes","PRE","","52","Ok","A","1","1","A","A","A","A","","1","4:39","63","-3","Ok","B","1","2","A","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","56","-2","Ok","A","1","1","A","A","A","A","","2 - Re Insp.","50","0","Ok","B","1","1","B","A","A","A","","1","3","58","+2","Ok","B","1","1","B","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["309","38","PATRIA ADRIANO","007173/A","Piemonte","AMETYST DELLE ROSE","29210T","8","----------------------------------","1 - 0","07:00:37","9:01:02","2:01:01","13,882","9:04:54","3:52","13,451","2:04:54","13,451","11° ","9:44:53 [+12:16'']","yes","11:45:55","","2 - 0","09:45:20","11:48:51","2:03:56","13,554","11:59:06","10:15","12,519","04:19:06","12,968","10° ","12:39:05 [+46:49'']","yes","14:43:02","","3 - 0","12:39:27","14:46:27 [+1:10:15'']","2:07:21","13.191","14:53:35","7:07","13.191","06:26:27","13.04","8° ","-","yes","PRE","","36","Ok","A","1","1","A","A","A","A","","1","3:52","61","-1","Ok","A","1","1","A","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","62","+2","Ok","A","1","1","A","A","A","A","","2 - Re Insp.","45","+1","Ok","A","1","1","A","A","A","A","","1","3","56","0","Ok","A","1","1","B","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["314","43","BARMASSE CELINE","FISE6146/Y","Valle d'Aosta","RAMSES","01130Y","9","----------------------------------","1 - 0","07:00:30","9:03:23","2:03:22","13,616","9:08:19","4:55","13,094","2:08:19","13,094","12° ","9:48:18 [+15:41'']","yes","11:51:41","","2 - 0","09:48:38","11:54:51","2:06:32","13,276","12:02:03","7:11","12,563","04:22:03","12,823","11° ","12:42:02 [+49:46'']","yes","14:48:34","","3 - 0","12:43:04","15:15:39 [+1:39:27'']","2:33:36","10.937","15:30:32","14:53","10.937","06:55:39","12.12","9° ","-","yes","PRE","","56","Ok","A","1","1","A","A","A","A","","1","4:55","55","0","Ok","A","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","58","-10","Ok","A","1","2","B","A","A","A","","2 - Re Insp.","","0","","","","","","","","","","0","3","64","0","Ok","A","1","1","A","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["315","44","VASSALLO CHIARA","FISE22400/C","Piemonte","SHEITAN","04406C","10","----------------------------------","1 - 0","07:00:34","8:54:18","1:54:17","14,699","8:56:51","2:33","14,378","1:56:51","14,378","3° ","9:36:50 [+04:13'']","yes","11:31:08","","2 - 0","09:37:08","11:45:40","2:08:48","13,043","11:48:35","2:55","12,754","04:08:35","13,517","9° ","12:28:34 [+36:18'']","yes","14:37:22","","3 - 0","12:29:30","15:31:47 [+1:55:35'']","3:03:12","09.170","15:34:02","2:15","09.170","07:11:47","11.67","10° ","-","yes","PRE","","32","Ok","A","1","1","A","A","A","A","","1","2:33","54","-2","Ok","B","2","1","A","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","62","-6","Ok","A","1","1","A","A","A","A","","2 - Re Insp.","51","-3","Ok","A","1","2","A","A","A","A","","1","3","59","-1","Ok","A","1","1","A","A","A","A","","3 - Re Insp.","","","","","","","","","","","0"],["317","46","LUSTRISSY ALESSIA","FISE5950/Y","Valle d'Aosta","EDUARDO","01062Y","5","----------------------------------","1 - 0","07:00:32","8:56:10","1:56:09","14,463","8:59:01","2:51","14,117","1:59:01","14,117","6° ","9:39:00 [+06:23'']","yes","11:35:10","","2 - 0","09:39:14","11:31:48","1:52:47","14,894","11:34:09","2:21","14,591","03:54:09","14,350","5° ","12:14:08 [+21:52'']","yes","14:06:56","","3 - 0","12:14:20","14:08:01","1:53:52","14.752","14:15:25","7:23","14.752","05:48:02","14.48","","FTQ-GA","","PRE","","42","Ok","A","1","1","A","A","A","A","","1","2:51","64","0","Ok","A","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","58","+6","Ok","B","1","1","B","A","A","B","","2 - Re Insp.","51","0","Ok","A","1","1","A","A","A","A","","1","3","59","0","Ok","A","1","2","A","A","A","C","","3 - Re Insp.","","","","","","","","","","","0"],["310","39","TORRE CATERINA","FISE6015/C","Piemonte","KP CASSIOPEA","05247S/AN","10","----------------------------------","1 - 0","07:00:40","9:01:04","2:01:03","13,878","9:04:50","3:46","13,460","2:04:50","13,460","10° ","9:44:49 [+12:12'']","yes","11:45:52","","2 - 0","09:45:18","11:48:52","2:04:02","13,543","11:51:13","2:21","13,292","04:11:13","13,375","","FTQ-GA []","yes","14:35:15","","3 - 0","","","","","","","","","","","","","PRE","","44","Ok","A","1","1","A","A","A","A","","1","3:46","64","-4","Ok","B","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","48","0","Ok","B","1","1","A","A","A","A","","2 - Re Insp.","58","-14","Ok","A","1","1","A","A","A","C","","1","3","","0","OK","","","","","","","","","3 - Re Insp.","","","","","","","","","","","0"],["319","48","BOFFITO MIRKO","008194/A","Piemonte","ANIMOSO","04766C","13","----------------------------------","1 - 0","07:00:45","9:14:07","2:14:06","12,528","9:17:54","3:47","12,184","2:17:54","12,184","13° ","9:57:53 [+25:16'']","yes","12:11:59","","2 - 0","09:58:18","12:40:29","2:42:35","10,333","12:43:58","3:29","10,116","05:03:58","11,054","","RET","","16:06:32","","3 - 0","","","","","","","","","","","","","PRE","","40","Ok","A","1","1","A","A","A","A","","1","3:47","60","0","Ok","B","1","1","B","A","A","A","","1 - Re Insp.","","","","","","","","","","","0","2","57","-1","Ok","B","1","2","A","A","A","A","","2 - Re Insp.","46","+6","Ok","B","1","1","A","A","A","A","","1","3","","0","OK","","","","","","","","","3 - Re Insp.","","","","","","","","","","","0"]],zb=["BIB","ID","DisplayName","[ID_FISE_CAVALIERE]","if([CLUB]>0;[CLUB];[NATION.IOCNAME])","[Horse]","[ID_FISE_CAVALLO]","Switch([AfterRide 3 anelli]>0;[AfterRide 3 anelli];[AfterRide2]>0;[AfterRide2];[AfterRide1]>0;[AfterRide1])",'"----------------------------------"','"1" & " - " & [_1_KM]',"Partenza 1","TIME3","TIME6","Media arrivo 1","TIME4","TIME5","Media in vet 1","TIME7","TIME10",'if([AfterRide1]>0;[AfterRide1]& "° ";"")',`Switch([Elimination_Gait_1]=1;[EC1];[T12]>0;[TIME12]) & if([Pass_1]=1;" ["& GapTimeTop(4;11;"-";"+HH:mm:ss''") &"]")`,'if([Pass_1]=1;"yes")',"TIME16"," ",'"2" & " - " & [_2_KM]',"Partenza 2","Arrivo 2","TIME35","TIME39","TIME33","TIME34","TIME40","TIME37","Average 2",'if([AfterRide2]>0;[AfterRide2]& "° ";"")',`Switch([Elimination_Gait_2]=1;[EC2];[T42]>0;[TIME42]) & if([Pass_2]=1;" ["& GapTimeTop(33;12;"-";"+HH:mm:ss''") &"]")`,'if([Pass_2]=1;"yes")',"TIME46","",'"3" & " - " & [_3_KM]',"Partenza 3",`Arrivo 3 & if([Pass_3]=1;" ["& GapTimeTop(52;1;"";"+HH:mm:ss''") &"]")`,"Tempo arrivo 3","Media arrivo 3","In vet 3","Recovery 3","TIME59","Total time 3 anelli","TIME65",'if([AfterRide 3 anelli]>0 and [Pass_3]=1;[AfterRide 3 anelli]& "° ";"")','Switch([Elimination_Gait_3]=1;[EC3];[T62]>0;[TIME62];[Pass_3]=1;"-")','if([Pass_3]=1;"yes")','"PRE"','""',"Heart_Rate","Respiro","Mucous","Capillar_Refill","Skin","Gut_Sounds","Girth_Back_Whiters","Muscle_Tone","Gait","Vet",'"1"',"TIME5 ","Heart_Rate_1",'IF([T14]>0 ;"+"&[T14];[T14])',"Respiro_1","Mucous_1","Capillar_Refill_1","Skin_1","Gut_Sounds_1","Girth_Back_Whiters_1","Muscle_Tone_1","Gait_1","Vet_1",'"1 - Re Insp."',"Heart_Rate_1_RI","Respiro_1_RI","Mucous_1_RI","Capillar_Refill_1_RI","Skin_1_RI","Gut_Sounds_1_RI","Girth_Back_Whiters_1_RI","Muscle_Tone_1_RI","Gait_1_RI","Vet_1_RI","if([Riesame_1]=1;1;0)",'"2"',"Heart_Rate_2",'IF([T44]>0 ;"+"&[T44];[T44])',"Respiro_2","Mucous_2","Capillar_Refill_2","Skin_2","Gut_Sounds_2","Girth_Back_Whiters_2","Muscle_Tone_2","Gait_2","Vet_2",'"2 - Re Insp."',"Heart_Rate_2_RI",'IF([T47]>0 ;"+"&[T47];[T47])',"Respiro_2_RI","Mucous_2_RI","Capillar_Refill_2_RI","Skin_2_RI","Gut_Sounds_2_RI","Girth_Back_Whiters_2_RI","Muscle_Tone_2_RI","Gait_2_RI","Vet_2_RI","if([Riesame_2]=1;1;0)",'"3"',"Heart_Rate_3",'IF([T67]>0 ;"+"&[T67];[T67])',"Respiro_3","Mucous_3","Capillar_Refill_3","Skin_3","Gut_Sounds_3","Girth_Back_Whiters_3","Muscle_Tone_3","Gait_3","Vet_3",'"3 - Re Insp."',"Heart_Rate_3_RI","Respiro_3_RI","Mucous_3_RI","Capillar_Refill_3_RI","Skin_3_RI","Gut_Sounds_3_RI","Girth_Back_Whiters_3_RI","Muscle_Tone_3_RI","Gait_3_RI","Vet_3_RI","if([Riesame_3]=1;1;0)"],$b=null,Hb={List:Ub,Data:Bb,DataFields:zb,GroupFilters:$b};let ve=[{id:"1",name:"Summer Sprint Race",eventID:"340000",location:"Tuscany Hills",startTime:"2024-12-15T08:00:00Z",endTime:"2024-12-15T16:00:00Z",subscriptionDeadline:"2024-12-10T23:59:59Z",backgroundImage:""},{id:"27",name:"Mountain Challenge",eventID:"340001",location:"Alpine Region",startTime:"2024-12-20T07:00:00Z",endTime:"2024-12-20T18:00:00Z",subscriptionDeadline:"2024-12-15T23:59:59Z",backgroundImage:""},{id:"26",name:"28° Trofeo Les Grandes Montagnes (2)",eventID:"340002",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:""},{id:"25",name:"MASTER ENERGY CUP (2)",eventID:"340003",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:""},{id:"24",name:"MASTER ENERGY CUP (1)",eventID:"340004",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:""},{id:"23",name:"28° Trofeo Les Grandes Montagnes (1)",eventID:"340005",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"22",name:"Endurance horse Show Pony",eventID:"340006",location:"Samorin (SVK)",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"21",name:"Endurance horse Show Pony",eventID:"340007",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"20",name:"Autumn Classic",eventID:"340008",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"19",name:"Autumn Classic",eventID:"340009",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"18",name:"Autumn Classic",eventID:"340010",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"17",name:"Autumn Classic",eventID:"340011",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"16",name:"Autumn Classic",eventID:"340420",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"15",name:"Autumn Classic",eventID:"340501",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"14",name:"Autumn Classic",eventID:"341453",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"13",name:"Autumn Classic",eventID:"341520",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"12",name:"Autumn Classic",eventID:"341665",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"11",name:"Autumn Classic",eventID:"342379",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"10",name:"Autumn Classic",eventID:"342741",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"9",name:"Autumn Classic",eventID:"343452",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"8",name:"Autumn Classic",eventID:"343526",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"7",name:"Autumn Classic",eventID:"343879",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"6",name:"Autumn Classic",eventID:"343880",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"5",name:"Autumn Classic",eventID:"343882",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"4",name:"Autumn Classic",eventID:"342379",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2024-11-15T17:00:00Z",subscriptionDeadline:"2024-11-10T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"3",name:"Autumn Classic",eventID:"345604",location:"countryside",startTime:"2024-11-15T09:00:00Z",endTime:"2025-7-27T17:00:00Z",subscriptionDeadline:"2025-7-27T17T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:"2",name:"Autumn Classic",eventID:"349041",location:"countryside",startTime:"2025-08-23T09:00:00Z",endTime:"2025-08-23T17:00:00Z",subscriptionDeadline:"2025-08-23T23:59:59Z",backgroundImage:"https://images.pexels.com/photos/1996335/pexels-photo-1996335.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}];ve=Of(ve);const ax=[{id:"1",name:"BELLAGENTE CLAUDIO",nationality:"ITA",club:"OFENA BOSANA",region:"Emilia Romagna",fiseId:"424",horseId:"1",horseName:"THUNDER BOLT",position:1,totalTime:"6:13:18",phases:[{phase:1,km:40,startTime:"07:54:00",arrivalTime:"15:15:09",loopTime:"2:01:07",speed:13.89,inTime:"9:55:08",recoveryTime:"1:52",phaseSpeed:13.87,rideTime:"9:57:00",rank:1,gap:"00:00:00"}],veterinaryChecks:[{phase:"PRE",heartRate:30,respiration:"Ok",mucous:"A",capillaryRefill:"1",skin:"1",gutSounds:"A",girth:"A",muscleTone:"A",gait:"A",veterinary:"Ok"}]}],Wb=[{id:"1",name:"THUNDER BOLT",fiseId:"H001",age:8,breed:"Arabian",owner:"Claudio Bellagente",results:[{eventId:"1",eventName:"Summer Sprint Race",date:"2024-12-15",position:1,riderId:"1",riderName:"BELLAGENTE CLAUDIO"}]}],Gb=[{id:"1",name:"CEI3* 160",distance:160,description:"160km endurance race with 3 phases"},{id:"2",name:"CEI3* 140",distance:140,description:"140km endurance race with 3 phases"}];function Of(t){return t.forEach(e=>{e.description="",e.categories=[],new Date(e.endTime)<new Date&&new Date(e.startTime)>new Date?e.status="live":new Date(e.endTime)<new Date?e.status="finished":e.status="upcoming"}),t}function Kb(t){return t.forEach(e=>{if(e.backgroundImage==""){const n=ux(),r=e.location.length%n.length;e.backgroundImage=n[r].url}}),t}const lx=async()=>(await new Promise(t=>setTimeout(t,500)),ve=Of(ve),ve=Kb(ve),ve.sort((t,e)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()),ve),qb=async t=>(await new Promise(e=>setTimeout(e,300)),Of(ve),ve.find(e=>e.id===t)||null),Qb=async()=>(await new Promise(t=>setTimeout(t,500)),ax),Yb=async()=>(await new Promise(t=>setTimeout(t,500)),Wb),Xb=async()=>(await new Promise(t=>setTimeout(t,300)),Gb),h0=async(t,e)=>(await new Promise(n=>setTimeout(n,300)),Zb()),Zb=()=>Hb,Jb=async(t,e)=>(await new Promise(n=>setTimeout(n,400)),ax.filter(n=>n.id==="1")),eC=async t=>{const e={id:t.id,name:t.name,location:t.location||"TBD",status:"upcoming",startTime:t.startTime,endTime:new Date(new Date(t.startTime).getTime()+288e5).toISOString(),subscriptionDeadline:new Date(new Date(t.startTime).getTime()-432e6).toISOString(),backgroundImage:t.backgroundImage};return ve.push(e),localStorage.setItem("mockEvents",JSON.stringify(ve)),await new Promise(n=>setTimeout(n,300)),e},tC=async(t,e)=>{const n=ve.findIndex(r=>r.id===t);if(n===-1)throw new Error("Event not found");return ve[n]={...ve[n],...e},localStorage.setItem("mockEvents",JSON.stringify(ve)),await new Promise(r=>setTimeout(r,300)),ve[n]},nC=async t=>{const e=ve.findIndex(n=>n.id===t);return e===-1?!1:(ve.splice(e,1),localStorage.setItem("mockEvents",JSON.stringify(ve)),await new Promise(n=>setTimeout(n,300)),!0)},Rc=()=>{if(ve.length===0){const t=localStorage.getItem("mockEvents");t&&(ve=JSON.parse(t))}return ve},ux=()=>[{name:"alain-moreau",url:"/event_backgrounds/alain-moreau-unsplash.jpg"},{name:"bird-eye-venue",url:"/event_backgrounds/bird-eye-venue-1280x720.jpg"},{name:"dallas-reedy",url:"/event_backgrounds/dallas-reedy-unsplash.jpg"},{name:"daniel-sanchez",url:"/event_backgrounds/daniel-sanchez-unsplash.jpg"},{name:"elena-rabkina",url:"/event_backgrounds/elena-rabkina-unsplash.jpg"},{name:"helena-lopes",url:"/event_backgrounds/helena-lopes-unsplash.jpg"},{name:"jeff-griffith",url:"/event_backgrounds/jeff-griffith-1-nsplash.jpg"},{name:"jeff-griffith",url:"/event_backgrounds/jeff-griffith-unsplash.jpg"},{name:"julia-joppien",url:"/event_backgrounds/julia-joppien-unsplash.jpg"},{name:"keith-luke",url:"/event_backgrounds/keith-luke-unsplash.jpg"},{name:"SUMMER_SPIRIT_RACE_1",url:"/event_backgrounds/SUMMER_SPIRIT_RACE_1.jpg"},{name:"violeta-pencheva",url:"/event_backgrounds/violeta-pencheva-12dXKDujs40-unsplash.jpg"}],rC=()=>{const[t,e]=L.useState([]),[n,r]=L.useState([]),[s,i]=L.useState(!0),[o,l]=L.useState(""),[u,d]=L.useState("all");return L.useEffect(()=>{(async()=>{try{const m=await lx();e(m),r(m)}catch(m){console.error("Error loading events:",m)}finally{i(!1)}})()},[]),L.useEffect(()=>{let p=t;o&&(p=p.filter(m=>m.name.toLowerCase().includes(o.toLowerCase())||m.location.toLowerCase().includes(o.toLowerCase()))),u!=="all"&&(p=p.filter(m=>m.status===u)),p.sort((m,g)=>m.status==="live"&&g.status!=="live"?-1:g.status==="live"&&m.status!=="live"?1:new Date(g.startTime).getTime()-new Date(m.startTime).getTime()),r(p)},[t,o,u]),s?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(p=>c.jsx("div",{className:"h-80 bg-gray-200 dark:bg-gray-700 rounded-lg"},p))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Horse Racing Events"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Discover upcoming and past endurance racing events"})]}),c.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(yu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Search events...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:o,onChange:p=>l(p.target.value)})]}),c.jsxs("div",{className:"relative",children:[c.jsx(X_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsxs("select",{className:"pl-10 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:u,onChange:p=>d(p.target.value),children:[c.jsx("option",{value:"all",children:"All Events"}),c.jsx("option",{value:"live",children:"Live"}),c.jsx("option",{value:"upcoming",children:"Upcoming"}),c.jsx("option",{value:"finished",children:"Finished"})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(p=>c.jsx(ox,{event:p},p.id))}),n.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No events found matching your criteria."})})]})},sC=({apiUrl:t})=>{const[e,n]=L.useState(null),[r,s]=L.useState([]),[i,o]=L.useState(!0),[l,u]=L.useState(null),[d,p]=L.useState("position"),[m,g]=L.useState(30);L.useEffect(()=>{const E=async()=>{if(!t){try{o(!0),u(null);const w=await h0("mock");w&&(n(w),S(w))}catch{u("Failed to load data")}finally{o(!1)}return}try{o(!0),u(null);const w=await h0(t);w&&(n(w),S(w))}catch(w){u("Failed to fetch live data"),console.error("Error fetching live data:",w)}finally{o(!1)}};E();const _=setInterval(E,3e4),I=setInterval(()=>{g(w=>w<=1?30:w-1)},1e3);return()=>{clearInterval(_),clearInterval(I)}},[t]),L.useEffect(()=>{if(r.length>0){const E=[...r].sort((_,I)=>{switch(d){case"position":return parseInt(_.rank)-parseInt(I.rank);case"time":return _.totalTime.localeCompare(I.totalTime);case"name":return _.name.localeCompare(I.name);default:return 0}});s(E)}},[d]);const S=E=>{const _=E.Data.map(I=>{const w=(U,B=0,x=1)=>{const v=E.List.Fields.map((T,k)=>({label:T.Label,index:k})).filter(T=>T.label===U).map(T=>T.index);return v.length>B?I[v[B]+x]??"":""};return{bib:w("Bib",0,-1),name:w("RIDER NAME",0,2).toLowerCase().split(" ").map(U=>U.charAt(0).toUpperCase()+U.slice(1)).join(" "),nationality:w("FLAG"),horse:w("HORSE NAME"),rank:w("Main rank"),totalTime:w("Ride Time"),phases:[{phase:"1",gap:w("Start",0),phaseKm:w("Phase Km",0),arrival:w("Arrival",0),loopSpeed:w("Loop Speed",0),loopTime:w("Loop Time",0),inTime:w("In Time",0),recoveryTime:w("Recovery Time",0),phaseSpeed:w("Phase Speed",0),rideTime:w("Ride Time",0),rideSpeed:w("Ride Speed",0),rank:w("Rank",0).replace(/[^a-z0-9]+/gi,""),startPhase:w("Start phase",0),ready4nextphase:w("Ready to next phase",0)==="yes",phaseInProgress:w("Ready to next phase",0)==="",estimatedTimeArrival:w("Extimated time arrival",0),estimatedLoopTime:w("Extimated loop time",0)},{phase:"2",gap:w("Start",1,0),phaseKm:w("Phase Km",1,0),startPhase:w("Start phase",1,0),arrival:w("Arrival",1,0),loopSpeed:w("Loop Speed",1,0),loopTime:w("Loop Time",1,0),inTime:w("In Time",1,0),recoveryTime:w("Recovery Time",1,0),phaseSpeed:w("Phase Speed",1,0),rideTime:w("Ride Time",1,0),rideSpeed:w("Ride Speed",1,0),rank:w("Rank",1,0).replace(/[^a-z0-9]+/gi,""),ready4nextphase:w("Ready to next phase",1,0)==="yes",phaseInProgress:w("Ready to next phase",1,0)==="",estimatedTimeArrival:w("Extimated time arrival",1,0),estimatedLoopTime:w("Extimated loop time",1,0)},{phase:"3",gap:w("Start",2,-1),phaseKm:w("Phase Km",2,-1),startPhase:w("Start phase",2,-1),arrival:w("Arrival",2,-1),loopSpeed:w("Loop Speed",2,-1),loopTime:w("Loop Time",2,-1),inTime:w("In Time",2,-1),recoveryTime:w("Recovery Time",2,-1),phaseSpeed:w("Phase Speed",2,-1),rideTime:w("Ride Time",2,-1),rideSpeed:w("Ride Speed",2,-1),rank:w("Rank",2,-1).replace(/[^a-z0-9]+/gi,""),ready4nextphase:w("Ready to next phase",2,-1)==="yes",phaseInProgress:w("Ready to next phase",2,-1)==="",estimatedTimeArrival:w("Extimated time arrival",2,-1),estimatedLoopTime:w("Extimated loop time",2,-1)}],veterinary:[{phase:"PRE",recoveryTimeVet:w("Recovery Time Vet",0,-4),heartRate:w("Heart Rate",0,-4),recIndex:w("Rec. Index",0,-4),respiration:w("Resp.",0,-4),mucous:w("Mucous",0,-4),capRefill:w("Cap. Refill",0,-4),skin:w("Skin",0,-4),gutSound:w("Gut Sounds",0,-4),girthBackWhiters:w("Girth Back Whiters",0,-4),muscleTone:w("Muscle Tone",0,-4),gait:w("Gait",0,-4),veterinary:w("Veterinary",0,-4),RI:w("R.I.",0,-4)},{phase:"1",recoveryTimeVet:w("Recovery Time Vet",1,-7),heartRate:w("Heart Rate",1,-7),recIndex:w("Rec. Index",1,-7),respiration:w("Resp.",1,-7),mucous:w("Mucous",1,-7),capRefill:w("Cap. Refill",1,-7),skin:w("Skin",1,-7),gutSound:w("Gut Sounds",1,-7),girthBackWhiters:w("Girth Back Whiters",1,-7),muscleTone:w("Muscle Tone",1,-7),gait:w("Gait",1,-7),veterinary:w("Veterinary",1,-7),RI:w("R.I.",1,-7)},{phase:"2",recoveryTimeVet:w("Recovery Time Vet",2,3),heartRate:w("Heart Rate",2,3),recIndex:w("Rec. Index",2,3),respiration:w("Resp.",2,3),mucous:w("Mucous",2,3),capRefill:w("Cap. Refill",2,3),skin:w("Skin",2,3),gutSound:w("Gut Sounds",2,3),girthBackWhiters:w("Girth Back Whiters",2,3),muscleTone:w("Muscle Tone",2,3),gait:w("Gait",2,3),veterinary:w("Veterinary",2,3),RI:w("R.I.",2,3)},{phase:"3",heartRate:w("Heart Rate",3,13),recIndex:w("Rec. Index",3,13),respiration:w("Resp.",3,13),mucous:w("Mucous",3,13),capRefill:w("Cap. Refill",3,13),skin:w("Skin",3,13),gutSound:w("Gut Sounds",3,13),girthBackWhiters:w("Girth Back Whiters",3,13),muscleTone:w("Muscle Tone",3,13),gait:w("Gait",3,13),veterinary:w("Veterinary",3,13),RI:w("R.I.",3,13)}]}});console.log("riders",_),s(_)};if(l)return c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:c.jsx("div",{className:"text-center text-red-600 dark:text-red-400",children:c.jsxs("p",{children:["Error loading live data: ",l]})})});if(!e||r.length===0)return c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:c.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[c.jsx(Tb,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No live race data available"}),c.jsx("p",{className:"text-sm mt-2",children:"Configure the live API URL in settings to see real-time results"})]})});const N=7,P=2*Math.PI*N;function j(E){const _=E/30,I=P*(1-_);return c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("div",{className:"relative w-8 h-8",children:[c.jsxs("svg",{className:"w-8 h-8 absolute top-0 left-0 -rotate-90",viewBox:"0 0 32 32",children:[c.jsx("circle",{cx:"16",cy:"16",r:N,stroke:"currentColor",strokeWidth:"2",fill:"none",className:"opacity-30"}),c.jsx("circle",{cx:"16",cy:"16",r:N,stroke:"red",strokeWidth:"2",fill:"none",strokeDasharray:P,strokeDashoffset:I,className:"transition-all duration-1000 ease-linear"})]}),c.jsx("div",{className:"absolute top-1/2 left-1/2 w-3 h-3 bg-red-500 rounded-full animate-pulse",style:{transform:"translate(-50%, -50%)"}})]}),c.jsx("span",{className:"text-sm",children:"LIVE"})]})}return c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold",children:e.List.HeadLine1}),c.jsxs("p",{className:"text-emerald-100 text-sm",children:[r.length," riders competing"]})]}),j(m)]})}),c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 border-b border-gray-200 dark:border-gray-600",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sort by:"}),c.jsx("div",{className:"flex space-x-2",children:[{key:"position",label:"Position"},{key:"time",label:"Time"},{key:"name",label:"Name"}].map(({key:E,label:_})=>c.jsx("button",{onClick:()=>p(E),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${d===E?"bg-emerald-600 text-white":"bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-500"}`,children:_},E))})]})}),c.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(E=>c.jsx(iC,{rider:E},E.bib))})]})},iC=Dt.memo(({rider:t})=>{var u;const[e,n]=L.useState(!1),[r,s]=L.useState(!1),i=parseInt(t.rank)||0;(u=t.phases[0])!=null&&u.gap;const o=d=>d===1?"text-yellow-500":d===2?"text-gray-400":d===3?"text-amber-600":"text-gray-600 dark:text-gray-400",l=d=>{const p=t.bib+"Position"+t.name.replace(/[^a-zA-Z0-9]/g,"");return d<=3?c.jsx("div",{className:`flex items-center space-x-1 ${o(d)}`,children:c.jsx("span",{className:"font-bold text-lg",children:d})},p):c.jsx("div",{className:"flex items-center space-x-1 text-gray-600 dark:text-gray-400",children:c.jsx("span",{className:"font-bold text-lg",children:d})},p)};return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${i<=3?"bg-gradient-to-r from-yellow-50 to-transparent dark:from-yellow-900/20":""}`,children:c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"flex items-center space-x-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"POS"}),l(i)]})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx(Z_,{className:"w-4 h-4 text-gray-400"}),c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white font-upper ",children:t.name})]}),c.jsx("p",{id:"horse name",className:"text-sm text-gray-600 dark:text-gray-400 font-medium",children:t.horse}),c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.bib}),c.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["(",t.nationality,")"]})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-6",children:[c.jsxs("div",{className:"text-right min-w-0",children:[c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"STARTED"}),c.jsx("div",{className:"flex items-center space-x-1",children:c.jsx("span",{className:"text-sm font-mono font-semibold text-gray-900 dark:text-white",children:t.phases.map((d,p)=>{if(d.phaseInProgress||t.phases.length==p+1)return d.startPhase})||t.phases[2].startPhase})})]}),c.jsxs("div",{className:"items-center",children:[c.jsx("button",{onClick:()=>s(!0),className:"flex items-center space-x-1 mt-1 px-3 py-1.5 border border-blue-300 text-blue-600 hover:bg-blue-50 text-xs rounded-lg transition-colors bg-transparent",children:c.jsx(d0,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>n(!0),className:"flex items-center space-x-1 mt-1 px-3 py-1.5 border border-red-400 text-red-600 hover:bg-red-50 text-xs rounded-lg transition-colors bg-transparent",children:c.jsx(Sc,{className:"w-3 h-3"})})]})]})]}),c.jsx(oC,{phases:t.phases})]})}),r&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[c.jsx(d0,{className:"w-5 h-5 mr-2 text-blue-600"}),"Phase Results - ",t.name]}),c.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"p-4",children:c.jsx("div",{className:"space-y-4",children:t.phases.map((d,p)=>c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400 text-lg",children:["Phase ",d.phase]}),c.jsx("span",{className:"text-lg font-mono bg-gray-100 dark:bg-gray-600 px-3 py-1 rounded",children:d.loopTime})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-gray-600 dark:text-gray-300",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Start:"}),c.jsx("span",{className:"font-mono",children:d.startPhase})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Arrival:"}),c.jsx("span",{className:"font-mono",children:d.arrival})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"In Time:"}),c.jsx("span",{className:"font-mono",children:d.inTime})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Recovery:"}),c.jsx("span",{className:"font-mono",children:d.recoveryTime})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Phase Speed:"}),c.jsxs("span",{className:"font-mono",children:[d.phaseSpeed," km/h"]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"font-medium",children:"Rank:"}),c.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:d.rank})]})]})]},"modal-phase"+p))})})]})}),e&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"hidden lg:block fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[c.jsx(Sc,{className:"w-5 h-5 mr-2 text-red-600"}),"Veterinary Checks - ",t.name]}),c.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"p-4",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-sm border-collapse",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[c.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Phase"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"HR"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"RI"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Resp"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Mucous"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Cap"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Skin"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Gut"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Girth"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Muscle"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Gait"}),c.jsx("th",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:"Vet"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:t.veterinary.map((d,p)=>c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[c.jsx("td",{className:"px-3 py-2 font-semibold text-red-600 dark:text-red-400 border border-gray-300 dark:border-gray-600",children:d.phase}),c.jsx("td",{className:"px-3 py-2 text-center border border-gray-300 dark:border-gray-600",children:c.jsxs("div",{className:"flex items-center justify-center space-x-1 text-gray-900 dark:text-white",children:[c.jsx(J_,{className:"w-4 h-4 text-red-500"}),c.jsx("span",{className:"font-mono font-semibold",children:d.heartRate})]})}),c.jsx("td",{className:"px-3 py-2 text-center font-semibold text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:d.recIndex}),c.jsx("td",{className:"px-3 py-2 text-center text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:d.respiration}),c.jsx("td",{className:"px-3 py-2 text-center text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:d.mucous}),c.jsx("td",{className:"px-3 py-2 text-center text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:d.capRefill}),c.jsx("td",{className:`px-3 py-2 text-center font-semibold border border-gray-300 dark:border-gray-600 ${d.skin==="1"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.skin}),c.jsx("td",{className:`px-3 py-2 text-center font-semibold border border-gray-300 dark:border-gray-600 ${d.gutSound==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.gutSound}),c.jsx("td",{className:`px-3 py-2 text-center font-semibold border border-gray-300 dark:border-gray-600 ${d.girthBackWhiters==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.girthBackWhiters}),c.jsx("td",{className:`px-3 py-2 text-center font-semibold border border-gray-300 dark:border-gray-600 ${d.muscleTone==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.muscleTone}),c.jsx("td",{className:`px-3 py-2 text-center font-semibold border border-gray-300 dark:border-gray-600 ${d.gait==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.gait}),c.jsx("td",{className:"px-3 py-2 text-center text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600",children:d.veterinary})]},"modal-vet"+p))})]})})})]})}),c.jsx("div",{className:"block lg:hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[c.jsx(Sc,{className:"w-5 h-5 mr-2 text-red-600"}),"Veterinary Checks - ",t.name]}),c.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"p-4",children:c.jsx("div",{className:"overflow-x-auto w-full",children:c.jsxs("table",{className:"min-w-max table-fixed border-collapse text-sm w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[c.jsx("th",{className:"px-3 py-2 border text-left font-bold text-gray-800 dark:text-gray-200",children:"Phase"}),t.veterinary.map((d,p)=>c.jsx("th",{className:"px-3 py-2 border text-center font-bold text-red-600 dark:text-red-400",children:d.phase},"phase-head-"+p))]})}),c.jsxs("tbody",{children:[c.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white flex items-center space-x-1",children:c.jsx("span",{children:"HR"})}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center font-mono text-gray-800 dark:text-white",children:d.heartRate},"hr-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"RI"}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center",children:d.recIndex},"ri-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Resp"}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center",children:d.respiration},"resp-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Mucous"}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center",children:d.mucous},"mucous-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Cap"}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center",children:d.capRefill},"cap-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Skin"}),t.veterinary.map((d,p)=>c.jsx("td",{className:`px-3 py-2 border text-center font-semibold ${d.skin==="1"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.skin},"skin-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Gut"}),t.veterinary.map((d,p)=>c.jsx("td",{className:`px-3 py-2 border text-center font-semibold ${d.gutSound==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.gutSound},"gut-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Girth"}),t.veterinary.map((d,p)=>c.jsx("td",{className:`px-3 py-2 border text-center font-semibold ${d.girthBackWhiters==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.girthBackWhiters},"girth-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Muscle"}),t.veterinary.map((d,p)=>c.jsx("td",{className:`px-3 py-2 border text-center font-semibold ${d.muscleTone==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.muscleTone},"muscle-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Gait"}),t.veterinary.map((d,p)=>c.jsx("td",{className:`px-3 py-2 border text-center font-semibold ${d.gait==="A"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d.gait},"gait-"+p))]}),c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 border font-medium text-gray-800 dark:text-white",children:"Vet"}),t.veterinary.map((d,p)=>c.jsx("td",{className:"px-3 py-2 border text-center",children:d.veterinary},"vet-"+p))]})]})]})})})]})})]})]})}),oC=({phases:t})=>{const e=t.length;return c.jsxs("div",{className:"w-full mt-2",children:[c.jsx("div",{className:"flex items-center justify-between w-full",children:t.map((n,r)=>{const s=n.ready4nextphase,i=n.phaseInProgress;return c.jsxs(Dt.Fragment,{children:[c.jsx("div",{className:`flex-1 h-2 mx-1 rounded-full transition-all duration-500 ${s?"bg-green-500":i?"bg-blue-500":"bg-gray-300 dark:bg-gray-600"}`}),r<e&&c.jsx("div",{className:"relative",children:c.jsxs("div",{className:`w-6 h-6 rounded-full border-2 transition-all duration-500 flex items-center justify-center ${s?"bg-green-500 border-green-500":i?"bg-blue-500 border-blue-500":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"}`,children:[s&&c.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),i&&!s&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})]})})]},`phase-${r}`)})}),c.jsx("div",{className:"flex justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:t.map((n,r)=>c.jsx("div",{className:"flex-1 text-center",children:c.jsxs("span",{children:["Phase ",r+1]})},`label-${r}`))})]})},aC=()=>{const{id:t}=Dv(),[e,n]=L.useState(null),[r,s]=L.useState([]),[i,o]=L.useState(!0),{liveApiUrl:l}=Ro();return L.useEffect(()=>{(async()=>{if(t)try{const[d,p]=await Promise.all([qb(t),Xb()]);n(d),s(p)}catch(d){console.error("Error loading event data:",d)}finally{o(!1)}})()},[t]),i?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-700 rounded-lg"})]})}):e?c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"mb-6",children:c.jsxs(Ae,{to:"/",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400 mb-4",children:[c.jsx(Y_,{className:"w-4 h-4"}),c.jsx("span",{children:"Back to Events"})]})}),c.jsxs("div",{className:"h-96 bg-cover bg-center rounded-lg relative mb-8",style:{backgroundImage:`url(${e.backgroundImage})`},children:[c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{overflowX:"clip"},children:c.jsxs("div",{className:"text-center text-white",children:[c.jsx("div",{className:"mb-4",children:c.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${e.status==="live"?"bg-red-500 animate-pulse":e.status==="upcoming"?"bg-emerald-500":"bg-gray-500"}`,children:e.status.toUpperCase()})}),c.jsx("h1",{className:"text-4xl font-bold mb-4",children:e.name}),c.jsxs("div",{className:"p-6 flex items-center justify-center space-x-6 text-lg",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(tx,{className:"w-5 h-5"}),c.jsx("span",{children:e.location})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(gu,{className:"w-5 h-5"}),c.jsx("span",{children:new Date(e.startTime).toLocaleDateString()})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(jf,{className:"w-5 h-5"}),c.jsx("span",{children:new Date(e.startTime).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2",children:[e.status==="live"&&l&&c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Live Results"}),c.jsx(sC,{apiUrl:l})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Event Details"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:e.description}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Start Time"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:new Date(e.startTime).toLocaleString()})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"End Time"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:new Date(e.endTime).toLocaleString()})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Location"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.location})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Registration Deadline"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:new Date(e.subscriptionDeadline).toLocaleString()})]})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Categories"}),c.jsx("div",{className:"space-y-3",children:e.categories.map(u=>{const d=r.find(p=>p.name===u);return c.jsx(Ae,{to:`/events/${e.id}/categories/${u}`,className:"block p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:u}),d&&c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[d.distance,"km - ",d.description]})]}),c.jsx(Zs,{className:"w-5 h-5 text-amber-500"})]})},u)})})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Quick Links"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("a",{href:"https://t-tracksystem.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400",children:[c.jsx(Lf,{className:"w-4 h-4"}),c.jsx("span",{children:"T-track System"})]}),c.jsxs(Ae,{to:"/riders",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400",children:[c.jsx(Df,{className:"w-4 h-4"}),c.jsx("span",{children:"View All Riders"})]})]})]})]})]})]}):c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Event Not Found"}),c.jsx(Ae,{to:"/",className:"text-emerald-600 hover:text-emerald-700 dark:text-emerald-400",children:"Return to Events"})]})})},lC=()=>{const{eventId:t,categoryName:e}=Dv(),[n,r]=L.useState([]),[s,i]=L.useState(!0);return L.useEffect(()=>{(async()=>{if(!(!t||!e))try{const l=await Jb(t,e);r(l)}catch(l){console.error("Error loading riders:",l)}finally{i(!1)}})()},[t,e]),s?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"space-y-4",children:[1,2,3].map(o=>c.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded-lg"},o))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs(Ae,{to:`/events/${t}`,className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400 mb-4",children:[c.jsx(Y_,{className:"w-4 h-4"}),c.jsx("span",{children:"Back to Event"})]}),c.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[e," Results"]})]}),c.jsx("div",{className:"space-y-6",children:n.map(o=>c.jsx(uC,{rider:o},o.id))}),n.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No riders found for this category."})})]})},uC=({rider:t})=>{const[e,n]=L.useState(!1);return c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[t.position&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Zs,{className:"w-6 h-6 text-amber-500"}),c.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[t.position,"°"]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t.name}),c.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[t.club," - ",t.region]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Horse: ",t.horseName]}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Nationality: ",t.nationality]}),t.totalTime&&c.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[c.jsx(jf,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"font-mono text-sm",children:t.totalTime})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs(Ae,{to:`/riders/${t.id}`,className:"flex items-center space-x-1 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400",children:[c.jsx(Bo,{className:"w-4 h-4"}),c.jsx("span",{children:"View Profile"})]})}),c.jsx("button",{onClick:()=>n(!e),className:"px-4 py-2 text-sm bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:e?"Show Less":"Show Details"})]}),e&&c.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Phase Results"}),c.jsx("div",{className:"space-y-3",children:t.phases.map((r,s)=>c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("span",{className:"font-medium",children:["Phase ",r.phase," (",r.km,"km)"]}),c.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.speed," km/h"]})]}),c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[c.jsxs("div",{children:["Start: ",r.startTime]}),c.jsxs("div",{children:["Arrival: ",r.arrivalTime]}),c.jsxs("div",{children:["Loop Time: ",r.loopTime]}),c.jsxs("div",{children:["Recovery: ",r.recoveryTime]}),r.rank&&c.jsxs("div",{children:["Rank: ",r.rank]})]})]},s))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Veterinary Checks"}),c.jsx("div",{className:"space-y-3",children:t.veterinaryChecks.map((r,s)=>c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-medium",children:r.phase}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(J_,{className:"w-4 h-4 text-red-500"}),c.jsxs("span",{className:"text-sm",children:[r.heartRate," bpm"]})]})]}),c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[c.jsxs("div",{children:["Status: ",r.veterinary]}),c.jsxs("div",{children:["Respiration: ",r.respiration]}),c.jsxs("div",{children:["Mucous: ",r.mucous]}),c.jsxs("div",{children:["Gait: ",r.gait]}),r.recoveryTime&&c.jsxs("div",{children:["Recovery: ",r.recoveryTime]})]})]},s))})]})]})})]})})},f0=()=>{const[t,e]=L.useState([]),[n,r]=L.useState([]),[s,i]=L.useState(!0),[o,l]=L.useState("");return L.useEffect(()=>{(async()=>{try{const d=await Qb();e(d),r(d)}catch(d){console.error("Error loading riders:",d)}finally{i(!1)}})()},[]),L.useEffect(()=>{if(o){const u=t.filter(d=>d.name.toLowerCase().includes(o.toLowerCase())||d.club.toLowerCase().includes(o.toLowerCase())||d.region.toLowerCase().includes(o.toLowerCase()));r(u)}else r(t)},[t,o]),s?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(u=>c.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700 rounded-lg"},u))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Riders"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Browse rider profiles and their racing history"})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"relative",children:[c.jsx(yu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Search riders...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:o,onChange:u=>l(u.target.value)})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(u=>c.jsx(cC,{rider:u},u.id))}),n.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No riders found matching your search."})})]})},cC=({rider:t})=>c.jsx(Ae,{to:`/riders/${t.id}`,className:"block",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-12 h-12 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:c.jsx(Bo,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.fifeId})]})]}),t.position&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Zs,{className:"w-4 h-4 text-amber-500"}),c.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.position,"°"]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Z_,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.nationality})]}),c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.jsxs("div",{children:["Club: ",t.club]}),c.jsxs("div",{children:["Region: ",t.region]}),c.jsxs("div",{children:["Horse: ",t.horseName]})]})]})]})}),p0=()=>{const[t,e]=L.useState([]),[n,r]=L.useState([]),[s,i]=L.useState(!0),[o,l]=L.useState("");return L.useEffect(()=>{(async()=>{try{const d=await Yb();e(d),r(d)}catch(d){console.error("Error loading horses:",d)}finally{i(!1)}})()},[]),L.useEffect(()=>{if(o){const u=t.filter(d=>{var p,m;return d.name.toLowerCase().includes(o.toLowerCase())||((p=d.breed)==null?void 0:p.toLowerCase().includes(o.toLowerCase()))||((m=d.owner)==null?void 0:m.toLowerCase().includes(o.toLowerCase()))});r(u)}else r(t)},[t,o]),s?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(u=>c.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700 rounded-lg"},u))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Horses"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Browse horse profiles and their racing achievements"})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"relative",children:[c.jsx(yu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Search horses...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:o,onChange:u=>l(u.target.value)})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(u=>c.jsx(dC,{horse:u},u.id))}),n.length===0&&c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No horses found matching your search."})})]})},dC=({horse:t})=>c.jsx(Ae,{to:`/horses/${t.id}`,className:"block",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[c.jsx("div",{className:"h-48 bg-cover bg-center",style:{backgroundImage:"url(https://images.pexels.com/photos/1996327/pexels-photo-1996327.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1)"},children:c.jsx("div",{className:"h-full bg-black bg-opacity-30 flex items-end",children:c.jsxs("div",{className:"p-4 text-white",children:[c.jsx("h3",{className:"text-xl font-bold",children:t.name}),c.jsxs("p",{className:"text-sm opacity-90",children:[t.breed," • ",t.age," years"]})]})})}),c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.jsxs("div",{children:["Owner: ",t.owner]}),c.jsxs("div",{children:["FISE ID: ",t.fifeId]})]}),c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Zs,{className:"w-4 h-4 text-amber-500"}),c.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.results.length," races"]})]})]}),t.results.length>0&&c.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(gu,{className:"w-4 h-4"}),c.jsxs("span",{children:["Last race: ",t.results[0].eventName]})]}),c.jsxs("div",{className:"mt-1",children:["Position: ",t.results[0].position,"° with ",t.results[0].riderName]})]})})]})]})}),hC=()=>{const[t,e]=L.useState([]),[n,r]=L.useState([]),[s,i]=L.useState(!0),[o,l]=L.useState(""),[u,d]=L.useState("all");L.useEffect(()=>{(async()=>{try{const S=(await lx()).filter(N=>N.status==="finished");e(S),r(S)}catch(g){console.error("Error loading events:",g)}finally{i(!1)}})()},[]),L.useEffect(()=>{let m=t;o&&(m=m.filter(g=>g.name.toLowerCase().includes(o.toLowerCase())||g.location.toLowerCase().includes(o.toLowerCase()))),u!=="all"&&(m=m.filter(g=>new Date(g.startTime).getFullYear().toString()===u)),m.sort((g,S)=>new Date(S.startTime).getTime()-new Date(g.startTime).getTime()),r(m)},[t,o,u]);const p=Array.from(new Set(t.map(m=>new Date(m.startTime).getFullYear().toString()))).sort((m,g)=>parseInt(g)-parseInt(m));return s?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64 mb-6"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(m=>c.jsx("div",{className:"h-80 bg-gray-200 dark:bg-gray-700 rounded-lg"},m))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Race History"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Browse past endurance racing events and results"})]}),c.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(yu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Search events...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:o,onChange:m=>l(m.target.value)})]}),c.jsxs("div",{className:"relative",children:[c.jsx(X_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsxs("select",{className:"pl-10 pr-8 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:u,onChange:m=>d(m.target.value),children:[c.jsx("option",{value:"all",children:"All Years"}),p.map(m=>c.jsx("option",{value:m,children:m},m))]})]})]}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:t.length}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Events"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:p.length}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Years of Racing"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.reduce((m,g)=>m+g.categories.length,0)}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Categories"})]})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(m=>c.jsx(ox,{event:m},m.id))}),n.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Zs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No events found matching your criteria."})]})]})},fC=()=>{const{darkMode:t,toggleDarkMode:e,isPWA:n,liveApiKey:r,setLiveApiKey:s,historyApiKey:i,setHistoryApiKey:o,eventApiKey:l,setEventApiKey:u}=Ro(),{user:d,userProfile:p,logout:m,isAdmin:g}=Pf(),[S,N]=Dt.useState(!1),[P,j]=Dt.useState([]),[E,_]=Dt.useState(!1),[I,w]=Dt.useState(null),[U,B]=L.useState(5),[x,v]=Dt.useState({id:"",name:"",startTime:"",endTime:"",backgroundImage:"",location:"",description:""}),[T,k]=Dt.useState(!1),[R,b]=Dt.useState("");Dt.useEffect(()=>{j(Rc())},[]);const A=ux(),ut=async()=>{try{await m()}catch(O){console.error("Error logging out:",O)}},rn=()=>{w(null),v({id:"",name:"",startTime:"",endTime:"",backgroundImage:A[0].url,location:"",description:""}),_(!0),b("")},vr=O=>{w(O),v({id:O.id,name:O.name,startTime:O.startTime.slice(0,16),endTime:O.endTime.slice(0,16),backgroundImage:O.backgroundImage,location:O.location,description:""}),b(""),_(!0)},Pt=async()=>{if(!x.id||!x.name||!x.startTime){b("Please fill in all required fields");return}k(!0),b("");try{const O={...x,startTime:new Date(x.startTime).toISOString()};I?await tC(I.id,O):await eC(O),j(Rc()),_(!1)}catch(O){b(O.message||"Failed to save event")}finally{k(!1)}},$=async O=>{if(confirm("Are you sure you want to delete this event?"))try{await nC(O),j(Rc())}catch(Q){console.error("Failed to delete event:",Q)}};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure your T-track experience"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Account"}),d?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-full flex items-center justify-center",children:g?c.jsx(Na,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}):c.jsx(Bo,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:(p==null?void 0:p.displayName)||d.email}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g?"Administrator":"User"," • ",d.email]})]})]}),c.jsxs("button",{onClick:ut,className:"flex items-center space-x-2 text-red-600 hover:text-red-700 dark:text-red-400",children:[c.jsx(ex,{className:"w-4 h-4"}),c.jsx("span",{children:"Sign Out"})]})]}):c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Sign in to access additional features and settings."}),c.jsx("button",{onClick:()=>N(!0),className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors",children:"Sign In"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Appearance"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[t?c.jsx(nx,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):c.jsx(sx,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Dark Mode"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t?"Currently using dark theme":"Currently using light theme"})]})]}),c.jsx("button",{onClick:e,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 ${t?"bg-emerald-600":"bg-gray-200"}`,children:c.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${t?"translate-x-5":"translate-x-0"}`})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Display Mode"}),c.jsxs("div",{className:"flex items-center space-x-3",children:[n?c.jsx(rx,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}):c.jsx(bb,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:n?"PWA Mode":"Browser Mode"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n?"Running as installed PWA with bottom navigation":"Running in browser with top navigation"})]})]})]}),g&&c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Live API Configuration"}),c.jsx("div",{className:"mb-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Na,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),c.jsx("span",{className:"text-sm text-amber-800 dark:text-amber-200 font-medium",children:"Administrator Only"})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"liveApiKey",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Live API Key"}),c.jsx("input",{type:"url",id:"liveApiKey",value:r,onChange:O=>s(O.target.value),placeholder:"https://api.t-tracksystem.com/live",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Enter the API key for the live race data API endpoint"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"eventApiKey",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event API Key"}),c.jsx("input",{type:"url",id:"eventApiKey",value:l,onChange:O=>u(O.target.value),placeholder:"https://api.t-tracksystem.com/live",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Enter the API key for the event race data API endpoint"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"historyApiKey",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"History API Keys"}),c.jsx("input",{type:"url",id:"historyApiKey",value:i,onChange:O=>o(O.target.value),placeholder:"https://api.t-tracksystem.com/live",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Enter the API key for the history data API endpoint"})]}),c.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:c.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[c.jsx("strong",{children:"Note:"})," The API should return JSON data in the format used by the T-track system. Live data will be refreshed every 30 seconds during events."]})})]})]}),g&&c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Event Management"}),c.jsxs("button",{onClick:rn,className:"flex items-center space-x-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors",children:[c.jsx(Cb,{className:"w-4 h-4"}),c.jsx("span",{children:"Create Event"})]})]}),c.jsx("div",{className:"mb-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Na,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),c.jsx("span",{className:"text-sm text-amber-800 dark:text-amber-200 font-medium",children:"Administrator Only"})]})}),P.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[c.jsx(gu,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"No custom events created yet"}),c.jsx("p",{className:"text-sm",children:'Click "Create Event" to add your first event'})]}):c.jsx("div",{className:"space-y-3",children:P.map(O=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("img",{src:O.backgroundImage,alt:O.name,className:"w-16 h-10 object-cover rounded"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:O.name}),c.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[c.jsxs("span",{children:["ID: ",O.id]}),c.jsx("span",{children:new Date(O.startTime).toLocaleDateString()}),c.jsx("span",{children:O.location})]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("button",{onClick:()=>vr(O),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400",children:c.jsx(Lb,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>$(O.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400",children:c.jsx(Db,{className:"w-4 h-4"})})]})]},O.id))})]}),!g&&d&&c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 text-center",children:[c.jsx(Na,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Administrator Access Required"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Event management and API configuration settings are only available to administrators."})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"About"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"T-track Horse Racing PWA"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"A progressive web application for tracking horse racing events, riders, and results."})]}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("a",{href:"https://t-tracksystem.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 dark:text-emerald-400",children:[c.jsx(Lf,{className:"w-4 h-4"}),c.jsx("span",{children:"T-track System"})]})})]})]})]})]}),c.jsx(ix,{isOpen:S,onClose:()=>N(!1)}),E&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:I?"Edit Event":"Create New Event"}),c.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.jsx(jr,{className:"w-6 h-6"})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[R&&c.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:c.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:R})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event ID *"}),c.jsx("input",{type:"number",inputMode:"numeric",maxLength:7,value:x.id,onChange:O=>{const Q=O.target.value.replace(/\D/g,"");v({...x,id:Q})},disabled:!!I,placeholder:"e.g., 340001",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white disabled:bg-gray-100 dark:disabled:bg-gray-600"}),I&&c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Event ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Event Name *"}),c.jsx("input",{type:"text",value:x.name,onChange:O=>v({...x,name:O.target.value}),placeholder:"e.g., Summer Endurance Championship",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Time *"}),c.jsx("input",{type:"datetime-local",value:x.startTime,onChange:O=>{v({...x,startTime:O.target.value}),v({...x,endTime:O.target.value})},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Time *"}),c.jsx("input",{type:"datetime-local",value:x.endTime,onChange:O=>v({...x,endTime:O.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),c.jsx("input",{type:"text",value:x.location,onChange:O=>v({...x,location:O.target.value}),placeholder:"e.g., Tuscany Hills, Italy",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cover Image"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:A.slice(0,U).map(O=>c.jsxs("button",{type:"button",onClick:()=>v({...x,backgroundImage:O.url}),className:`relative rounded-lg overflow-hidden border-2 transition-all ${x.backgroundImage===O.url?"border-emerald-500 ring-2 ring-emerald-200 dark:ring-emerald-800":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[c.jsx("img",{src:O.url,alt:O.name,className:"w-full h-20 object-cover"}),c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-end",children:c.jsx("span",{className:"text-white text-xs p-2 font-medium",children:O.name})}),x.backgroundImage===O.url&&c.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-emerald-500 rounded-full flex items-center justify-center",children:c.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},O.url))}),U<A.length&&c.jsx("div",{className:"mt-3 flex justify-center",children:c.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-600 text-white rounded shadow hover:bg-gray-700 transition",onClick:()=>B(O=>Math.min(O+5,A.length)),children:"Load More Images"})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),c.jsx("textarea",{value:x.description,onChange:O=>v({...x,description:O.target.value}),rows:3,placeholder:"Brief description of the event...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]})]}),c.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),c.jsx("button",{onClick:Pt,disabled:T,className:"flex items-center space-x-2 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:T?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Saving..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Pb,{className:"w-4 h-4"}),c.jsx("span",{children:I?"Update Event":"Create Event"})]})})]})]})})]})};function pC(){return c.jsx(xb,{children:c.jsx(gI,{children:c.jsxs(hI,{children:[c.jsx(Vb,{children:c.jsxs(iI,{children:[c.jsx(Wt,{path:"/",element:c.jsx(rC,{})}),c.jsx(Wt,{path:"/events/:id",element:c.jsx(aC,{})}),c.jsx(Wt,{path:"/events/:eventId/categories/:categoryName",element:c.jsx(lC,{})}),c.jsx(Wt,{path:"/riders",element:c.jsx(f0,{})}),c.jsx(Wt,{path:"/riders/:id",element:c.jsx(f0,{})}),c.jsx(Wt,{path:"/horses",element:c.jsx(p0,{})}),c.jsx(Wt,{path:"/horses/:id",element:c.jsx(p0,{})}),c.jsx(Wt,{path:"/history",element:c.jsx(hC,{})}),c.jsx(Wt,{path:"/settings",element:c.jsx(fC,{})})]})}),c.jsx(Fb,{})]})})})}Sv(document.getElementById("root")).render(c.jsx(L.StrictMode,{children:c.jsx(pC,{})}));
